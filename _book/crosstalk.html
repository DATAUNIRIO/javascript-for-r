<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Crosstalk | JavaScript for R</title>
  <meta name="description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Crosstalk | JavaScript for R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="github-repo" content="JohnCoene/javascript-for-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Crosstalk | JavaScript for R" />
  
  <meta name="twitter:description" content="Invite JavaScript into your Data Science workflow." />
  

<meta name="author" content="John Coene" />


<meta name="date" content="2020-08-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="advanced-topics.html"/>
<link rel="next" href="working-with-shiny.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block/empty-anchor.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>
<script src="libs/core-js/shim.min.js"></script>
<script src="libs/react/react.min.js"></script>
<script src="libs/react/react-dom.min.js"></script>
<script src="libs/reactwidget/react-tools.js"></script>
<script src="libs/reactable-binding/reactable.js"></script>
<script src="libs/r2d3-render/r2d3-render.js"></script>
<script src="libs/webcomponents/webcomponents.js"></script>
<script src="libs/r2d3-binding/r2d3.js"></script>
<script src="libs/d3v5/d3.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">JavaScript for R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#premise"><i class="fa fa-check"></i>Premise</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
</ul></li>
<li class="part"><span><b>I Basics &amp; Roadmap</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#rationale"><i class="fa fa-check"></i><b>1.1</b> Rationale</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#methods"><i class="fa fa-check"></i><b>1.2</b> Methods</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#v8"><i class="fa fa-check"></i><b>1.2.1</b> V8</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#htmlwidgets"><i class="fa fa-check"></i><b>1.2.2</b> htmlwidgets</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction.html"><a href="introduction.html#shiny"><i class="fa fa-check"></i><b>1.2.3</b> Shiny</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction.html"><a href="introduction.html#bubble"><i class="fa fa-check"></i><b>1.2.4</b> bubble</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#methods-amiss"><i class="fa fa-check"></i><b>1.3</b> Methods Amiss</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#reactr"><i class="fa fa-check"></i><b>1.3.1</b> reactR</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#r2d3"><i class="fa fa-check"></i><b>1.3.2</b> r2d3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>2</b> Prerequisites</a>
<ul>
<li class="chapter" data-level="2.1" data-path="prerequisites.html"><a href="prerequisites.html#r-package-development"><i class="fa fa-check"></i><b>2.1</b> R Package Development</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="prerequisites.html"><a href="prerequisites.html#creating-a-package"><i class="fa fa-check"></i><b>2.1.1</b> Creating a Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="prerequisites.html"><a href="prerequisites.html#metadata"><i class="fa fa-check"></i><b>2.1.2</b> Metadata</a></li>
<li class="chapter" data-level="2.1.3" data-path="prerequisites.html"><a href="prerequisites.html#r-code"><i class="fa fa-check"></i><b>2.1.3</b> R code</a></li>
<li class="chapter" data-level="2.1.4" data-path="prerequisites.html"><a href="prerequisites.html#documentation"><i class="fa fa-check"></i><b>2.1.4</b> Documentation</a></li>
<li class="chapter" data-level="2.1.5" data-path="prerequisites.html"><a href="prerequisites.html#installed-files"><i class="fa fa-check"></i><b>2.1.5</b> Installed files</a></li>
<li class="chapter" data-level="2.1.6" data-path="prerequisites.html"><a href="prerequisites.html#build-load-and-install"><i class="fa fa-check"></i><b>2.1.6</b> Build, load, and install</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prerequisites.html"><a href="prerequisites.html#json"><i class="fa fa-check"></i><b>2.2</b> JSON</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="prerequisites.html"><a href="prerequisites.html#serialising"><i class="fa fa-check"></i><b>2.2.1</b> Serialising</a></li>
<li class="chapter" data-level="2.2.2" data-path="prerequisites.html"><a href="prerequisites.html#tabular-data"><i class="fa fa-check"></i><b>2.2.2</b> Tabular data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>2.3</b> JavaScript</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="prerequisites.html"><a href="prerequisites.html#developer-tools"><i class="fa fa-check"></i><b>2.3.1</b> Developer tools</a></li>
<li class="chapter" data-level="2.3.2" data-path="prerequisites.html"><a href="prerequisites.html#variable-declaration-and-scope"><i class="fa fa-check"></i><b>2.3.2</b> Variable declaration and scope</a></li>
<li class="chapter" data-level="2.3.3" data-path="prerequisites.html"><a href="prerequisites.html#document-object-model"><i class="fa fa-check"></i><b>2.3.3</b> Document object model</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Visualisation</b></span></li>
<li class="chapter" data-level="3" data-path="introduction-to-widgets.html"><a href="introduction-to-widgets.html"><i class="fa fa-check"></i><b>3</b> Introduction to widgets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-widgets.html"><a href="introduction-to-widgets.html#plotly-package"><i class="fa fa-check"></i><b>3.1</b> Plotly package</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-widgets.html"><a href="introduction-to-widgets.html#dt-package"><i class="fa fa-check"></i><b>3.2</b> DT package</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html"><i class="fa fa-check"></i><b>4</b> Basics of building widgets</a>
<ul>
<li class="chapter" data-level="4.1" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#candidate-libraries"><i class="fa fa-check"></i><b>4.1</b> Candidate Libraries</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#plotly"><i class="fa fa-check"></i><b>4.1.1</b> Plotly</a></li>
<li class="chapter" data-level="4.1.2" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#highchart.js"><i class="fa fa-check"></i><b>4.1.2</b> Highchart.js</a></li>
<li class="chapter" data-level="4.1.3" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#chart.js"><i class="fa fa-check"></i><b>4.1.3</b> Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#how-it-works"><i class="fa fa-check"></i><b>4.2</b> How it works</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="your-first-widget.html"><a href="your-first-widget.html"><i class="fa fa-check"></i><b>5</b> Your First Widget</a>
<ul>
<li class="chapter" data-level="5.1" data-path="your-first-widget.html"><a href="your-first-widget.html#the-scaffold"><i class="fa fa-check"></i><b>5.1</b> The Scaffold</a></li>
<li class="chapter" data-level="5.2" data-path="your-first-widget.html"><a href="your-first-widget.html#the-output"><i class="fa fa-check"></i><b>5.2</b> The Output</a></li>
<li class="chapter" data-level="5.3" data-path="your-first-widget.html"><a href="your-first-widget.html#javascript-side"><i class="fa fa-check"></i><b>5.3</b> JavaScript-side</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html"><i class="fa fa-check"></i><b>6</b> A Realistic Widget</a>
<ul>
<li class="chapter" data-level="6.1" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#dependency"><i class="fa fa-check"></i><b>6.1</b> Dependency</a></li>
<li class="chapter" data-level="6.2" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>6.2</b> JavaScript</a></li>
<li class="chapter" data-level="6.3" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#html-element"><i class="fa fa-check"></i><b>6.3</b> HTML Element</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="the-full-monty.html"><a href="the-full-monty.html"><i class="fa fa-check"></i><b>7</b> The Full Monty</a>
<ul>
<li class="chapter" data-level="7.1" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i><b>7.1</b> Dependencies</a></li>
<li class="chapter" data-level="7.2" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>7.2</b> JavaScript</a></li>
<li class="chapter" data-level="7.3" data-path="the-full-monty.html"><a href="the-full-monty.html#working-with-data"><i class="fa fa-check"></i><b>7.3</b> Working with Data</a></li>
<li class="chapter" data-level="7.4" data-path="the-full-monty.html"><a href="the-full-monty.html#transforming-data"><i class="fa fa-check"></i><b>7.4</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="the-full-monty.html"><a href="the-full-monty.html#in-javascript"><i class="fa fa-check"></i><b>7.4.1</b> In JavaScript</a></li>
<li class="chapter" data-level="7.4.2" data-path="the-full-monty.html"><a href="the-full-monty.html#in-r"><i class="fa fa-check"></i><b>7.4.2</b> In R</a></li>
<li class="chapter" data-level="7.4.3" data-path="the-full-monty.html"><a href="the-full-monty.html#pros-cons"><i class="fa fa-check"></i><b>7.4.3</b> Pros &amp; Cons</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="the-full-monty.html"><a href="the-full-monty.html#on-print"><i class="fa fa-check"></i><b>7.5</b> On Print</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>8</b> Advanced Topics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="advanced-topics.html"><a href="advanced-topics.html#shared-variables"><i class="fa fa-check"></i><b>8.1</b> Shared Variables</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="advanced-topics.html"><a href="advanced-topics.html#sizing"><i class="fa fa-check"></i><b>8.1.1</b> Sizing</a></li>
<li class="chapter" data-level="8.1.2" data-path="advanced-topics.html"><a href="advanced-topics.html#sizing-policy"><i class="fa fa-check"></i><b>8.1.2</b> Sizing Policy</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="advanced-topics.html"><a href="advanced-topics.html#resizing"><i class="fa fa-check"></i><b>8.2</b> Resizing</a></li>
<li class="chapter" data-level="8.3" data-path="advanced-topics.html"><a href="advanced-topics.html#pre-render-hooks-security"><i class="fa fa-check"></i><b>8.3</b> Pre Render Hooks &amp; Security</a></li>
<li class="chapter" data-level="8.4" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i><b>8.4</b> JavaScript Code</a></li>
<li class="chapter" data-level="8.5" data-path="advanced-topics.html"><a href="advanced-topics.html#prepend-append-content"><i class="fa fa-check"></i><b>8.5</b> Prepend &amp; Append Content</a></li>
<li class="chapter" data-level="8.6" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i><b>8.6</b> Dependencies</a></li>
<li class="chapter" data-level="8.7" data-path="advanced-topics.html"><a href="advanced-topics.html#compatibility"><i class="fa fa-check"></i><b>8.7</b> Compatibility</a></li>
<li class="chapter" data-level="8.8" data-path="advanced-topics.html"><a href="advanced-topics.html#unit-tests"><i class="fa fa-check"></i><b>8.8</b> Unit Tests</a></li>
<li class="chapter" data-level="8.9" data-path="advanced-topics.html"><a href="advanced-topics.html#performances"><i class="fa fa-check"></i><b>8.9</b> Performances</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="crosstalk.html"><a href="crosstalk.html"><i class="fa fa-check"></i><b>9</b> Crosstalk</a>
<ul>
<li class="chapter" data-level="9.1" data-path="crosstalk.html"><a href="crosstalk.html#crosstalk-example"><i class="fa fa-check"></i><b>9.1</b> Crosstalk example</a></li>
<li class="chapter" data-level="9.2" data-path="crosstalk.html"><a href="crosstalk.html#crosstalk-candidates"><i class="fa fa-check"></i><b>9.2</b> Crosstalk candidates</a></li>
<li class="chapter" data-level="9.3" data-path="crosstalk.html"><a href="crosstalk.html#crosstalk-with-gio"><i class="fa fa-check"></i><b>9.3</b> Crosstalk with gio</a></li>
<li class="chapter" data-level="9.4" data-path="crosstalk.html"><a href="crosstalk.html#use-it-in-shiny"><i class="fa fa-check"></i><b>9.4</b> Use it in Shiny</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="working-with-shiny.html"><a href="working-with-shiny.html"><i class="fa fa-check"></i><b>10</b> Working with Shiny</a>
<ul>
<li class="chapter" data-level="10.1" data-path="working-with-shiny.html"><a href="working-with-shiny.html#javascript-to-r"><i class="fa fa-check"></i><b>10.1</b> JavaScript to R</a></li>
<li class="chapter" data-level="10.2" data-path="working-with-shiny.html"><a href="working-with-shiny.html#input-handler"><i class="fa fa-check"></i><b>10.2</b> Input Handler</a></li>
<li class="chapter" data-level="10.3" data-path="working-with-shiny.html"><a href="working-with-shiny.html#r-to-javascript"><i class="fa fa-check"></i><b>10.3</b> R to JavaScript</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="working-with-shiny.html"><a href="working-with-shiny.html#send-data"><i class="fa fa-check"></i><b>10.3.1</b> Send Data</a></li>
<li class="chapter" data-level="10.3.2" data-path="working-with-shiny.html"><a href="working-with-shiny.html#retrieve-widget-instance"><i class="fa fa-check"></i><b>10.3.2</b> Retrieve Widget Instance</a></li>
<li class="chapter" data-level="10.3.3" data-path="working-with-shiny.html"><a href="working-with-shiny.html#handle-data"><i class="fa fa-check"></i><b>10.3.3</b> Handle Data</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="working-with-shiny.html"><a href="working-with-shiny.html#proxy-function"><i class="fa fa-check"></i><b>10.4</b> Proxy Function</a></li>
<li class="chapter" data-level="10.5" data-path="working-with-shiny.html"><a href="working-with-shiny.html#clear-data"><i class="fa fa-check"></i><b>10.5</b> Clear Data</a></li>
<li class="chapter" data-level="10.6" data-path="working-with-shiny.html"><a href="working-with-shiny.html#update"><i class="fa fa-check"></i><b>10.6</b> Update</a></li>
</ul></li>
<li class="part"><span><b>III Web Development with Shiny</b></span></li>
<li class="chapter" data-level="11" data-path="discover.html"><a href="discover.html"><i class="fa fa-check"></i><b>11</b> Discover</a>
<ul>
<li class="chapter" data-level="11.1" data-path="discover.html"><a href="discover.html#static-files"><i class="fa fa-check"></i><b>11.1</b> Static Files</a></li>
<li class="chapter" data-level="11.2" data-path="discover.html"><a href="discover.html#example---alerts"><i class="fa fa-check"></i><b>11.2</b> Example - Alerts</a></li>
<li class="chapter" data-level="11.3" data-path="discover.html"><a href="discover.html#from-r-to-javascript"><i class="fa fa-check"></i><b>11.3</b> From R to JavaScript</a></li>
<li class="chapter" data-level="11.4" data-path="discover.html"><a href="discover.html#from-javascript-to-r"><i class="fa fa-check"></i><b>11.4</b> From JavaScript to R</a></li>
<li class="chapter" data-level="11.5" data-path="discover.html"><a href="discover.html#deserialise"><i class="fa fa-check"></i><b>11.5</b> Deserialise</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="a-complete-integration.html"><a href="a-complete-integration.html"><i class="fa fa-check"></i><b>12</b> A Complete Integration</a>
<ul>
<li class="chapter" data-level="12.1" data-path="a-complete-integration.html"><a href="a-complete-integration.html#serialisation"><i class="fa fa-check"></i><b>12.1</b> Serialisation</a></li>
<li class="chapter" data-level="12.2" data-path="a-complete-integration.html"><a href="a-complete-integration.html#events-callbacks"><i class="fa fa-check"></i><b>12.2</b> Events &amp; Callbacks</a></li>
<li class="chapter" data-level="12.3" data-path="a-complete-integration.html"><a href="a-complete-integration.html#as-a-package"><i class="fa fa-check"></i><b>12.3</b> As a Package</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i><b>12.3.1</b> Dependencies</a></li>
<li class="chapter" data-level="12.3.2" data-path="prerequisites.html"><a href="prerequisites.html#r-code"><i class="fa fa-check"></i><b>12.3.2</b> R Code</a></li>
<li class="chapter" data-level="12.3.3" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i><b>12.3.3</b> JavaScript Code</a></li>
<li class="chapter" data-level="12.3.4" data-path="working-with-shiny.html"><a href="working-with-shiny.html#input-handler"><i class="fa fa-check"></i><b>12.3.4</b> Input Handler</a></li>
<li class="chapter" data-level="12.3.5" data-path="a-complete-integration.html"><a href="a-complete-integration.html#wrapping-up"><i class="fa fa-check"></i><b>12.3.5</b> Wrapping up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tips-tricks.html"><a href="tips-tricks.html"><i class="fa fa-check"></i><b>13</b> Tips &amp; Tricks</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tips-tricks.html"><a href="tips-tricks.html#shiny-events"><i class="fa fa-check"></i><b>13.1</b> Shiny Events</a></li>
<li class="chapter" data-level="13.2" data-path="tips-tricks.html"><a href="tips-tricks.html#table-buttons"><i class="fa fa-check"></i><b>13.2</b> Table Buttons</a></li>
<li class="chapter" data-level="13.3" data-path="tips-tricks.html"><a href="tips-tricks.html#jquery---toggle"><i class="fa fa-check"></i><b>13.3</b> jQuery - Toggle</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="custom-outputs.html"><a href="custom-outputs.html"><i class="fa fa-check"></i><b>14</b> Custom Outputs</a>
<ul>
<li class="chapter" data-level="14.1" data-path="custom-outputs.html"><a href="custom-outputs.html#inner-workings"><i class="fa fa-check"></i><b>14.1</b> Inner-workings</a></li>
<li class="chapter" data-level="14.2" data-path="custom-outputs.html"><a href="custom-outputs.html#discover-lena.js"><i class="fa fa-check"></i><b>14.2</b> Discover Lena.js</a></li>
<li class="chapter" data-level="14.3" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i><b>14.3</b> Setup</a></li>
<li class="chapter" data-level="14.4" data-path="custom-outputs.html"><a href="custom-outputs.html#output"><i class="fa fa-check"></i><b>14.4</b> Output</a></li>
<li class="chapter" data-level="14.5" data-path="custom-outputs.html"><a href="custom-outputs.html#render"><i class="fa fa-check"></i><b>14.5</b> Render</a></li>
<li class="chapter" data-level="14.6" data-path="custom-outputs.html"><a href="custom-outputs.html#javascript-binding"><i class="fa fa-check"></i><b>14.6</b> JavaScript Binding</a></li>
<li class="chapter" data-level="14.7" data-path="custom-outputs.html"><a href="custom-outputs.html#test"><i class="fa fa-check"></i><b>14.7</b> Test</a></li>
</ul></li>
<li class="part"><span><b>IV JavaScript for Computations</b></span></li>
<li class="chapter" data-level="15" data-path="the-v8-engine.html"><a href="the-v8-engine.html"><i class="fa fa-check"></i><b>15</b> The V8 Engine</a>
<ul>
<li class="chapter" data-level="15.1" data-path="the-v8-engine.html"><a href="the-v8-engine.html#installation"><i class="fa fa-check"></i><b>15.1</b> Installation</a></li>
<li class="chapter" data-level="15.2" data-path="the-v8-engine.html"><a href="the-v8-engine.html#basics"><i class="fa fa-check"></i><b>15.2</b> Basics</a></li>
<li class="chapter" data-level="15.3" data-path="the-v8-engine.html"><a href="the-v8-engine.html#external-libraries"><i class="fa fa-check"></i><b>15.3</b> External Libraries</a></li>
<li class="chapter" data-level="15.4" data-path="the-v8-engine.html"><a href="the-v8-engine.html#with-npm"><i class="fa fa-check"></i><b>15.4</b> With Npm</a></li>
<li class="chapter" data-level="15.5" data-path="the-v8-engine.html"><a href="the-v8-engine.html#use-in-packages"><i class="fa fa-check"></i><b>15.5</b> Use in Packages</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="node.html"><a href="node.html"><i class="fa fa-check"></i><b>16</b> Node.js with Bubble</a>
<ul>
<li class="chapter" data-level="16.1" data-path="the-v8-engine.html"><a href="the-v8-engine.html#basics"><i class="fa fa-check"></i><b>16.1</b> Basics</a></li>
<li class="chapter" data-level="16.2" data-path="node.html"><a href="node.html#r-markdown-engine"><i class="fa fa-check"></i><b>16.2</b> R Markdown Engine</a></li>
<li class="chapter" data-level="16.3" data-path="node.html"><a href="node.html#npm"><i class="fa fa-check"></i><b>16.3</b> Npm</a></li>
</ul></li>
<li class="part"><span><b>V Examples</b></span></li>
<li class="chapter" data-level="17" data-path="ploty.html"><a href="ploty.html"><i class="fa fa-check"></i><b>17</b> Ploty</a>
<ul>
<li class="chapter" data-level="17.1" data-path="discover.html"><a href="discover.html#discover"><i class="fa fa-check"></i><b>17.1</b> Discover</a></li>
<li class="chapter" data-level="17.2" data-path="the-v8-engine.html"><a href="the-v8-engine.html#basics"><i class="fa fa-check"></i><b>17.2</b> Basics</a></li>
<li class="chapter" data-level="17.3" data-path="working-with-shiny.html"><a href="working-with-shiny.html#javascript-to-r"><i class="fa fa-check"></i><b>17.3</b> JavaScript to R</a></li>
<li class="chapter" data-level="17.4" data-path="working-with-shiny.html"><a href="working-with-shiny.html#r-to-javascript"><i class="fa fa-check"></i><b>17.4</b> R to JavaScript</a></li>
<li class="chapter" data-level="17.5" data-path="ploty.html"><a href="ploty.html#size-resize"><i class="fa fa-check"></i><b>17.5</b> Size &amp; Resize</a></li>
<li class="chapter" data-level="17.6" data-path="ploty.html"><a href="ploty.html#performance-security"><i class="fa fa-check"></i><b>17.6</b> Performance &amp; Security</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="image-classifier.html"><a href="image-classifier.html"><i class="fa fa-check"></i><b>18</b> Image Classifier</a>
<ul>
<li class="chapter" data-level="18.1" data-path="discover.html"><a href="discover.html#discover"><i class="fa fa-check"></i><b>18.1</b> Discover</a></li>
<li class="chapter" data-level="18.2" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i><b>18.2</b> Setup</a></li>
<li class="chapter" data-level="18.3" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>18.3</b> JavaScript</a></li>
<li class="chapter" data-level="18.4" data-path="working-with-shiny.html"><a href="working-with-shiny.html#input-handler"><i class="fa fa-check"></i><b>18.4</b> Input Handler</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="progress-bar.html"><a href="progress-bar.html"><i class="fa fa-check"></i><b>19</b> Progress Bar</a>
<ul>
<li class="chapter" data-level="19.1" data-path="prerequisites.html"><a href="prerequisites.html#r-code"><i class="fa fa-check"></i><b>19.1</b> R code</a></li>
<li class="chapter" data-level="19.2" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i><b>19.2</b> JavaScript code</a></li>
<li class="chapter" data-level="19.3" data-path="progress-bar.html"><a href="progress-bar.html#events"><i class="fa fa-check"></i><b>19.3</b> Events</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>20</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="20.1" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#dependency"><i class="fa fa-check"></i><b>20.1</b> Dependency</a></li>
<li class="chapter" data-level="20.2" data-path="machine-learning.html"><a href="machine-learning.html#simple-regression"><i class="fa fa-check"></i><b>20.2</b> Simple Regression</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="cookies.html"><a href="cookies.html"><i class="fa fa-check"></i><b>21</b> Cookies</a>
<ul>
<li class="chapter" data-level="21.1" data-path="cookies.html"><a href="cookies.html#discover-js-cookie"><i class="fa fa-check"></i><b>21.1</b> Discover js-cookie</a></li>
<li class="chapter" data-level="21.2" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i><b>21.2</b> Setup</a></li>
<li class="chapter" data-level="21.3" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>21.3</b> JavaScript</a></li>
<li class="chapter" data-level="21.4" data-path="prerequisites.html"><a href="prerequisites.html#r-code"><i class="fa fa-check"></i><b>21.4</b> R Code</a></li>
</ul></li>
<li class="part"><span><b>VI Closing Remarks</b></span></li>
<li class="chapter" data-level="22" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>22</b> Conclusion</a>
<ul>
<li class="chapter" data-level="22.1" data-path="advanced-topics.html"><a href="advanced-topics.html#performances"><i class="fa fa-check"></i><b>22.1</b> Performances</a></li>
<li class="chapter" data-level="22.2" data-path="conclusion.html"><a href="conclusion.html#road-ahead"><i class="fa fa-check"></i><b>22.2</b> Road ahead</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="conclusion.html"><a href="conclusion.html#computation"><i class="fa fa-check"></i><b>22.2.1</b> Computation</a></li>
<li class="chapter" data-level="22.2.2" data-path="introduction.html"><a href="introduction.html#shiny"><i class="fa fa-check"></i><b>22.2.2</b> Shiny</a></li>
<li class="chapter" data-level="22.2.3" data-path="introduction.html"><a href="introduction.html#htmlwidgets"><i class="fa fa-check"></i><b>22.2.3</b> htmlwidgets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">JavaScript for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="crosstalk" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> Crosstalk</h1>
<p>Crosstalk<span class="citation">(Cheng <a href="#ref-R-crosstalk" role="doc-biblioref">2020</a>)</span> is fantastic add-on for htmlwidgets that implements cross-widget interactions, namely selection and filtering. This in effect allows the selection or filtering of data points in one widget is mirrored in another which is enabled by creating “shared datasets”.</p>
<p>Crosstalk provides a straightforward interface to the users and instead requires effort from the developers for their widgets to support the shared datasets.</p>
<div id="crosstalk-example" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Crosstalk example</h2>
<p>Both the plotly and DT packages support crosstalk, we can thus produce a scatter plot with the former and a table with the latter so that selection of data in one widget is reflected in the other.</p>
<p>The shared dataset is created with the <code>SharedData</code> R6 class, this dataset is then used as one would use a standard dataframe in plotly and DT. The <code>bscols</code> function is just a helper to create columns from html elements (using bootstrap). It’s ideal for examples but one should not have to use it in R markdown or Shiny—crosstalk will work without <code>bscols</code>.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="crosstalk.html#cb168-1"></a><span class="kw">library</span>(DT)</span>
<span id="cb168-2"><a href="crosstalk.html#cb168-2"></a><span class="kw">library</span>(plotly)</span>
<span id="cb168-3"><a href="crosstalk.html#cb168-3"></a><span class="kw">library</span>(crosstalk)</span>
<span id="cb168-4"><a href="crosstalk.html#cb168-4"></a></span>
<span id="cb168-5"><a href="crosstalk.html#cb168-5"></a>shared &lt;-<span class="st"> </span>SharedData<span class="op">$</span><span class="kw">new</span>(cars)</span>
<span id="cb168-6"><a href="crosstalk.html#cb168-6"></a></span>
<span id="cb168-7"><a href="crosstalk.html#cb168-7"></a><span class="kw">bscols</span>(</span>
<span id="cb168-8"><a href="crosstalk.html#cb168-8"></a>  <span class="kw">plot_ly</span>(shared, <span class="dt">x =</span> <span class="op">~</span>speed, <span class="dt">y=</span><span class="op">~</span>dist),</span>
<span id="cb168-9"><a href="crosstalk.html#cb168-9"></a>  <span class="kw">datatable</span>(shared, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>)</span>
<span id="cb168-10"><a href="crosstalk.html#cb168-10"></a>)</span></code></pre></div>
<div class="figure">
<img src="images/crosstalk.png" alt="" />
<p class="caption">Crosstalk Example</p>
</div>
<p>This hopefully demonstrates the ease with which users can make use of crosstalk.</p>
</div>
<div id="crosstalk-candidates" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Crosstalk candidates</h2>
<p>Crosstalk is will not work well with every widget and every dataset, in some cases it might not even be a good idea to support it.</p>
<p>Crosstalk works best on rectangular data: dataframes or objects that resemble dataframes. This is important as crosstalk will treat the data rowwise, where each row is an observation that is ultimately selected, or filtered.</p>
<div class="rmdnote">
<p>
The application of crosstalk to the gio package is instructive but limited and somewhat faulty.
</p>
</div>
</div>
<div id="crosstalk-with-gio" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Crosstalk with gio</h2>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="crosstalk.html#cb169-1"></a>gio &lt;-<span class="st"> </span><span class="cf">function</span>(data, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>, <span class="dt">elementId =</span> <span class="ot">NULL</span>) {</span>
<span id="cb169-2"><a href="crosstalk.html#cb169-2"></a></span>
<span id="cb169-3"><a href="crosstalk.html#cb169-3"></a>  <span class="co"># defaults to NULL</span></span>
<span id="cb169-4"><a href="crosstalk.html#cb169-4"></a>  key &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb169-5"><a href="crosstalk.html#cb169-5"></a>  group &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb169-6"><a href="crosstalk.html#cb169-6"></a></span>
<span id="cb169-7"><a href="crosstalk.html#cb169-7"></a>  <span class="cf">if</span> (<span class="kw">is.SharedData</span>(data)) {</span>
<span id="cb169-8"><a href="crosstalk.html#cb169-8"></a>    key &lt;-<span class="st"> </span>data<span class="op">$</span><span class="kw">key</span>()</span>
<span id="cb169-9"><a href="crosstalk.html#cb169-9"></a>    group &lt;-<span class="st"> </span>data<span class="op">$</span><span class="kw">groupName</span>()</span>
<span id="cb169-10"><a href="crosstalk.html#cb169-10"></a>    data &lt;-<span class="st"> </span>data<span class="op">$</span><span class="kw">origData</span>()</span>
<span id="cb169-11"><a href="crosstalk.html#cb169-11"></a>  }</span>
<span id="cb169-12"><a href="crosstalk.html#cb169-12"></a></span>
<span id="cb169-13"><a href="crosstalk.html#cb169-13"></a>  <span class="co"># forward options using x</span></span>
<span id="cb169-14"><a href="crosstalk.html#cb169-14"></a>  x =<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb169-15"><a href="crosstalk.html#cb169-15"></a>    <span class="dt">data =</span> data,</span>
<span id="cb169-16"><a href="crosstalk.html#cb169-16"></a>    <span class="dt">style =</span> <span class="st">&quot;default&quot;</span>,</span>
<span id="cb169-17"><a href="crosstalk.html#cb169-17"></a>    <span class="dt">crosstalk =</span> <span class="kw">list</span>(</span>
<span id="cb169-18"><a href="crosstalk.html#cb169-18"></a>      <span class="dt">key =</span> key,</span>
<span id="cb169-19"><a href="crosstalk.html#cb169-19"></a>      <span class="dt">group =</span> group</span>
<span id="cb169-20"><a href="crosstalk.html#cb169-20"></a>    )</span>
<span id="cb169-21"><a href="crosstalk.html#cb169-21"></a>  )</span>
<span id="cb169-22"><a href="crosstalk.html#cb169-22"></a></span>
<span id="cb169-23"><a href="crosstalk.html#cb169-23"></a>  <span class="kw">attr</span>(x, <span class="st">&#39;TOJSON_ARGS&#39;</span>) &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">dataframe =</span> <span class="st">&quot;rows&quot;</span>)</span>
<span id="cb169-24"><a href="crosstalk.html#cb169-24"></a></span>
<span id="cb169-25"><a href="crosstalk.html#cb169-25"></a>  <span class="co"># create widget</span></span>
<span id="cb169-26"><a href="crosstalk.html#cb169-26"></a>  htmlwidgets<span class="op">::</span><span class="kw">createWidget</span>(</span>
<span id="cb169-27"><a href="crosstalk.html#cb169-27"></a>    <span class="dt">name =</span> <span class="st">&#39;gio&#39;</span>,</span>
<span id="cb169-28"><a href="crosstalk.html#cb169-28"></a>    x,</span>
<span id="cb169-29"><a href="crosstalk.html#cb169-29"></a>    <span class="dt">width =</span> width,</span>
<span id="cb169-30"><a href="crosstalk.html#cb169-30"></a>    <span class="dt">height =</span> height,</span>
<span id="cb169-31"><a href="crosstalk.html#cb169-31"></a>    <span class="dt">package =</span> <span class="st">&#39;gio&#39;</span>,</span>
<span id="cb169-32"><a href="crosstalk.html#cb169-32"></a>    <span class="dt">elementId =</span> elementId,</span>
<span id="cb169-33"><a href="crosstalk.html#cb169-33"></a>    <span class="dt">sizingPolicy =</span> htmlwidgets<span class="op">::</span><span class="kw">sizingPolicy</span>(</span>
<span id="cb169-34"><a href="crosstalk.html#cb169-34"></a>      <span class="dt">padding =</span> <span class="dv">0</span>,</span>
<span id="cb169-35"><a href="crosstalk.html#cb169-35"></a>      <span class="dt">browser.fill =</span> <span class="ot">TRUE</span>,</span>
<span id="cb169-36"><a href="crosstalk.html#cb169-36"></a>      <span class="dt">defaultWidth =</span> <span class="st">&quot;100%&quot;</span></span>
<span id="cb169-37"><a href="crosstalk.html#cb169-37"></a>    ),</span>
<span id="cb169-38"><a href="crosstalk.html#cb169-38"></a>    <span class="dt">preRenderHook =</span> render_gio</span>
<span id="cb169-39"><a href="crosstalk.html#cb169-39"></a>  )</span>
<span id="cb169-40"><a href="crosstalk.html#cb169-40"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb170"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb170-1"><a href="crosstalk.html#cb170-1"></a><span class="va">HTMLWidgets</span>.<span class="at">widget</span>(<span class="op">{</span></span>
<span id="cb170-2"><a href="crosstalk.html#cb170-2"></a></span>
<span id="cb170-3"><a href="crosstalk.html#cb170-3"></a>  <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;gio&#39;</span><span class="op">,</span></span>
<span id="cb170-4"><a href="crosstalk.html#cb170-4"></a></span>
<span id="cb170-5"><a href="crosstalk.html#cb170-5"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;output&#39;</span><span class="op">,</span></span>
<span id="cb170-6"><a href="crosstalk.html#cb170-6"></a></span>
<span id="cb170-7"><a href="crosstalk.html#cb170-7"></a>  <span class="dt">factory</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> width<span class="op">,</span> height) <span class="op">{</span></span>
<span id="cb170-8"><a href="crosstalk.html#cb170-8"></a></span>
<span id="cb170-9"><a href="crosstalk.html#cb170-9"></a>    <span class="co">// </span><span class="al">TODO</span><span class="co">: define shared variables for this instance</span></span>
<span id="cb170-10"><a href="crosstalk.html#cb170-10"></a>    <span class="kw">var</span> controller<span class="op">;</span></span>
<span id="cb170-11"><a href="crosstalk.html#cb170-11"></a>    <span class="kw">var</span> sel_handle <span class="op">=</span> <span class="kw">new</span> <span class="va">crosstalk</span>.<span class="at">SelectionHandle</span>()<span class="op">;</span></span>
<span id="cb170-12"><a href="crosstalk.html#cb170-12"></a></span>
<span id="cb170-13"><a href="crosstalk.html#cb170-13"></a>    <span class="va">sel_handle</span>.<span class="at">on</span>(<span class="st">&quot;change&quot;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></span>
<span id="cb170-14"><a href="crosstalk.html#cb170-14"></a>      <span class="va">console</span>.<span class="at">log</span>(e)<span class="op">;</span></span>
<span id="cb170-15"><a href="crosstalk.html#cb170-15"></a>      <span class="cf">if</span> (<span class="va">e</span>.<span class="at">sender</span> <span class="op">!==</span> sel_handle) <span class="op">{</span></span>
<span id="cb170-16"><a href="crosstalk.html#cb170-16"></a>        <span class="co">//controller.switchCountry(e.value);</span></span>
<span id="cb170-17"><a href="crosstalk.html#cb170-17"></a>      <span class="op">}</span></span>
<span id="cb170-18"><a href="crosstalk.html#cb170-18"></a>      <span class="va">controller</span>.<span class="at">switchCountry</span>(<span class="va">e</span>.<span class="at">value</span>)<span class="op">;</span></span>
<span id="cb170-19"><a href="crosstalk.html#cb170-19"></a>    <span class="op">}</span>)<span class="op">;</span></span>
<span id="cb170-20"><a href="crosstalk.html#cb170-20"></a></span>
<span id="cb170-21"><a href="crosstalk.html#cb170-21"></a>    <span class="cf">return</span> <span class="op">{</span></span>
<span id="cb170-22"><a href="crosstalk.html#cb170-22"></a></span>
<span id="cb170-23"><a href="crosstalk.html#cb170-23"></a>      <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(x) <span class="op">{</span></span>
<span id="cb170-24"><a href="crosstalk.html#cb170-24"></a></span>
<span id="cb170-25"><a href="crosstalk.html#cb170-25"></a>        <span class="va">el</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb170-26"><a href="crosstalk.html#cb170-26"></a>        controller <span class="op">=</span> <span class="kw">new</span> <span class="va">GIO</span>.<span class="at">Controller</span>(el)<span class="op">;</span></span>
<span id="cb170-27"><a href="crosstalk.html#cb170-27"></a></span>
<span id="cb170-28"><a href="crosstalk.html#cb170-28"></a>        <span class="co">// group</span></span>
<span id="cb170-29"><a href="crosstalk.html#cb170-29"></a>        <span class="va">sel_handle</span>.<span class="at">setGroup</span>(<span class="va">x</span>.<span class="va">crosstalk</span>.<span class="at">group</span>)<span class="op">;</span></span>
<span id="cb170-30"><a href="crosstalk.html#cb170-30"></a>        </span>
<span id="cb170-31"><a href="crosstalk.html#cb170-31"></a>        <span class="co">// add data</span></span>
<span id="cb170-32"><a href="crosstalk.html#cb170-32"></a>        <span class="va">controller</span>.<span class="at">addData</span>(<span class="va">x</span>.<span class="at">data</span>)<span class="op">;</span></span>
<span id="cb170-33"><a href="crosstalk.html#cb170-33"></a></span>
<span id="cb170-34"><a href="crosstalk.html#cb170-34"></a>        <span class="va">controller</span>.<span class="at">setStyle</span>(<span class="va">x</span>.<span class="at">style</span>)<span class="op">;</span></span>
<span id="cb170-35"><a href="crosstalk.html#cb170-35"></a></span>
<span id="cb170-36"><a href="crosstalk.html#cb170-36"></a>        <span class="co">// callback</span></span>
<span id="cb170-37"><a href="crosstalk.html#cb170-37"></a>        <span class="va">controller</span>.<span class="at">onCountryPicked</span>( callback )<span class="op">;</span></span>
<span id="cb170-38"><a href="crosstalk.html#cb170-38"></a></span>
<span id="cb170-39"><a href="crosstalk.html#cb170-39"></a>        <span class="kw">function</span> <span class="at">callback</span> (selectedCountry<span class="op">,</span> relatedCountries) <span class="op">{</span></span>
<span id="cb170-40"><a href="crosstalk.html#cb170-40"></a>          <span class="va">console</span>.<span class="at">log</span>(selectedCountry)<span class="op">;</span></span>
<span id="cb170-41"><a href="crosstalk.html#cb170-41"></a>          <span class="va">Shiny</span>.<span class="at">setInputValue</span>(<span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;_selected&#39;</span><span class="op">,</span> selectedCountry)<span class="op">;</span></span>
<span id="cb170-42"><a href="crosstalk.html#cb170-42"></a>          <span class="va">Shiny</span>.<span class="at">setInputValue</span>(<span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;_related:gio.related.countries&#39;</span><span class="op">,</span> relatedCountries)<span class="op">;</span></span>
<span id="cb170-43"><a href="crosstalk.html#cb170-43"></a>        <span class="op">}</span></span>
<span id="cb170-44"><a href="crosstalk.html#cb170-44"></a></span>
<span id="cb170-45"><a href="crosstalk.html#cb170-45"></a>        <span class="co">// use stats</span></span>
<span id="cb170-46"><a href="crosstalk.html#cb170-46"></a>        <span class="cf">if</span>(<span class="va">x</span>.<span class="at">stats</span>)</span>
<span id="cb170-47"><a href="crosstalk.html#cb170-47"></a>          <span class="va">controller</span>.<span class="at">enableStats</span>()<span class="op">;</span></span>
<span id="cb170-48"><a href="crosstalk.html#cb170-48"></a></span>
<span id="cb170-49"><a href="crosstalk.html#cb170-49"></a>        <span class="co">// render</span></span>
<span id="cb170-50"><a href="crosstalk.html#cb170-50"></a>        <span class="va">controller</span>.<span class="at">init</span>()<span class="op">;</span></span>
<span id="cb170-51"><a href="crosstalk.html#cb170-51"></a></span>
<span id="cb170-52"><a href="crosstalk.html#cb170-52"></a>      <span class="op">},</span></span>
<span id="cb170-53"><a href="crosstalk.html#cb170-53"></a></span>
<span id="cb170-54"><a href="crosstalk.html#cb170-54"></a>      <span class="dt">resize</span><span class="op">:</span> <span class="kw">function</span>(width<span class="op">,</span> height) <span class="op">{</span></span>
<span id="cb170-55"><a href="crosstalk.html#cb170-55"></a></span>
<span id="cb170-56"><a href="crosstalk.html#cb170-56"></a>        <span class="co">// </span><span class="al">TODO</span><span class="co">: code to re-render the widget with a new size</span></span>
<span id="cb170-57"><a href="crosstalk.html#cb170-57"></a>        <span class="va">controller</span>.<span class="at">resizeUpdate</span>()</span>
<span id="cb170-58"><a href="crosstalk.html#cb170-58"></a></span>
<span id="cb170-59"><a href="crosstalk.html#cb170-59"></a>      <span class="op">},</span></span>
<span id="cb170-60"><a href="crosstalk.html#cb170-60"></a></span>
<span id="cb170-61"><a href="crosstalk.html#cb170-61"></a>      <span class="dt">getGlobe</span><span class="op">:</span> <span class="kw">function</span>()<span class="op">{</span></span>
<span id="cb170-62"><a href="crosstalk.html#cb170-62"></a>        <span class="cf">return</span> controller<span class="op">;</span></span>
<span id="cb170-63"><a href="crosstalk.html#cb170-63"></a>      <span class="op">}</span></span>
<span id="cb170-64"><a href="crosstalk.html#cb170-64"></a></span>
<span id="cb170-65"><a href="crosstalk.html#cb170-65"></a>    <span class="op">};</span></span>
<span id="cb170-66"><a href="crosstalk.html#cb170-66"></a>  <span class="op">}</span></span>
<span id="cb170-67"><a href="crosstalk.html#cb170-67"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="crosstalk.html#cb171-1"></a><span class="kw">library</span>(DT)</span>
<span id="cb171-2"><a href="crosstalk.html#cb171-2"></a><span class="kw">library</span>(gio)</span>
<span id="cb171-3"><a href="crosstalk.html#cb171-3"></a><span class="kw">library</span>(crosstalk)</span>
<span id="cb171-4"><a href="crosstalk.html#cb171-4"></a></span>
<span id="cb171-5"><a href="crosstalk.html#cb171-5"></a>url &lt;-<span class="st"> </span><span class="kw">paste0</span>(</span>
<span id="cb171-6"><a href="crosstalk.html#cb171-6"></a>  <span class="st">&quot;https://raw.githubusercontent.com/JohnCoene/&quot;</span>,</span>
<span id="cb171-7"><a href="crosstalk.html#cb171-7"></a>  <span class="st">&quot;javascript-for-r/master/data/countries.json&quot;</span></span>
<span id="cb171-8"><a href="crosstalk.html#cb171-8"></a>)</span>
<span id="cb171-9"><a href="crosstalk.html#cb171-9"></a>arcs &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(url)</span>
<span id="cb171-10"><a href="crosstalk.html#cb171-10"></a></span>
<span id="cb171-11"><a href="crosstalk.html#cb171-11"></a><span class="co"># Wrap data frame in SharedData</span></span>
<span id="cb171-12"><a href="crosstalk.html#cb171-12"></a>sd &lt;-<span class="st"> </span>SharedData<span class="op">$</span><span class="kw">new</span>(arcs, <span class="dt">key =</span> arcs<span class="op">$</span>e)</span>
<span id="cb171-13"><a href="crosstalk.html#cb171-13"></a></span>
<span id="cb171-14"><a href="crosstalk.html#cb171-14"></a><span class="co"># Use SharedData like a dataframe with Crosstalk-enabled widgets</span></span>
<span id="cb171-15"><a href="crosstalk.html#cb171-15"></a><span class="kw">bscols</span>(</span>
<span id="cb171-16"><a href="crosstalk.html#cb171-16"></a>  <span class="kw">gio</span>(sd),</span>
<span id="cb171-17"><a href="crosstalk.html#cb171-17"></a>  <span class="kw">datatable</span>(sd, <span class="dt">width=</span><span class="st">&quot;100%&quot;</span>, <span class="dt">selection =</span> <span class="st">&quot;single&quot;</span>)</span>
<span id="cb171-18"><a href="crosstalk.html#cb171-18"></a>)</span></code></pre></div>
</div>
<div id="use-it-in-shiny" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Use it in Shiny</h2>
<div class="rmdnote">
<p>
Create the shared dataset the server function.
</p>
</div>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-crosstalk">
<p>Cheng, Joe. 2020. <em>Crosstalk: Inter-Widget Interactivity for Html Widgets</em>. <a href="https://CRAN.R-project.org/package=crosstalk">https://CRAN.R-project.org/package=crosstalk</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="advanced-topics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="working-with-shiny.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JohnCoene/javascript-for-r/edit/master/3-26-htmlwidgets-crosstalk.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
