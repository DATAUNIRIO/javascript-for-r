<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 18 Cookies | JavaScript for R</title>
  <meta name="description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 18 Cookies | JavaScript for R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="github-repo" content="JohnCoene/javascript-for-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 18 Cookies | JavaScript for R" />
  
  <meta name="twitter:description" content="Invite JavaScript into your Data Science workflow." />
  

<meta name="author" content="John Coene" />


<meta name="date" content="2020-07-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="machine-learning.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block/empty-anchor.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>
<script src="libs/core-js/shim.min.js"></script>
<script src="libs/react/react.min.js"></script>
<script src="libs/react/react-dom.min.js"></script>
<script src="libs/reactwidget/react-tools.js"></script>
<script src="libs/reactable-binding/reactable.js"></script>
<script src="libs/r2d3-render/r2d3-render.js"></script>
<script src="libs/webcomponents/webcomponents.js"></script>
<script src="libs/r2d3-binding/r2d3.js"></script>
<script src="libs/d3v5/d3.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">JavaScript for R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#premise"><i class="fa fa-check"></i>Premise</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
</ul></li>
<li class="part"><span><b>I Basics &amp; Roadmap</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#rationale"><i class="fa fa-check"></i>Rationale</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#basics"><i class="fa fa-check"></i>Basics</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#package-development"><i class="fa fa-check"></i>Package Development</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#json"><i class="fa fa-check"></i>JSON</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#javascript"><i class="fa fa-check"></i>JavaScript</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#methods"><i class="fa fa-check"></i>Methods</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#v8"><i class="fa fa-check"></i>V8</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#htmlwidgets"><i class="fa fa-check"></i>htmlwidgets</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#shiny"><i class="fa fa-check"></i>Shiny</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#bubble"><i class="fa fa-check"></i>bubble</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#methods-amiss"><i class="fa fa-check"></i>Methods Amiss</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#reactr"><i class="fa fa-check"></i>reactR</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#r2d3"><i class="fa fa-check"></i>r2d3</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II JavaScript for Computations</b></span></li>
<li class="chapter" data-level="2" data-path="the-v8-engine.html"><a href="the-v8-engine.html"><i class="fa fa-check"></i><b>2</b> The V8 Engine</a>
<ul>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#basics-1"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#external-libraries"><i class="fa fa-check"></i>External Libraries</a></li>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#with-npm"><i class="fa fa-check"></i>With Npm</a></li>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#use-in-packages"><i class="fa fa-check"></i>Use in Packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="node.html"><a href="node.html"><i class="fa fa-check"></i><b>3</b> Node.js with Bubble</a>
<ul>
<li class="chapter" data-level="" data-path="node.html"><a href="node.html#basics-2"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="node.html"><a href="node.html#r-markdown-engine"><i class="fa fa-check"></i>R Markdown Engine</a></li>
<li class="chapter" data-level="" data-path="node.html"><a href="node.html#npm"><i class="fa fa-check"></i>Npm</a></li>
</ul></li>
<li class="part"><span><b>III Web Development with Shiny</b></span></li>
<li class="chapter" data-level="4" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>4</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html#static-files"><i class="fa fa-check"></i>Static Files</a></li>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html#example---alerts"><i class="fa fa-check"></i>Example - Alerts</a></li>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html#from-r-to-javascript"><i class="fa fa-check"></i>From R to JavaScript</a></li>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html#from-javascript-to-r"><i class="fa fa-check"></i>From JavaScript to R</a></li>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html#deserialise"><i class="fa fa-check"></i>Deserialise</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="a-complete-integration.html"><a href="a-complete-integration.html"><i class="fa fa-check"></i><b>5</b> A Complete Integration</a>
<ul>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#serialisation"><i class="fa fa-check"></i>Serialisation</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#events-callbacks"><i class="fa fa-check"></i>Events &amp; Callbacks</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#as-a-package"><i class="fa fa-check"></i>As a Package</a>
<ul>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#dependencies"><i class="fa fa-check"></i>Dependencies</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#r-code"><i class="fa fa-check"></i>R Code</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#javascript-code"><i class="fa fa-check"></i>JavaScript Code</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#input-handler"><i class="fa fa-check"></i>Input Handler</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#wrapping-up"><i class="fa fa-check"></i>Wrapping up</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tips-tricks.html"><a href="tips-tricks.html"><i class="fa fa-check"></i><b>6</b> Tips &amp; Tricks</a>
<ul>
<li class="chapter" data-level="" data-path="tips-tricks.html"><a href="tips-tricks.html#events"><i class="fa fa-check"></i>Events</a></li>
<li class="chapter" data-level="" data-path="tips-tricks.html"><a href="tips-tricks.html#table-buttons"><i class="fa fa-check"></i>Table Buttons</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="custom-outputs.html"><a href="custom-outputs.html"><i class="fa fa-check"></i><b>7</b> Custom Outputs</a>
<ul>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#inner-workings"><i class="fa fa-check"></i>Inner-workings</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#discover-lena.js"><i class="fa fa-check"></i>Discover Lena.js</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#output"><i class="fa fa-check"></i>Output</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#render"><i class="fa fa-check"></i>Render</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#javascript-binding"><i class="fa fa-check"></i>JavaScript Binding</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#test"><i class="fa fa-check"></i>Test</a></li>
</ul></li>
<li class="part"><span><b>IV Data Visualisation</b></span></li>
<li class="chapter" data-level="8" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i><b>8</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html#candidate-libraries"><i class="fa fa-check"></i>Candidate Libraries</a>
<ul>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html#plotly"><i class="fa fa-check"></i>Plotly</a></li>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html#highchart.js"><i class="fa fa-check"></i>Highchart.js</a></li>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html#chart.js"><i class="fa fa-check"></i>Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html#how-it-works"><i class="fa fa-check"></i>How it works</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="your-first-widget.html"><a href="your-first-widget.html"><i class="fa fa-check"></i><b>9</b> Your First Widget</a>
<ul>
<li class="chapter" data-level="" data-path="your-first-widget.html"><a href="your-first-widget.html#the-scaffold"><i class="fa fa-check"></i>The Scaffold</a></li>
<li class="chapter" data-level="" data-path="your-first-widget.html"><a href="your-first-widget.html#the-output"><i class="fa fa-check"></i>The Output</a></li>
<li class="chapter" data-level="" data-path="your-first-widget.html"><a href="your-first-widget.html#javascript-side"><i class="fa fa-check"></i>JavaScript-side</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html"><i class="fa fa-check"></i><b>10</b> A Realistic Widget</a>
<ul>
<li class="chapter" data-level="" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#dependency"><i class="fa fa-check"></i>Dependency</a></li>
<li class="chapter" data-level="" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#javascript-1"><i class="fa fa-check"></i>JavaScript</a></li>
<li class="chapter" data-level="" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#html-element"><i class="fa fa-check"></i>HTML Element</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="the-full-monty.html"><a href="the-full-monty.html"><i class="fa fa-check"></i><b>11</b> The Full Monty</a>
<ul>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies-1"><i class="fa fa-check"></i>Dependencies</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#javascript-2"><i class="fa fa-check"></i>JavaScript</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#working-with-data"><i class="fa fa-check"></i>Working with Data</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#transforming-data"><i class="fa fa-check"></i>Transforming Data</a>
<ul>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#in-javascript"><i class="fa fa-check"></i>In JavaScript</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#in-r"><i class="fa fa-check"></i>In R</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#pros-cons"><i class="fa fa-check"></i>Pros &amp; Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#on-print"><i class="fa fa-check"></i>On Print</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>12</b> Advanced Topics</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#shared-variables"><i class="fa fa-check"></i>Shared Variables</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#sizing"><i class="fa fa-check"></i>Sizing</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#sizing-policy"><i class="fa fa-check"></i>Sizing Policy</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#resizing"><i class="fa fa-check"></i>Resizing</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#pre-render-hooks-security"><i class="fa fa-check"></i>Pre Render Hooks &amp; Security</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code-1"><i class="fa fa-check"></i>JavaScript Code</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#prepend-append-content"><i class="fa fa-check"></i>Prepend &amp; Append Content</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#dependencies-2"><i class="fa fa-check"></i>Dependencies</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#compatibility"><i class="fa fa-check"></i>Compatibility</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#unit-tests"><i class="fa fa-check"></i>Unit Tests</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="working-with-shiny.html"><a href="working-with-shiny.html"><i class="fa fa-check"></i><b>13</b> Working with Shiny</a>
<ul>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#javascript-to-r"><i class="fa fa-check"></i>JavaScript to R</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#input-handler-1"><i class="fa fa-check"></i>Input Handler</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#r-to-javascript"><i class="fa fa-check"></i>R to JavaScript</a>
<ul>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#send-data"><i class="fa fa-check"></i>Send Data</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#retrieve-widget-instance"><i class="fa fa-check"></i>Retrieve Widget Instance</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#handle-data"><i class="fa fa-check"></i>Handle Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#proxy-function"><i class="fa fa-check"></i>Proxy Function</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#clear-data"><i class="fa fa-check"></i>Clear Data</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#update"><i class="fa fa-check"></i>Update</a></li>
</ul></li>
<li class="part"><span><b>V Examples</b></span></li>
<li class="chapter" data-level="14" data-path="ploty.html"><a href="ploty.html"><i class="fa fa-check"></i><b>14</b> Ploty</a>
<ul>
<li class="chapter" data-level="" data-path="ploty.html"><a href="ploty.html#discover"><i class="fa fa-check"></i>Discover</a></li>
<li class="chapter" data-level="" data-path="ploty.html"><a href="ploty.html#basics-3"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="ploty.html"><a href="ploty.html#javascript-to-r-1"><i class="fa fa-check"></i>JavaScript to R</a></li>
<li class="chapter" data-level="" data-path="ploty.html"><a href="ploty.html#r-to-javascript-1"><i class="fa fa-check"></i>R to JavaScript</a></li>
<li class="chapter" data-level="" data-path="ploty.html"><a href="ploty.html#size-resize"><i class="fa fa-check"></i>Size &amp; Resize</a></li>
<li class="chapter" data-level="" data-path="ploty.html"><a href="ploty.html#performance-security"><i class="fa fa-check"></i>Performance &amp; Security</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="image-classifier.html"><a href="image-classifier.html"><i class="fa fa-check"></i><b>15</b> Image Classifier</a>
<ul>
<li class="chapter" data-level="" data-path="image-classifier.html"><a href="image-classifier.html#discover-1"><i class="fa fa-check"></i>Discover</a></li>
<li class="chapter" data-level="" data-path="image-classifier.html"><a href="image-classifier.html#setup-1"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="image-classifier.html"><a href="image-classifier.html#javascript-3"><i class="fa fa-check"></i>JavaScript</a></li>
<li class="chapter" data-level="" data-path="image-classifier.html"><a href="image-classifier.html#input-handler-2"><i class="fa fa-check"></i>Input Handler</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="progress-bar.html"><a href="progress-bar.html"><i class="fa fa-check"></i><b>16</b> Progress Bar</a>
<ul>
<li class="chapter" data-level="" data-path="progress-bar.html"><a href="progress-bar.html#r-code-1"><i class="fa fa-check"></i>R code</a></li>
<li class="chapter" data-level="" data-path="progress-bar.html"><a href="progress-bar.html#javascript-code-2"><i class="fa fa-check"></i>JavaScript code</a></li>
<li class="chapter" data-level="" data-path="progress-bar.html"><a href="progress-bar.html#events-1"><i class="fa fa-check"></i>Events</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>17</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="" data-path="machine-learning.html"><a href="machine-learning.html#dependency-1"><i class="fa fa-check"></i>Dependency</a></li>
<li class="chapter" data-level="" data-path="machine-learning.html"><a href="machine-learning.html#simple-regression"><i class="fa fa-check"></i>Simple Regression</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="cookies.html"><a href="cookies.html"><i class="fa fa-check"></i><b>18</b> Cookies</a>
<ul>
<li class="chapter" data-level="" data-path="cookies.html"><a href="cookies.html#discover-js-cookie"><i class="fa fa-check"></i>Discover js-cookie</a></li>
<li class="chapter" data-level="" data-path="cookies.html"><a href="cookies.html#setup-2"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="cookies.html"><a href="cookies.html#javascript-4"><i class="fa fa-check"></i>JavaScript</a></li>
<li class="chapter" data-level="" data-path="cookies.html"><a href="cookies.html#r-code-2"><i class="fa fa-check"></i>R Code</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">JavaScript for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cookies" class="section level1" number="18">
<h1><span class="header-section-number">Chapter 18</span> Cookies</h1>
<p>In this example we scout yet another great example of how JavaScript can enhance shiny applications. We use an HTTP cookie, a small piece of data sent from a website and stored on the user’s web browser, to track users returning to a shiny application.</p>
<p>The application will prompt the user to input their name, this will be stored in a cookie so that on their next visit they are welcomed to the app with a personalised message. Cookies are natively supported by web browsers and JavaScript, there is, however, a great library which eases greatly how those cookies are handled: <a href="https://github.com/js-cookie/js-cookie">js-cookie</a>.</p>
<div id="discover-js-cookie" class="section level2 unnumbered" number="">
<h2>Discover js-cookie</h2>
<p>The library is at its core very straightforward, it exports a <code>Cookie</code> object from which one can access the <code>set</code>, <code>get</code>, and <code>remove</code> methods. There is also the possibility to pass additional options when defining the cookie, such as how long it is valid for, but we won’t explore these here.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb404-1"><a href="cookies.html#cb404-1"></a><span class="co">// set a cookie</span></span>
<span id="cb404-2"><a href="cookies.html#cb404-2"></a>Cookies<span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;name&#39;</span><span class="op">,</span> <span class="st">&#39;value&#39;</span>)</span>
<span id="cb404-3"><a href="cookies.html#cb404-3"></a></span>
<span id="cb404-4"><a href="cookies.html#cb404-4"></a><span class="co">// get cookies</span></span>
<span id="cb404-5"><a href="cookies.html#cb404-5"></a>Cookies<span class="op">.</span><span class="fu">get</span>()<span class="op">;</span></span>
<span id="cb404-6"><a href="cookies.html#cb404-6"></a></span>
<span id="cb404-7"><a href="cookies.html#cb404-7"></a><span class="co">// remove a cookie</span></span>
<span id="cb404-8"><a href="cookies.html#cb404-8"></a>Cookies<span class="op">.</span><span class="fu">remove</span>(<span class="st">&#39;name&#39;</span>)<span class="op">;</span></span></code></pre></div>
</div>
<div id="setup-2" class="section level2 unnumbered" number="">
<h2>Setup</h2>
<p>Then again, it starts with the creation of a directory where we’ll place a JavaScript file containing the message handlers, we won’t download the dependency and use the CDN instead.</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="cookies.html#cb405-1"></a><span class="kw">dir.create</span>(<span class="st">&quot;www&quot;</span>)</span>
<span id="cb405-2"><a href="cookies.html#cb405-2"></a><span class="kw">file.create</span>(<span class="st">&quot;www/script.js&quot;</span>)</span></code></pre></div>
<p>We then lay down the skeleton of the application which features a text input to capture the name of the user, a button to save the cookie, another to remove it and finally a dynamic output that will display the personalised message.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="cookies.html#cb406-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb406-2"><a href="cookies.html#cb406-2"></a></span>
<span id="cb406-3"><a href="cookies.html#cb406-3"></a><span class="kw">addResourcePath</span>(<span class="st">&quot;www&quot;</span>, <span class="st">&quot;www&quot;</span>)</span>
<span id="cb406-4"><a href="cookies.html#cb406-4"></a></span>
<span id="cb406-5"><a href="cookies.html#cb406-5"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb406-6"><a href="cookies.html#cb406-6"></a>  tags<span class="op">$</span><span class="kw">head</span>(</span>
<span id="cb406-7"><a href="cookies.html#cb406-7"></a>    tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb406-8"><a href="cookies.html#cb406-8"></a>      <span class="dt">src =</span> <span class="st">&quot;https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js&quot;</span></span>
<span id="cb406-9"><a href="cookies.html#cb406-9"></a>    ),</span>
<span id="cb406-10"><a href="cookies.html#cb406-10"></a>    tags<span class="op">$</span><span class="kw">script</span>(<span class="dt">src =</span> <span class="st">&quot;www/script.js&quot;</span>)</span>
<span id="cb406-11"><a href="cookies.html#cb406-11"></a>  ),</span>
<span id="cb406-12"><a href="cookies.html#cb406-12"></a>  <span class="kw">textInput</span>(<span class="st">&quot;name_set&quot;</span>, <span class="st">&quot;What is your name?&quot;</span>),</span>
<span id="cb406-13"><a href="cookies.html#cb406-13"></a>  <span class="kw">actionButton</span>(<span class="st">&quot;save&quot;</span>, <span class="st">&quot;Save cookie&quot;</span>),</span>
<span id="cb406-14"><a href="cookies.html#cb406-14"></a>  <span class="kw">actionButton</span>(<span class="st">&quot;remove&quot;</span>, <span class="st">&quot;remove cookie&quot;</span>),</span>
<span id="cb406-15"><a href="cookies.html#cb406-15"></a>  <span class="kw">uiOutput</span>(<span class="st">&quot;name_get&quot;</span>)</span>
<span id="cb406-16"><a href="cookies.html#cb406-16"></a>)</span>
<span id="cb406-17"><a href="cookies.html#cb406-17"></a></span>
<span id="cb406-18"><a href="cookies.html#cb406-18"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){</span>
<span id="cb406-19"><a href="cookies.html#cb406-19"></a></span>
<span id="cb406-20"><a href="cookies.html#cb406-20"></a>}</span>
<span id="cb406-21"><a href="cookies.html#cb406-21"></a></span>
<span id="cb406-22"><a href="cookies.html#cb406-22"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
</div>
<div id="javascript-4" class="section level2 unnumbered" number="">
<h2>JavaScript</h2>
<p>First we define a JavaScript function that retrieves the cookies that it sets as <code>cookies</code> input. The reason we do so is simply because we will have to execute this in multiple places, this will become clearer in just a second.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb407-1"><a href="cookies.html#cb407-1"></a><span class="co">// script.js</span></span>
<span id="cb407-2"><a href="cookies.html#cb407-2"></a><span class="kw">function</span> <span class="fu">getCookies</span>(){</span>
<span id="cb407-3"><a href="cookies.html#cb407-3"></a>  <span class="kw">var</span> res <span class="op">=</span> Cookies<span class="op">.</span><span class="fu">get</span>()<span class="op">;</span></span>
<span id="cb407-4"><a href="cookies.html#cb407-4"></a>  Shiny<span class="op">.</span><span class="fu">setInputValue</span>(<span class="st">&#39;cookies&#39;</span><span class="op">,</span> res)<span class="op">;</span></span>
<span id="cb407-5"><a href="cookies.html#cb407-5"></a>}</span></code></pre></div>
<p>Then we define the message handlers, we define two distinct such handlers, one that sets the cookie and another that removes it. Note that both of then run the <code>getCookies</code> function defined previously. The reason this is done is that we need the input to be updated with the new values after it is set and after it is removed. Otherwise setting or removing the cookie will leave the actual input value untouched.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb408-1"><a href="cookies.html#cb408-1"></a><span class="co">// script.js</span></span>
<span id="cb408-2"><a href="cookies.html#cb408-2"></a>Shiny<span class="op">.</span><span class="fu">addCustomMessageHandler</span>(<span class="st">&#39;cookie-set&#39;</span><span class="op">,</span> <span class="kw">function</span>(msg){</span>
<span id="cb408-3"><a href="cookies.html#cb408-3"></a>  Cookies<span class="op">.</span><span class="fu">set</span>(msg<span class="op">.</span><span class="at">name</span><span class="op">,</span> msg<span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb408-4"><a href="cookies.html#cb408-4"></a>  getCookies()<span class="op">;</span></span>
<span id="cb408-5"><a href="cookies.html#cb408-5"></a>})</span>
<span id="cb408-6"><a href="cookies.html#cb408-6"></a></span>
<span id="cb408-7"><a href="cookies.html#cb408-7"></a>Shiny<span class="op">.</span><span class="fu">addCustomMessageHandler</span>(<span class="st">&#39;cookie-remove&#39;</span><span class="op">,</span> <span class="kw">function</span>(msg){</span>
<span id="cb408-8"><a href="cookies.html#cb408-8"></a>  Cookies<span class="op">.</span><span class="fu">remove</span>(msg<span class="op">.</span><span class="at">name</span>)<span class="op">;</span></span>
<span id="cb408-9"><a href="cookies.html#cb408-9"></a>  getCookies()<span class="op">;</span></span>
<span id="cb408-10"><a href="cookies.html#cb408-10"></a>})</span></code></pre></div>
<p>One more thing needs to be implemented JavaScript-side, the point of using the cookie is so that when users comes back to the shiny app, even days later, they do not need to re-enter their name. So when the app is launched the input value must be defined. There are probably a few ways to do so, below we set the input value when the shiny session connects which will occur when the app is fired up.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb409-1"><a href="cookies.html#cb409-1"></a><span class="co">// script.js</span></span>
<span id="cb409-2"><a href="cookies.html#cb409-2"></a>$(<span class="bu">document</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;shiny:connected&#39;</span><span class="op">,</span> <span class="kw">function</span>(ev){</span>
<span id="cb409-3"><a href="cookies.html#cb409-3"></a>  getCookies()<span class="op">;</span></span>
<span id="cb409-4"><a href="cookies.html#cb409-4"></a>})</span></code></pre></div>
</div>
<div id="r-code-2" class="section level2 unnumbered" number="">
<h2>R Code</h2>
<p>Then it’s a matter a completing the shiny server which was left empty. We add an <code>observeEvent</code> on the save button where we check that a name has actually been typed in the text box before saving the cookie. There is another similar observer on the remove button. The <code>renderUI</code> expression checks that the cookie has been set and displays a message accordingly.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="cookies.html#cb410-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb410-2"><a href="cookies.html#cb410-2"></a></span>
<span id="cb410-3"><a href="cookies.html#cb410-3"></a><span class="kw">addResourcePath</span>(<span class="st">&quot;www&quot;</span>, <span class="st">&quot;www&quot;</span>)</span>
<span id="cb410-4"><a href="cookies.html#cb410-4"></a></span>
<span id="cb410-5"><a href="cookies.html#cb410-5"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb410-6"><a href="cookies.html#cb410-6"></a>  tags<span class="op">$</span><span class="kw">head</span>(</span>
<span id="cb410-7"><a href="cookies.html#cb410-7"></a>    tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb410-8"><a href="cookies.html#cb410-8"></a>      <span class="dt">src =</span> <span class="st">&quot;https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js&quot;</span></span>
<span id="cb410-9"><a href="cookies.html#cb410-9"></a>    ),</span>
<span id="cb410-10"><a href="cookies.html#cb410-10"></a>    tags<span class="op">$</span><span class="kw">script</span>(<span class="dt">src =</span> <span class="st">&quot;www/script.js&quot;</span>)</span>
<span id="cb410-11"><a href="cookies.html#cb410-11"></a>  ),</span>
<span id="cb410-12"><a href="cookies.html#cb410-12"></a>  <span class="kw">textInput</span>(<span class="st">&quot;name_set&quot;</span>, <span class="st">&quot;What is your name?&quot;</span>),</span>
<span id="cb410-13"><a href="cookies.html#cb410-13"></a>  <span class="kw">actionButton</span>(<span class="st">&quot;save&quot;</span>, <span class="st">&quot;Save cookie&quot;</span>),</span>
<span id="cb410-14"><a href="cookies.html#cb410-14"></a>  <span class="kw">actionButton</span>(<span class="st">&quot;remove&quot;</span>, <span class="st">&quot;remove cookie&quot;</span>),</span>
<span id="cb410-15"><a href="cookies.html#cb410-15"></a>  <span class="kw">uiOutput</span>(<span class="st">&quot;name_get&quot;</span>)</span>
<span id="cb410-16"><a href="cookies.html#cb410-16"></a>)</span>
<span id="cb410-17"><a href="cookies.html#cb410-17"></a></span>
<span id="cb410-18"><a href="cookies.html#cb410-18"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){</span>
<span id="cb410-19"><a href="cookies.html#cb410-19"></a></span>
<span id="cb410-20"><a href="cookies.html#cb410-20"></a>  <span class="co"># save</span></span>
<span id="cb410-21"><a href="cookies.html#cb410-21"></a>  <span class="kw">observeEvent</span>(input<span class="op">$</span>save, {</span>
<span id="cb410-22"><a href="cookies.html#cb410-22"></a>    <span class="cf">if</span>(input<span class="op">$</span>name_set <span class="op">!=</span><span class="st"> &quot;&quot;</span>)</span>
<span id="cb410-23"><a href="cookies.html#cb410-23"></a>      session<span class="op">$</span><span class="kw">sendCustomMessage</span>(<span class="st">&quot;cookie-set&quot;</span>, <span class="kw">list</span>(<span class="dt">name =</span> <span class="st">&quot;name&quot;</span>, <span class="dt">value =</span> input<span class="op">$</span>name_set))</span>
<span id="cb410-24"><a href="cookies.html#cb410-24"></a>  })</span>
<span id="cb410-25"><a href="cookies.html#cb410-25"></a></span>
<span id="cb410-26"><a href="cookies.html#cb410-26"></a>  <span class="co"># delete</span></span>
<span id="cb410-27"><a href="cookies.html#cb410-27"></a>  <span class="kw">observeEvent</span>(input<span class="op">$</span>remove, {</span>
<span id="cb410-28"><a href="cookies.html#cb410-28"></a>    session<span class="op">$</span><span class="kw">sendCustomMessage</span>(<span class="st">&quot;cookie-remove&quot;</span>, <span class="kw">list</span>(<span class="dt">name =</span> <span class="st">&quot;name&quot;</span>))</span>
<span id="cb410-29"><a href="cookies.html#cb410-29"></a>  })</span>
<span id="cb410-30"><a href="cookies.html#cb410-30"></a></span>
<span id="cb410-31"><a href="cookies.html#cb410-31"></a>  <span class="co"># output if cookie is specified</span></span>
<span id="cb410-32"><a href="cookies.html#cb410-32"></a>  output<span class="op">$</span>name_get &lt;-<span class="st"> </span><span class="kw">renderUI</span>({</span>
<span id="cb410-33"><a href="cookies.html#cb410-33"></a>    <span class="cf">if</span>(<span class="op">!</span><span class="kw">is.null</span>(input<span class="op">$</span>cookies<span class="op">$</span>name))</span>
<span id="cb410-34"><a href="cookies.html#cb410-34"></a>      <span class="kw">h3</span>(<span class="st">&quot;Hello,&quot;</span>, input<span class="op">$</span>cookies<span class="op">$</span>name)</span>
<span id="cb410-35"><a href="cookies.html#cb410-35"></a>    <span class="cf">else</span></span>
<span id="cb410-36"><a href="cookies.html#cb410-36"></a>      <span class="kw">h3</span>(<span class="st">&quot;Who are you?&quot;</span>)</span>
<span id="cb410-37"><a href="cookies.html#cb410-37"></a>  })</span>
<span id="cb410-38"><a href="cookies.html#cb410-38"></a></span>
<span id="cb410-39"><a href="cookies.html#cb410-39"></a>}</span>
<span id="cb410-40"><a href="cookies.html#cb410-40"></a></span>
<span id="cb410-41"><a href="cookies.html#cb410-41"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
<div class="figure">
<img src="images/shiny-cookies.png" alt="" />
<p class="caption">Shiny cookies</p>
</div>
<p>Run the application and save your name. You can then refresh the application and the welcome message will display your name. You can even kill the server entirely and re-run the app, the welcome message will still display!</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="machine-learning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JohnCoene/javascript-for-r/edit/master/35-examples-cookies.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
