<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Prerequisites | JavaScript for R</title>
  <meta name="description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Prerequisites | JavaScript for R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="github-repo" content="JohnCoene/javascript-for-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Prerequisites | JavaScript for R" />
  
  <meta name="twitter:description" content="Invite JavaScript into your Data Science workflow." />
  

<meta name="author" content="John Coene" />


<meta name="date" content="2020-08-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="introduction-to-widgets.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block/empty-anchor.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>
<script src="libs/core-js/shim.min.js"></script>
<script src="libs/react/react.min.js"></script>
<script src="libs/react/react-dom.min.js"></script>
<script src="libs/reactwidget/react-tools.js"></script>
<script src="libs/reactable-binding/reactable.js"></script>
<script src="libs/r2d3-render/r2d3-render.js"></script>
<script src="libs/webcomponents/webcomponents.js"></script>
<script src="libs/r2d3-binding/r2d3.js"></script>
<script src="libs/d3v5/d3.min.js"></script>
<script src="libs/viz/viz.js"></script>
<link href="libs/DiagrammeR-styles/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">JavaScript for R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#premise"><i class="fa fa-check"></i>Premise</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
</ul></li>
<li class="part"><span><b>I Basics &amp; Roadmap</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#rationale"><i class="fa fa-check"></i><b>1.1</b> Rationale</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#methods"><i class="fa fa-check"></i><b>1.2</b> Methods</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#v8"><i class="fa fa-check"></i><b>1.2.1</b> V8</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#htmlwidgets"><i class="fa fa-check"></i><b>1.2.2</b> htmlwidgets</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction.html"><a href="introduction.html#shiny"><i class="fa fa-check"></i><b>1.2.3</b> Shiny</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction.html"><a href="introduction.html#bubble"><i class="fa fa-check"></i><b>1.2.4</b> bubble</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#methods-amiss"><i class="fa fa-check"></i><b>1.3</b> Methods Amiss</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#reactr"><i class="fa fa-check"></i><b>1.3.1</b> reactR</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#r2d3"><i class="fa fa-check"></i><b>1.3.2</b> r2d3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>2</b> Prerequisites</a>
<ul>
<li class="chapter" data-level="2.1" data-path="prerequisites.html"><a href="prerequisites.html#r-package-development"><i class="fa fa-check"></i><b>2.1</b> R Package Development</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="prerequisites.html"><a href="prerequisites.html#creating-a-package"><i class="fa fa-check"></i><b>2.1.1</b> Creating a Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="prerequisites.html"><a href="prerequisites.html#metadata"><i class="fa fa-check"></i><b>2.1.2</b> Metadata</a></li>
<li class="chapter" data-level="2.1.3" data-path="prerequisites.html"><a href="prerequisites.html#r-code"><i class="fa fa-check"></i><b>2.1.3</b> R code</a></li>
<li class="chapter" data-level="2.1.4" data-path="prerequisites.html"><a href="prerequisites.html#documentation"><i class="fa fa-check"></i><b>2.1.4</b> Documentation</a></li>
<li class="chapter" data-level="2.1.5" data-path="prerequisites.html"><a href="prerequisites.html#installed-files"><i class="fa fa-check"></i><b>2.1.5</b> Installed files</a></li>
<li class="chapter" data-level="2.1.6" data-path="prerequisites.html"><a href="prerequisites.html#build-load-and-install"><i class="fa fa-check"></i><b>2.1.6</b> Build, load, and install</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prerequisites.html"><a href="prerequisites.html#json"><i class="fa fa-check"></i><b>2.2</b> JSON</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="prerequisites.html"><a href="prerequisites.html#serialising"><i class="fa fa-check"></i><b>2.2.1</b> Serialising</a></li>
<li class="chapter" data-level="2.2.2" data-path="prerequisites.html"><a href="prerequisites.html#tabular-data"><i class="fa fa-check"></i><b>2.2.2</b> Tabular data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>2.3</b> JavaScript</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="prerequisites.html"><a href="prerequisites.html#developer-tools"><i class="fa fa-check"></i><b>2.3.1</b> Developer tools</a></li>
<li class="chapter" data-level="2.3.2" data-path="prerequisites.html"><a href="prerequisites.html#variable-declaration-and-scope"><i class="fa fa-check"></i><b>2.3.2</b> Variable declaration and scope</a></li>
<li class="chapter" data-level="2.3.3" data-path="prerequisites.html"><a href="prerequisites.html#document-object-model"><i class="fa fa-check"></i><b>2.3.3</b> Document object model</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Visualisation</b></span></li>
<li class="chapter" data-level="3" data-path="introduction-to-widgets.html"><a href="introduction-to-widgets.html"><i class="fa fa-check"></i><b>3</b> Introduction to widgets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-widgets.html"><a href="introduction-to-widgets.html#plotly-package"><i class="fa fa-check"></i><b>3.1</b> Plotly package</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-widgets.html"><a href="introduction-to-widgets.html#dt-package"><i class="fa fa-check"></i><b>3.2</b> DT package</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html"><i class="fa fa-check"></i><b>4</b> Basics of building widgets</a>
<ul>
<li class="chapter" data-level="4.1" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#candidate-libraries"><i class="fa fa-check"></i><b>4.1</b> Candidate Libraries</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#plotly"><i class="fa fa-check"></i><b>4.1.1</b> Plotly</a></li>
<li class="chapter" data-level="4.1.2" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#highchart.js"><i class="fa fa-check"></i><b>4.1.2</b> Highchart.js</a></li>
<li class="chapter" data-level="4.1.3" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#chart.js"><i class="fa fa-check"></i><b>4.1.3</b> Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#how-it-works"><i class="fa fa-check"></i><b>4.2</b> How it works</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="your-first-widget.html"><a href="your-first-widget.html"><i class="fa fa-check"></i><b>5</b> Your First Widget</a>
<ul>
<li class="chapter" data-level="5.1" data-path="your-first-widget.html"><a href="your-first-widget.html#the-scaffold"><i class="fa fa-check"></i><b>5.1</b> The Scaffold</a></li>
<li class="chapter" data-level="5.2" data-path="your-first-widget.html"><a href="your-first-widget.html#the-output"><i class="fa fa-check"></i><b>5.2</b> The Output</a></li>
<li class="chapter" data-level="5.3" data-path="your-first-widget.html"><a href="your-first-widget.html#javascript-side"><i class="fa fa-check"></i><b>5.3</b> JavaScript-side</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html"><i class="fa fa-check"></i><b>6</b> A Realistic Widget</a>
<ul>
<li class="chapter" data-level="6.1" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#dependency"><i class="fa fa-check"></i><b>6.1</b> Dependency</a></li>
<li class="chapter" data-level="6.2" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>6.2</b> JavaScript</a></li>
<li class="chapter" data-level="6.3" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#html-element"><i class="fa fa-check"></i><b>6.3</b> HTML Element</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="the-full-monty.html"><a href="the-full-monty.html"><i class="fa fa-check"></i><b>7</b> The Full Monty</a>
<ul>
<li class="chapter" data-level="7.1" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i><b>7.1</b> Dependencies</a></li>
<li class="chapter" data-level="7.2" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>7.2</b> JavaScript</a></li>
<li class="chapter" data-level="7.3" data-path="the-full-monty.html"><a href="the-full-monty.html#working-with-data"><i class="fa fa-check"></i><b>7.3</b> Working with Data</a></li>
<li class="chapter" data-level="7.4" data-path="the-full-monty.html"><a href="the-full-monty.html#transforming-data"><i class="fa fa-check"></i><b>7.4</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="the-full-monty.html"><a href="the-full-monty.html#in-javascript"><i class="fa fa-check"></i><b>7.4.1</b> In JavaScript</a></li>
<li class="chapter" data-level="7.4.2" data-path="the-full-monty.html"><a href="the-full-monty.html#in-r"><i class="fa fa-check"></i><b>7.4.2</b> In R</a></li>
<li class="chapter" data-level="7.4.3" data-path="the-full-monty.html"><a href="the-full-monty.html#pros-cons"><i class="fa fa-check"></i><b>7.4.3</b> Pros &amp; Cons</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="the-full-monty.html"><a href="the-full-monty.html#on-print"><i class="fa fa-check"></i><b>7.5</b> On Print</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>8</b> Advanced Topics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="advanced-topics.html"><a href="advanced-topics.html#shared-variables"><i class="fa fa-check"></i><b>8.1</b> Shared Variables</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="advanced-topics.html"><a href="advanced-topics.html#sizing"><i class="fa fa-check"></i><b>8.1.1</b> Sizing</a></li>
<li class="chapter" data-level="8.1.2" data-path="advanced-topics.html"><a href="advanced-topics.html#sizing-policy"><i class="fa fa-check"></i><b>8.1.2</b> Sizing Policy</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="advanced-topics.html"><a href="advanced-topics.html#resizing"><i class="fa fa-check"></i><b>8.2</b> Resizing</a></li>
<li class="chapter" data-level="8.3" data-path="advanced-topics.html"><a href="advanced-topics.html#pre-render-hooks-security"><i class="fa fa-check"></i><b>8.3</b> Pre Render Hooks &amp; Security</a></li>
<li class="chapter" data-level="8.4" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i><b>8.4</b> JavaScript Code</a></li>
<li class="chapter" data-level="8.5" data-path="advanced-topics.html"><a href="advanced-topics.html#prepend-append-content"><i class="fa fa-check"></i><b>8.5</b> Prepend &amp; Append Content</a></li>
<li class="chapter" data-level="8.6" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i><b>8.6</b> Dependencies</a></li>
<li class="chapter" data-level="8.7" data-path="advanced-topics.html"><a href="advanced-topics.html#compatibility"><i class="fa fa-check"></i><b>8.7</b> Compatibility</a></li>
<li class="chapter" data-level="8.8" data-path="advanced-topics.html"><a href="advanced-topics.html#unit-tests"><i class="fa fa-check"></i><b>8.8</b> Unit Tests</a></li>
<li class="chapter" data-level="8.9" data-path="advanced-topics.html"><a href="advanced-topics.html#performances"><i class="fa fa-check"></i><b>8.9</b> Performances</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="crosstalk.html"><a href="crosstalk.html"><i class="fa fa-check"></i><b>9</b> Crosstalk</a>
<ul>
<li class="chapter" data-level="9.1" data-path="crosstalk.html"><a href="crosstalk.html#crosstalk-example"><i class="fa fa-check"></i><b>9.1</b> Crosstalk example</a></li>
<li class="chapter" data-level="9.2" data-path="crosstalk.html"><a href="crosstalk.html#crosstalk-requirements"><i class="fa fa-check"></i><b>9.2</b> Crosstalk requirements</a></li>
<li class="chapter" data-level="9.3" data-path="basics-of-building-widgets.html"><a href="basics-of-building-widgets.html#how-it-works"><i class="fa fa-check"></i><b>9.3</b> How it works</a></li>
<li class="chapter" data-level="9.4" data-path="crosstalk.html"><a href="crosstalk.html#crosstalk-with-gio"><i class="fa fa-check"></i><b>9.4</b> Crosstalk with gio</a></li>
<li class="chapter" data-level="9.5" data-path="crosstalk.html"><a href="crosstalk.html#adapt-the-r-code"><i class="fa fa-check"></i><b>9.5</b> Adapt the R code</a></li>
<li class="chapter" data-level="9.6" data-path="crosstalk.html"><a href="crosstalk.html#change-the-javascript-code"><i class="fa fa-check"></i><b>9.6</b> Change the JavaScript code</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="crosstalk.html"><a href="crosstalk.html#send-selected-keys"><i class="fa fa-check"></i><b>9.6.1</b> Send selected keys</a></li>
<li class="chapter" data-level="9.6.2" data-path="crosstalk.html"><a href="crosstalk.html#set-selected-keys"><i class="fa fa-check"></i><b>9.6.2</b> Set selected keys</a></li>
<li class="chapter" data-level="9.6.3" data-path="crosstalk.html"><a href="crosstalk.html#using-crosstalk-with-gio"><i class="fa fa-check"></i><b>9.6.3</b> Using crosstalk with gio</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Web Development with Shiny</b></span></li>
<li class="chapter" data-level="10" data-path="discover.html"><a href="discover.html"><i class="fa fa-check"></i><b>10</b> Discover</a>
<ul>
<li class="chapter" data-level="10.1" data-path="discover.html"><a href="discover.html#static-files"><i class="fa fa-check"></i><b>10.1</b> Static Files</a></li>
<li class="chapter" data-level="10.2" data-path="discover.html"><a href="discover.html#example---alerts"><i class="fa fa-check"></i><b>10.2</b> Example - Alerts</a></li>
<li class="chapter" data-level="10.3" data-path="discover.html"><a href="discover.html#from-r-to-javascript"><i class="fa fa-check"></i><b>10.3</b> From R to JavaScript</a></li>
<li class="chapter" data-level="10.4" data-path="discover.html"><a href="discover.html#from-javascript-to-r"><i class="fa fa-check"></i><b>10.4</b> From JavaScript to R</a></li>
<li class="chapter" data-level="10.5" data-path="discover.html"><a href="discover.html#deserialise"><i class="fa fa-check"></i><b>10.5</b> Deserialise</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="a-complete-integration.html"><a href="a-complete-integration.html"><i class="fa fa-check"></i><b>11</b> A Complete Integration</a>
<ul>
<li class="chapter" data-level="11.1" data-path="a-complete-integration.html"><a href="a-complete-integration.html#serialisation"><i class="fa fa-check"></i><b>11.1</b> Serialisation</a></li>
<li class="chapter" data-level="11.2" data-path="a-complete-integration.html"><a href="a-complete-integration.html#events-callbacks"><i class="fa fa-check"></i><b>11.2</b> Events &amp; Callbacks</a></li>
<li class="chapter" data-level="11.3" data-path="a-complete-integration.html"><a href="a-complete-integration.html#as-a-package"><i class="fa fa-check"></i><b>11.3</b> As a Package</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i><b>11.3.1</b> Dependencies</a></li>
<li class="chapter" data-level="11.3.2" data-path="prerequisites.html"><a href="prerequisites.html#r-code"><i class="fa fa-check"></i><b>11.3.2</b> R Code</a></li>
<li class="chapter" data-level="11.3.3" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i><b>11.3.3</b> JavaScript Code</a></li>
<li class="chapter" data-level="11.3.4" data-path="a-complete-integration.html"><a href="a-complete-integration.html#input-handler"><i class="fa fa-check"></i><b>11.3.4</b> Input Handler</a></li>
<li class="chapter" data-level="11.3.5" data-path="a-complete-integration.html"><a href="a-complete-integration.html#wrapping-up"><i class="fa fa-check"></i><b>11.3.5</b> Wrapping up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tips-tricks.html"><a href="tips-tricks.html"><i class="fa fa-check"></i><b>12</b> Tips &amp; Tricks</a>
<ul>
<li class="chapter" data-level="12.1" data-path="tips-tricks.html"><a href="tips-tricks.html#shiny-events"><i class="fa fa-check"></i><b>12.1</b> Shiny Events</a></li>
<li class="chapter" data-level="12.2" data-path="tips-tricks.html"><a href="tips-tricks.html#table-buttons"><i class="fa fa-check"></i><b>12.2</b> Table Buttons</a></li>
<li class="chapter" data-level="12.3" data-path="tips-tricks.html"><a href="tips-tricks.html#jquery---toggle"><i class="fa fa-check"></i><b>12.3</b> jQuery - Toggle</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="custom-outputs.html"><a href="custom-outputs.html"><i class="fa fa-check"></i><b>13</b> Custom Outputs</a>
<ul>
<li class="chapter" data-level="13.1" data-path="custom-outputs.html"><a href="custom-outputs.html#inner-workings"><i class="fa fa-check"></i><b>13.1</b> Inner-workings</a></li>
<li class="chapter" data-level="13.2" data-path="custom-outputs.html"><a href="custom-outputs.html#discover-lena.js"><i class="fa fa-check"></i><b>13.2</b> Discover Lena.js</a></li>
<li class="chapter" data-level="13.3" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i><b>13.3</b> Setup</a></li>
<li class="chapter" data-level="13.4" data-path="custom-outputs.html"><a href="custom-outputs.html#output"><i class="fa fa-check"></i><b>13.4</b> Output</a></li>
<li class="chapter" data-level="13.5" data-path="custom-outputs.html"><a href="custom-outputs.html#render"><i class="fa fa-check"></i><b>13.5</b> Render</a></li>
<li class="chapter" data-level="13.6" data-path="custom-outputs.html"><a href="custom-outputs.html#javascript-binding"><i class="fa fa-check"></i><b>13.6</b> JavaScript Binding</a></li>
<li class="chapter" data-level="13.7" data-path="custom-outputs.html"><a href="custom-outputs.html#test"><i class="fa fa-check"></i><b>13.7</b> Test</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html"><i class="fa fa-check"></i><b>14</b> Widgets with Shiny</a>
<ul>
<li class="chapter" data-level="14.1" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#javascript-to-r"><i class="fa fa-check"></i><b>14.1</b> JavaScript to R</a></li>
<li class="chapter" data-level="14.2" data-path="a-complete-integration.html"><a href="a-complete-integration.html#input-handler"><i class="fa fa-check"></i><b>14.2</b> Input Handler</a></li>
<li class="chapter" data-level="14.3" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#r-to-javascript"><i class="fa fa-check"></i><b>14.3</b> R to JavaScript</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#send-data"><i class="fa fa-check"></i><b>14.3.1</b> Send Data</a></li>
<li class="chapter" data-level="14.3.2" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#retrieve-widget-instance"><i class="fa fa-check"></i><b>14.3.2</b> Retrieve Widget Instance</a></li>
<li class="chapter" data-level="14.3.3" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#handle-data"><i class="fa fa-check"></i><b>14.3.3</b> Handle Data</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#proxy-function"><i class="fa fa-check"></i><b>14.4</b> Proxy Function</a></li>
<li class="chapter" data-level="14.5" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#clear-data"><i class="fa fa-check"></i><b>14.5</b> Clear Data</a></li>
<li class="chapter" data-level="14.6" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#update"><i class="fa fa-check"></i><b>14.6</b> Update</a></li>
</ul></li>
<li class="part"><span><b>IV JavaScript for Computations</b></span></li>
<li class="chapter" data-level="15" data-path="the-v8-engine.html"><a href="the-v8-engine.html"><i class="fa fa-check"></i><b>15</b> The V8 Engine</a>
<ul>
<li class="chapter" data-level="15.1" data-path="the-v8-engine.html"><a href="the-v8-engine.html#installation"><i class="fa fa-check"></i><b>15.1</b> Installation</a></li>
<li class="chapter" data-level="15.2" data-path="the-v8-engine.html"><a href="the-v8-engine.html#basics"><i class="fa fa-check"></i><b>15.2</b> Basics</a></li>
<li class="chapter" data-level="15.3" data-path="the-v8-engine.html"><a href="the-v8-engine.html#external-libraries"><i class="fa fa-check"></i><b>15.3</b> External Libraries</a></li>
<li class="chapter" data-level="15.4" data-path="the-v8-engine.html"><a href="the-v8-engine.html#with-npm"><i class="fa fa-check"></i><b>15.4</b> With Npm</a></li>
<li class="chapter" data-level="15.5" data-path="the-v8-engine.html"><a href="the-v8-engine.html#use-in-packages"><i class="fa fa-check"></i><b>15.5</b> Use in Packages</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="node.html"><a href="node.html"><i class="fa fa-check"></i><b>16</b> Node.js with Bubble</a>
<ul>
<li class="chapter" data-level="16.1" data-path="the-v8-engine.html"><a href="the-v8-engine.html#basics"><i class="fa fa-check"></i><b>16.1</b> Basics</a></li>
<li class="chapter" data-level="16.2" data-path="node.html"><a href="node.html#r-markdown-engine"><i class="fa fa-check"></i><b>16.2</b> R Markdown Engine</a></li>
<li class="chapter" data-level="16.3" data-path="node.html"><a href="node.html#npm"><i class="fa fa-check"></i><b>16.3</b> Npm</a></li>
</ul></li>
<li class="part"><span><b>V Examples</b></span></li>
<li class="chapter" data-level="17" data-path="ploty.html"><a href="ploty.html"><i class="fa fa-check"></i><b>17</b> Ploty</a>
<ul>
<li class="chapter" data-level="17.1" data-path="discover.html"><a href="discover.html#discover"><i class="fa fa-check"></i><b>17.1</b> Discover</a></li>
<li class="chapter" data-level="17.2" data-path="the-v8-engine.html"><a href="the-v8-engine.html#basics"><i class="fa fa-check"></i><b>17.2</b> Basics</a></li>
<li class="chapter" data-level="17.3" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#javascript-to-r"><i class="fa fa-check"></i><b>17.3</b> JavaScript to R</a></li>
<li class="chapter" data-level="17.4" data-path="widgets-with-shiny.html"><a href="widgets-with-shiny.html#r-to-javascript"><i class="fa fa-check"></i><b>17.4</b> R to JavaScript</a></li>
<li class="chapter" data-level="17.5" data-path="ploty.html"><a href="ploty.html#size-resize"><i class="fa fa-check"></i><b>17.5</b> Size &amp; Resize</a></li>
<li class="chapter" data-level="17.6" data-path="ploty.html"><a href="ploty.html#performance-security"><i class="fa fa-check"></i><b>17.6</b> Performance &amp; Security</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="image-classifier.html"><a href="image-classifier.html"><i class="fa fa-check"></i><b>18</b> Image Classifier</a>
<ul>
<li class="chapter" data-level="18.1" data-path="discover.html"><a href="discover.html#discover"><i class="fa fa-check"></i><b>18.1</b> Discover</a></li>
<li class="chapter" data-level="18.2" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i><b>18.2</b> Setup</a></li>
<li class="chapter" data-level="18.3" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>18.3</b> JavaScript</a></li>
<li class="chapter" data-level="18.4" data-path="a-complete-integration.html"><a href="a-complete-integration.html#input-handler"><i class="fa fa-check"></i><b>18.4</b> Input Handler</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="progress-bar.html"><a href="progress-bar.html"><i class="fa fa-check"></i><b>19</b> Progress Bar</a>
<ul>
<li class="chapter" data-level="19.1" data-path="prerequisites.html"><a href="prerequisites.html#r-code"><i class="fa fa-check"></i><b>19.1</b> R code</a></li>
<li class="chapter" data-level="19.2" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i><b>19.2</b> JavaScript code</a></li>
<li class="chapter" data-level="19.3" data-path="progress-bar.html"><a href="progress-bar.html#events"><i class="fa fa-check"></i><b>19.3</b> Events</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>20</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="20.1" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#dependency"><i class="fa fa-check"></i><b>20.1</b> Dependency</a></li>
<li class="chapter" data-level="20.2" data-path="machine-learning.html"><a href="machine-learning.html#simple-regression"><i class="fa fa-check"></i><b>20.2</b> Simple Regression</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="cookies.html"><a href="cookies.html"><i class="fa fa-check"></i><b>21</b> Cookies</a>
<ul>
<li class="chapter" data-level="21.1" data-path="cookies.html"><a href="cookies.html#discover-js-cookie"><i class="fa fa-check"></i><b>21.1</b> Discover js-cookie</a></li>
<li class="chapter" data-level="21.2" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i><b>21.2</b> Setup</a></li>
<li class="chapter" data-level="21.3" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i><b>21.3</b> JavaScript</a></li>
<li class="chapter" data-level="21.4" data-path="prerequisites.html"><a href="prerequisites.html#r-code"><i class="fa fa-check"></i><b>21.4</b> R Code</a></li>
</ul></li>
<li class="part"><span><b>VI Closing Remarks</b></span></li>
<li class="chapter" data-level="22" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>22</b> Conclusion</a>
<ul>
<li class="chapter" data-level="22.1" data-path="advanced-topics.html"><a href="advanced-topics.html#performances"><i class="fa fa-check"></i><b>22.1</b> Performances</a></li>
<li class="chapter" data-level="22.2" data-path="conclusion.html"><a href="conclusion.html#road-ahead"><i class="fa fa-check"></i><b>22.2</b> Road ahead</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="conclusion.html"><a href="conclusion.html#computation"><i class="fa fa-check"></i><b>22.2.1</b> Computation</a></li>
<li class="chapter" data-level="22.2.2" data-path="introduction.html"><a href="introduction.html#shiny"><i class="fa fa-check"></i><b>22.2.2</b> Shiny</a></li>
<li class="chapter" data-level="22.2.3" data-path="introduction.html"><a href="introduction.html#htmlwidgets"><i class="fa fa-check"></i><b>22.2.3</b> htmlwidgets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">JavaScript for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="prerequisites" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Prerequisites</h1>
<p>The code contained in the following pages is approachable to readers with basic knowledge of R, but familiarity with package development using <a href="https://devtools.r-lib.org/">devtools</a> <span class="citation">(Wickham, Hester, and Chang <a href="#ref-R-devtools" role="doc-biblioref">2020</a>)</span>, the <a href="https://shiny.rstudio.com/">Shiny</a> framework <span class="citation">(Chang et al. <a href="#ref-R-shiny" role="doc-biblioref">2020</a>)</span>, the JSON data format, and JavaScript is essential. The reason for the former is that some of the ways one builds integrations with JavaScript naturally take the form of R packages. Also, R packages make sharing code, datasets, and anything else R-related extremely convenient, they come with a relatively strict structure, the ability to run unit tests, and much more. These have thus become a core feature of the R ecosystem and therefore are also used extensively in the book as we create several packages. The following section thus runs over the essentials of building a package to ensure everyone can keep up. Then we briefly go through the JSON data format as it will be used to a great extent to communicate between R and JavaScript. As both Shiny and JavaScript run in the browser they make for axiomatic companions; we’ll therefore use Shiny extensively. Only basic knowledge of JavaScript is required but a good understanding of JSON and HTML, however, is essential.</p>
<p>It is highly recommended to use the freely available <a href="https://rstudio.com/products/rstudio/">RStudio IDE</a> to follow along as it makes a lot of things easier down the line.</p>
<div id="r-package-development" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> R Package Development</h2>
<p>Developing packages used to be notoriously difficult but things have greatly changed in recent years, namely thanks to the devtools <span class="citation">(Wickham, Hester, and Chang <a href="#ref-R-devtools" role="doc-biblioref">2020</a>)</span>, roxygen2 <span class="citation">(Wickham, Danenberg, et al. <a href="#ref-R-roxygen2" role="doc-biblioref">2020</a>)</span> and more recent <a href="https://usethis.r-lib.org/">usethis</a> <span class="citation">(Wickham and Bryan <a href="#ref-R-usethis" role="doc-biblioref">2020</a>)</span> packages. Devtools is short for “developer tools,” it is specifically designed to help creating packages; setting up tests, running checks, building and installing packages, etc. The second provides an all too convenient way to generate the documentation of packages, and usethis, more broadly helps setting up projects, and automating repetitive tasks. Here, we only skim over the fundamentals, there is an entire book by Hadley Wickham called <a href="http://r-pkgs.had.co.nz/">R Packages</a> solely dedicated to the topic.</p>
<p>Start by installing those packages from CRAN, the roxygen2 package does not need to be explicitly installed as it is a dependency of devtools.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="prerequisites.html#cb13-1"></a><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;devtools&quot;</span>, <span class="st">&quot;usethis&quot;</span>))</span></code></pre></div>
<div id="creating-a-package" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Creating a Package</h3>
<p>There are multiple ways to create a package. One could manually create every file, use the RStudio IDE, or create it from the R console with the usethis <span class="citation">(Wickham and Bryan <a href="#ref-R-usethis" role="doc-biblioref">2020</a>)</span> package.</p>
<p>From the RStudio IDE go to <code>File &gt; New Project &gt; New Directory &gt; R Package</code> then select “R package” and fill in the small form, namely name the package and specify the directory where it should be created.</p>
<div class="figure">
<img src="images/rstudio-create-package.png" alt="" />
<p class="caption">Package creation wizard</p>
</div>
<p>But it could be argued that it’s actually easier from the R console with the usethis package. The <code>create_package</code> function takes as first argument the path to create the package. If you run it from RStudio a new project window should open.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="prerequisites.html#cb14-1"></a><span class="co"># creates a package named &quot;test&quot; in root of directory.</span></span>
<span id="cb14-2"><a href="prerequisites.html#cb14-2"></a>usethis<span class="op">::</span><span class="kw">create_package</span>(<span class="st">&quot;test&quot;</span>)</span></code></pre></div>
<pre><code>✔ Creating &#39;test/&#39;
✔ Setting active project to &#39;/Packages/test&#39;
✔ Creating &#39;R/&#39;
✔ Writing &#39;DESCRIPTION&#39;
Package: test
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R (parsed):
    * First Last &lt;first.last@example.com&gt; [aut, cre] (YOUR-ORCID-ID)
Description: What the package does (one paragraph).
License: `use_mit_license()`, `use_gpl3_license()` or friends to
    pick a license
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1.9000
✔ Writing &#39;NAMESPACE&#39;
✔ Changing working directory to &#39;test/&#39;
✔ Setting active project to &#39;&lt;no active project&gt;&#39;</code></pre>
</div>
<div id="metadata" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Metadata</h3>
<p>Every R package includes a <code>DESCRIPTION</code> file which includes metadata about the package. This includes a range of things like the license defining who can use the package, the name of the package, its dependencies, and more. Below is the default created by the usethis package with <code>usethis::create_package("test")</code>.</p>
<pre><code>Package: test
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R: 
    person(given = &quot;First&quot;,
           family = &quot;Last&quot;,
           role = c(&quot;aut&quot;, &quot;cre&quot;),
           email = &quot;first.last@example.com&quot;,
           comment = c(ORCID = &quot;YOUR-ORCID-ID&quot;))
Description: What the package does (one paragraph).
License: `use_mit_license()`, `use_gpl3_license()` or friends to
    pick a license
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1.9000</code></pre>
<p>Much of this is outside the scope of the book. However, it is good to grasp how dependencies are specified. As packages are generally intended for sharing with others it is important to ensure users of the package meet the dependencies otherwise the package may not work in places. For instance, were we to create a package that relies on one or more functions from the stringr <span class="citation">(Wickham <a href="#ref-R-stringr" role="doc-biblioref">2019</a>)</span> package we would need to ensure people who install the package actually have it installed on their machine or those functions will not work.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="prerequisites.html#cb17-1"></a><span class="co"># R/string.R</span></span>
<span id="cb17-2"><a href="prerequisites.html#cb17-2"></a>string_length &lt;-<span class="st"> </span><span class="cf">function</span>(string) {</span>
<span id="cb17-3"><a href="prerequisites.html#cb17-3"></a>  stringr<span class="op">::</span><span class="kw">str_length</span>(string)</span>
<span id="cb17-4"><a href="prerequisites.html#cb17-4"></a>}</span></code></pre></div>
<div class="rmdnote">
<p>
Note that the function is preceded by its namespace with <code>::</code> (more on this later).
</p>
</div>
<p>The <code>DESCRIPTION</code> file does this, it will make sure that the dependencies of the package are met by users who install it. We can specify such dependencies under <code>Imports</code> where we can list packages required separated by a comma.</p>
<pre><code>Imports:
  stringr,
  dplyr</code></pre>
<p>Then again, the usethis package also allows doing so consistently from the R console, which is great to avoid mishandling the <code>DESCRIPTION</code> file.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="prerequisites.html#cb19-1"></a><span class="co"># add stringr under Imports</span></span>
<span id="cb19-2"><a href="prerequisites.html#cb19-2"></a>usethis<span class="op">::</span><span class="kw">use_package</span>(<span class="st">&#39;stringr&#39;</span>)</span></code></pre></div>
<p>One can also specify another type of dependencies under <code>Suggests</code>, other packages that enhance that enhance the package but are not required to run it. These, unlike package under ‘Imports’ are not automatically installed if missing which can greatly reduce overhead.</p>
</div>
<div id="r-code" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> R code</h3>
<p>An R package must follow a strict structure. R code must be placed in an <code>R/</code> directory so one should only find <code>.R</code> files in that directory. These files generally contain functions, methods, and R objects.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="prerequisites.html#cb20-1"></a><span class="co"># R/add.R</span></span>
<span id="cb20-2"><a href="prerequisites.html#cb20-2"></a>string_length &lt;-<span class="st"> </span><span class="cf">function</span>(strings) {</span>
<span id="cb20-3"><a href="prerequisites.html#cb20-3"></a>  stringr<span class="op">::</span><span class="kw">str_length</span>(strings)</span>
<span id="cb20-4"><a href="prerequisites.html#cb20-4"></a>}</span></code></pre></div>
</div>
<div id="documentation" class="section level3" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Documentation</h3>
<p>Documenting packages used to be notoriously complicated but thanks to the package roxygen2 it no longer is the case. The documentation of functions of the package (accessible with <code>?</code>) and datasets that comprise the package reside in separate files in the <code>man/</code> directory. These are <code>.Rd</code> files that use a custom syntax resembling LaTex. The roxygen package eases the creation of these files by turning special comments and tags in <code>.R</code> files into said <code>.Rd</code> files.</p>
<p>Special comments are a standard R comment <code>#</code> followed by an apostrophe <code>'</code>. The first sentence of the documentation is the title of the documentation file while the second is the description.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="prerequisites.html#cb21-1"></a><span class="co">#&#39; Strings Length</span></span>
<span id="cb21-2"><a href="prerequisites.html#cb21-2"></a><span class="co">#&#39; </span></span>
<span id="cb21-3"><a href="prerequisites.html#cb21-3"></a><span class="co">#&#39; Returns the number of characters in strings. </span></span>
<span id="cb21-4"><a href="prerequisites.html#cb21-4"></a>string_length &lt;-<span class="st"> </span><span class="cf">function</span>(strings) {</span>
<span id="cb21-5"><a href="prerequisites.html#cb21-5"></a>  stringr<span class="op">::</span><span class="kw">str_length</span>(strings)</span>
<span id="cb21-6"><a href="prerequisites.html#cb21-6"></a>}</span></code></pre></div>
<p>There are a plethora of roxygen2 tags to further document different sections, below we use two different tags to document the parameters and give an example.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="prerequisites.html#cb22-1"></a><span class="co">#&#39; Strings Length</span></span>
<span id="cb22-2"><a href="prerequisites.html#cb22-2"></a><span class="co">#&#39; </span></span>
<span id="cb22-3"><a href="prerequisites.html#cb22-3"></a><span class="co">#&#39; Returns the number of characters in strings. </span></span>
<span id="cb22-4"><a href="prerequisites.html#cb22-4"></a><span class="co">#&#39; </span></span>
<span id="cb22-5"><a href="prerequisites.html#cb22-5"></a><span class="co">#&#39; @param strings A vector of character strings.</span></span>
<span id="cb22-6"><a href="prerequisites.html#cb22-6"></a><span class="co">#&#39; </span></span>
<span id="cb22-7"><a href="prerequisites.html#cb22-7"></a><span class="co">#&#39; @example string_length(c(&quot;hello&quot;, &quot;world&quot;))</span></span>
<span id="cb22-8"><a href="prerequisites.html#cb22-8"></a>string_length &lt;-<span class="st"> </span><span class="cf">function</span>(strings) {</span>
<span id="cb22-9"><a href="prerequisites.html#cb22-9"></a>  stringr<span class="op">::</span><span class="kw">str_length</span>(strings)</span>
<span id="cb22-10"><a href="prerequisites.html#cb22-10"></a>}</span></code></pre></div>
<p>As well as generating documentation the roxygen2 package also allows populating the <code>NAMESPACE</code> file. This is an extensive and often confusing topic but for the purpose of this book we’ll content with the following: the <code>NAMESPACE</code> includes functions that are <em>imported</em> and <em>exported</em> by the package.</p>
<p>By default functions that are present in the R files in the <code>R/</code> directory are not exported: they are not accessible outside the package. Therefore the <code>string_length</code> function defined previously will not be made available to users of the package, only other function within the package will be able to call it. In order to export it we can use the <code>@export</code> tag. This will place the function as exported in the <code>NAMESPACE</code> file.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="prerequisites.html#cb23-1"></a><span class="co">#&#39; Strings Length</span></span>
<span id="cb23-2"><a href="prerequisites.html#cb23-2"></a><span class="co">#&#39; </span></span>
<span id="cb23-3"><a href="prerequisites.html#cb23-3"></a><span class="co">#&#39; Returns the number of characters in strings. </span></span>
<span id="cb23-4"><a href="prerequisites.html#cb23-4"></a><span class="co">#&#39; </span></span>
<span id="cb23-5"><a href="prerequisites.html#cb23-5"></a><span class="co">#&#39; @param strings A vector of character strings.</span></span>
<span id="cb23-6"><a href="prerequisites.html#cb23-6"></a><span class="co">#&#39; </span></span>
<span id="cb23-7"><a href="prerequisites.html#cb23-7"></a><span class="co">#&#39; @example string_length(c(&quot;hello&quot;, &quot;world&quot;))</span></span>
<span id="cb23-8"><a href="prerequisites.html#cb23-8"></a><span class="co">#&#39; </span></span>
<span id="cb23-9"><a href="prerequisites.html#cb23-9"></a><span class="co">#&#39; @export</span></span>
<span id="cb23-10"><a href="prerequisites.html#cb23-10"></a>string_length &lt;-<span class="st"> </span><span class="cf">function</span>(strings) {</span>
<span id="cb23-11"><a href="prerequisites.html#cb23-11"></a>  stringr<span class="op">::</span><span class="kw">str_length</span>(strings)</span>
<span id="cb23-12"><a href="prerequisites.html#cb23-12"></a>}</span></code></pre></div>
<p>There are two ways to use external functions (functions from other R packages), as done thus far in the <code>string_length</code> function by using the namespace (package name) to call the function: <code>stringr::str_length</code>. Or by importing the function needed using a roxygen2 tag thereby removing the need for using the namespace.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="prerequisites.html#cb24-1"></a><span class="co">#&#39; Strings Length</span></span>
<span id="cb24-2"><a href="prerequisites.html#cb24-2"></a><span class="co">#&#39; </span></span>
<span id="cb24-3"><a href="prerequisites.html#cb24-3"></a><span class="co">#&#39; Returns the number of characters in strings. </span></span>
<span id="cb24-4"><a href="prerequisites.html#cb24-4"></a><span class="co">#&#39; </span></span>
<span id="cb24-5"><a href="prerequisites.html#cb24-5"></a><span class="co">#&#39; @param strings A vector of character strings.</span></span>
<span id="cb24-6"><a href="prerequisites.html#cb24-6"></a><span class="co">#&#39; </span></span>
<span id="cb24-7"><a href="prerequisites.html#cb24-7"></a><span class="co">#&#39; @example string_length(c(&quot;hello&quot;, &quot;world&quot;))</span></span>
<span id="cb24-8"><a href="prerequisites.html#cb24-8"></a><span class="co">#&#39; </span></span>
<span id="cb24-9"><a href="prerequisites.html#cb24-9"></a><span class="co">#&#39; @importFrom stringr str_length</span></span>
<span id="cb24-10"><a href="prerequisites.html#cb24-10"></a><span class="co">#&#39; </span></span>
<span id="cb24-11"><a href="prerequisites.html#cb24-11"></a><span class="co">#&#39; @export</span></span>
<span id="cb24-12"><a href="prerequisites.html#cb24-12"></a>string_length &lt;-<span class="st"> </span><span class="cf">function</span>(strings) {</span>
<span id="cb24-13"><a href="prerequisites.html#cb24-13"></a>  <span class="kw">str_length</span>(strings) <span class="co"># namespace removed</span></span>
<span id="cb24-14"><a href="prerequisites.html#cb24-14"></a>}</span></code></pre></div>
<p>Above we import the function <code>str_length</code> from the <code>stringr</code> package using the <code>importFrom</code> roxygen2 tag. The first term following the tag is the name of the package wherefrom to import the functions and the following terms are the name of the functions separated by spaces so one can import multiple functions from the same package with, e.g.: <code>@importFrom stringr str_length str_to_upper</code>. If the package uses very many functions from a single package one might also consider importing said package in its entirety with e.g.: <code>@import stringr</code>.</p>
<p>Finally, one can actually generate the <code>.Rd</code> documentation files and populate the <code>NAMESPACE</code> with either the <code>devtools::document()</code> function or <code>roxygen2::roxygenise()</code>.</p>
<div class="rmdnote">
<p>
Remember to run <code>devtools::document()</code> after changing roxygen2 tags otherwise changes are not actually reflected in the <code>NAMESPACE</code> and documentation.
</p>
</div>
</div>
<div id="installed-files" class="section level3" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Installed files</h3>
<p>Here we tackle the topic of installed files as it will be relevant to much of what the book covers. Installed files are files that are downloaded and copied as-is when users install the package. This directory will therefore come in very handy to store JavaScript files that package will require. These files can be accessed with the <code>system.file</code> function which will look for a file from the root of the <code>inst/</code> directory.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="prerequisites.html#cb25-1"></a><span class="co"># return path to `inst/dependency.js` in `myPackage`</span></span>
<span id="cb25-2"><a href="prerequisites.html#cb25-2"></a>path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;dependency.js&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;myPackage&quot;</span>)</span></code></pre></div>
</div>
<div id="build-load-and-install" class="section level3" number="2.1.6">
<h3><span class="header-section-number">2.1.6</span> Build, load, and install</h3>
<p>Finally, after generating the documentation of the package with <code>devtools::document()</code> one can install it locally with <code>devtools::install()</code>. This however can take a few seconds too many whilst developing a package as one iterates and regularly tries things; <code>devtools::load_all()</code> will not install the package but load all the functions and object in the global environment to let you run them.</p>
<p>There is some cyclical nature to developing packages:</p>
<ol style="list-style-type: decimal">
<li>Write some code</li>
<li>Run <code>devtools::document()</code> (if documentation tags have changed)</li>
<li>Run <code>devtools::load_all()</code></li>
<li>Repeat</li>
</ol>
<p>Note whilst this short guide will help you develop packages good enough for your system it will certainly not pass CRAN checks.</p>
</div>
</div>
<div id="json" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> JSON</h2>
<p>JSON (JavaScript Object Notation) is a very popular data <em>interchange</em> format with which we will work extensively throughout this book, it is thus crucial that we have a good understanding of it before we plunge into the nitty-gritty. As one might foresee, if we want two languages to work together it is essential that we have a data format that can be understood by both—JSON lets us harmoniously pass data from one to the other. While it is natively supported in JavaScript, it can be graciously handled in R with the <a href="https://CRAN.R-project.org/package=jsonlite">jsonlite package</a> <span class="citation">(Ooms <a href="#ref-R-jsonlite" role="doc-biblioref">2020</a>)</span>, in fact it is the serialiser used internally by all the packages we shall explore in this book.</p>
<div class="rmdnote">
<p>
“To serialise” is just jargon for converting data to JSON.
</p>
</div>
<div id="serialising" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Serialising</h3>
<p>JSON is to all intents and purposes the equivalent of lists in R; a flexible data format that can store pretty much anything–expect data.frames a structure that does not exist in JavaScript. Below we create a nested list and convert it to JSON with the help of jsonlite, we set <code>pretty</code> to <code>TRUE</code> to add indentation for clearer printing but this is an argument you should omit when writing production code, it will reduce the file size (fewer spaces = smaller file size).</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="prerequisites.html#cb26-1"></a><span class="co"># install.packages(&quot;jsonlite&quot;)</span></span>
<span id="cb26-2"><a href="prerequisites.html#cb26-2"></a><span class="kw">library</span>(jsonlite)</span>
<span id="cb26-3"><a href="prerequisites.html#cb26-3"></a></span>
<span id="cb26-4"><a href="prerequisites.html#cb26-4"></a>lst &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb26-5"><a href="prerequisites.html#cb26-5"></a>  <span class="dt">a =</span> <span class="dv">1</span>,</span>
<span id="cb26-6"><a href="prerequisites.html#cb26-6"></a>  <span class="dt">b =</span> <span class="kw">list</span>(</span>
<span id="cb26-7"><a href="prerequisites.html#cb26-7"></a>    <span class="dt">c =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)</span>
<span id="cb26-8"><a href="prerequisites.html#cb26-8"></a>  ),</span>
<span id="cb26-9"><a href="prerequisites.html#cb26-9"></a>  <span class="dt">d =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb26-10"><a href="prerequisites.html#cb26-10"></a>)</span>
<span id="cb26-11"><a href="prerequisites.html#cb26-11"></a></span>
<span id="cb26-12"><a href="prerequisites.html#cb26-12"></a><span class="kw">toJSON</span>(lst, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## {
##   &quot;a&quot;: [1],
##   &quot;b&quot;: {
##     &quot;c&quot;: [&quot;A&quot;, &quot;B&quot;]
##   },
##   &quot;d&quot;: [1, 2, 3, 4, 5]
## }</code></pre>
<p>Looking closely at the list and JSON output above one quickly sees the resemblance. Something seems odd though, the first value in the list (<code>a = 1</code>) was serialised to an array (vector) of length one (<code>"a": [1]</code>) where one would probably expect an integer instead, <code>1</code> not <code>[1]</code>. This is not a mistake, we often forget that there are no scalar types in R and that <code>a</code> is in fact a vector as we can observe below.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="prerequisites.html#cb28-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb28-2"><a href="prerequisites.html#cb28-2"></a><span class="kw">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="prerequisites.html#cb30-1"></a><span class="kw">is.vector</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>JavaScript, on the other hand, does have scalar types, more often than not we will want to convert the vectors of length one to scalar types rather than arrays of length one. To do so we need use the <code>auto_unbox</code> argument in <code>jsonlite::toJSON</code>, we’ll do this most of the time we have to convert data to JSON.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="prerequisites.html#cb32-1"></a><span class="kw">toJSON</span>(lst, <span class="dt">pretty =</span> <span class="ot">TRUE</span>, <span class="dt">auto_unbox =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## {
##   &quot;a&quot;: 1,
##   &quot;b&quot;: {
##     &quot;c&quot;: [&quot;A&quot;, &quot;B&quot;]
##   },
##   &quot;d&quot;: [1, 2, 3, 4, 5]
## }</code></pre>
<p>As demonstrated above the vector of length one was “unboxed” into an integer, with <code>auto_unbox</code> set to <code>TRUE</code> jsonlite will properly convert such vectors into their appropriate type; integer, numeric, boolean, etc. Note that this only applies to vectors, lists of length one will be serialised to arrays of length one even with <code>auto_unbox</code> turned on: <code>list("hello")</code> will always be converted to <code>["hello"]</code>.</p>
</div>
<div id="tabular-data" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Tabular data</h3>
<p>If JSON is more or less the equivalent of lists in R one might wonder how jsonlite handles dataframes since they do not exist in JavaScript.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="prerequisites.html#cb34-1"></a><span class="co"># subset of built-in dataset</span></span>
<span id="cb34-2"><a href="prerequisites.html#cb34-2"></a>df &lt;-<span class="st"> </span>cars[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ]</span>
<span id="cb34-3"><a href="prerequisites.html#cb34-3"></a></span>
<span id="cb34-4"><a href="prerequisites.html#cb34-4"></a><span class="kw">toJSON</span>(df, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [
##   {
##     &quot;speed&quot;: 4,
##     &quot;dist&quot;: 2
##   },
##   {
##     &quot;speed&quot;: 4,
##     &quot;dist&quot;: 10
##   }
## ]</code></pre>
<p>What jsonlite does internally is essentially turn the data.frame into a list <em>rowwise</em> to produce a sub-list for every row then it serialises to JSON. This is generally how rectangular data is represented in lists, for instance, <code>purrr::transpose</code> does the same. Another great example is to use <code>console.table</code> in the JavaScript console (more on that later) to display the table JSON as a table.</p>
<div class="figure">
<img src="images/console-table.png" alt="" />
<p class="caption">console.table output</p>
</div>
<p>We can reproduce this with the snippet below, we remove row names and use apply to turn every row into a list.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="prerequisites.html#cb36-1"></a><span class="kw">row.names</span>(df) &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb36-2"><a href="prerequisites.html#cb36-2"></a>df_list &lt;-<span class="st"> </span><span class="kw">apply</span>(df, <span class="dv">1</span>, as.list)</span>
<span id="cb36-3"><a href="prerequisites.html#cb36-3"></a></span>
<span id="cb36-4"><a href="prerequisites.html#cb36-4"></a><span class="kw">toJSON</span>(df_list, <span class="dt">pretty =</span> <span class="ot">TRUE</span>, <span class="dt">auto_unbox =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [
##   {
##     &quot;speed&quot;: 4,
##     &quot;dist&quot;: 2
##   },
##   {
##     &quot;speed&quot;: 4,
##     &quot;dist&quot;: 10
##   }
## ]</code></pre>
<p>Jsonlite of course also enables reading data from JSON into R with the function <code>fromJSON</code>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="prerequisites.html#cb38-1"></a>json &lt;-<span class="st"> </span><span class="kw">toJSON</span>(df) <span class="co"># convert to JSON</span></span>
<span id="cb38-2"><a href="prerequisites.html#cb38-2"></a><span class="kw">fromJSON</span>(json) <span class="co"># read from JSON</span></span></code></pre></div>
<pre><code>##   speed dist
## 1     4    2
## 2     4   10</code></pre>
<p>It’s important to note that jsonlite did the conversion back to a data frame. Therefore the code below also returns a data frame even though the object we initially converted to JSON is a list.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="prerequisites.html#cb40-1"></a><span class="kw">class</span>(df_list)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="prerequisites.html#cb42-1"></a>json &lt;-<span class="st"> </span><span class="kw">toJSON</span>(df_list)</span>
<span id="cb42-2"><a href="prerequisites.html#cb42-2"></a><span class="kw">fromJSON</span>(json)</span></code></pre></div>
<pre><code>##   speed dist
## 1     4    2
## 2     4   10</code></pre>
<p>Jsonlite provides many more options and functions that will let you tune how JSON data is read and written. Also, the jsonlite package does far more than what we detailed in this section but at this juncture this is an adequate understanding of things.</p>
</div>
</div>
<div id="javascript" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> JavaScript</h2>
<p>The book is not meant to teach one JavaScript, only to show how graciously it can work with R. Let us thus go through the very basics to ensure we know enough to get started with the coming chapters.</p>
<p>The easiest way to run JavaScript interactively is probably to create an HTML file (e.g.: <code>try.html</code>), write your code within a <code>&lt;script&gt;</code> tags and open the file in your web browser. The console output can be observed in the console of the browser, developer tools (more on that below).</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb44-1"><a href="prerequisites.html#cb44-1"></a><span class="er">&lt;</span>!–– index.html ––&gt;</span>
<span id="cb44-2"><a href="prerequisites.html#cb44-2"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb44-3"><a href="prerequisites.html#cb44-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb44-4"><a href="prerequisites.html#cb44-4"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb44-5"><a href="prerequisites.html#cb44-5"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb44-6"><a href="prerequisites.html#cb44-6"></a>    <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;content&quot;</span><span class="kw">&gt;</span>Trying JavaScript!<span class="kw">&lt;/p&gt;</span></span>
<span id="cb44-7"><a href="prerequisites.html#cb44-7"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb44-8"><a href="prerequisites.html#cb44-8"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb44-9"><a href="prerequisites.html#cb44-9"></a>    <span class="co">// place your JavaScript code here</span></span>
<span id="cb44-10"><a href="prerequisites.html#cb44-10"></a>    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello JavaScript!&#39;</span>)</span>
<span id="cb44-11"><a href="prerequisites.html#cb44-11"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb44-12"><a href="prerequisites.html#cb44-12"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p><img src="images/tryingjs.png" /></p>
<div id="developer-tools" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Developer tools</h3>
<p>Most of the JavaScript code written in this book is intended to be run in web browsers, it is thus vital that you have a great understanding of your web browser and its developer tools (devtools). In this section we discuss those available in Google Chrome and Chromium but such tools, albeit somewhat different, also exist in Mozilla Firefox.</p>
<div class="rmdnote">
<p>
The RStudio IDE is built on Chromium, some of these tools will therefore also work in RStudio.
</p>
</div>
<p>The easiest way to access the developer the developer tools from the browser is by “inspecting:” right click on an element on a webpage and select “inspect”. This will open the developer tools either at the bottom or on the right of the page.</p>
<div class="figure">
<img src="images/devtools.png" alt="" />
<p class="caption">Google Chrome Devtools</p>
</div>
<p>The developer tools pane consists of several tabs but we will mainly use:</p>
<ol style="list-style-type: decimal">
<li>Elements: Presents the DOM Tree, the HTML document structure, great for inspecting the structure of the outputs generated from R.</li>
<li>Console: The JavaScript console where messages, errors, and other such things are logged. Essential for debugging.</li>
</ol>
</div>
<div id="variable-declaration-and-scope" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Variable declaration and scope</h3>
<p>One major way JavaScript differs from R is that variables must be declared using one of three keywords, <code>var</code>, <code>let</code>, or <code>const</code> which mainly affect the scope where the declared variable will be accessible from.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb45-1"><a href="prerequisites.html#cb45-1"></a>x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// error</span></span>
<span id="cb45-2"><a href="prerequisites.html#cb45-2"></a><span class="kw">var</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// works</span></span></code></pre></div>
<p>One can declare a variable without assigning a value to it, to then do so later on.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb46-1"><a href="prerequisites.html#cb46-1"></a><span class="kw">var</span> y<span class="op">;</span> <span class="co">// declare </span></span>
<span id="cb46-2"><a href="prerequisites.html#cb46-2"></a>y <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span> <span class="co">// define it as array</span></span>
<span id="cb46-3"><a href="prerequisites.html#cb46-3"></a>y <span class="op">=</span> <span class="st">&#39;string&#39;</span><span class="op">;</span> <span class="co">// change to character string</span></span></code></pre></div>
<p>The <code>let</code> and <code>const</code> keywords were added in ES2015, the <code>const</code> is used to defined a constant: a variable that once declared cannot be changed.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb47-1"><a href="prerequisites.html#cb47-1"></a><span class="kw">const</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// declare constant</span></span>
<span id="cb47-2"><a href="prerequisites.html#cb47-2"></a>x <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// error</span></span></code></pre></div>
<p>Though this is probably only rarely done in R, one can produce something similar by locking the binding for a variable in its environment.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="prerequisites.html#cb48-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co"># declare x</span></span>
<span id="cb48-2"><a href="prerequisites.html#cb48-2"></a><span class="kw">lockBinding</span>(<span class="st">&quot;x&quot;</span>, <span class="dt">env =</span> .GlobalEnv) <span class="co"># make constant</span></span>
<span id="cb48-3"><a href="prerequisites.html#cb48-3"></a>x &lt;-<span class="st"> </span><span class="dv">2</span> <span class="co"># error</span></span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): cannot change value of locked binding for &#39;x&#39;</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="prerequisites.html#cb50-1"></a><span class="kw">unlockBinding</span>(<span class="st">&quot;x&quot;</span>, <span class="dt">env =</span> .GlobalEnv) <span class="co"># unlock binding</span></span>
<span id="cb50-2"><a href="prerequisites.html#cb50-2"></a>x &lt;-<span class="st"> </span><span class="dv">2</span> <span class="co"># works</span></span></code></pre></div>
<p>The <code>let</code> keyword is akin to declaring a variable with the <code>var</code> keyword, however <code>let</code> (and <code>const</code>) will declare the variable in the “block scope.” This in effect further narrows down the scope where the variable will be accessible, a block scope is generally the area within <code>if</code>, <code>switch</code> conditions or <code>for</code> and <code>while</code> loops: areas within curly brackets.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb51-1"><a href="prerequisites.html#cb51-1"></a><span class="cf">if</span>(<span class="kw">true</span>)<span class="op">{</span></span>
<span id="cb51-2"><a href="prerequisites.html#cb51-2"></a>  <span class="kw">let</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb51-3"><a href="prerequisites.html#cb51-3"></a>  <span class="kw">var</span> y <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb51-4"><a href="prerequisites.html#cb51-4"></a><span class="op">}</span></span>
<span id="cb51-5"><a href="prerequisites.html#cb51-5"></a></span>
<span id="cb51-6"><a href="prerequisites.html#cb51-6"></a><span class="va">console</span>.<span class="at">log</span>(x) <span class="co">// error x does not exist</span></span>
<span id="cb51-7"><a href="prerequisites.html#cb51-7"></a><span class="va">console</span>.<span class="at">log</span>(y) <span class="co">// works</span></span></code></pre></div>
<p>In the above example <code>x</code> is only accessible within the if statement as it is declared with <code>let</code>, <code>var</code> does not have a block scope.</p>
<p>While on the subject of scope, in R like in JavaScript, variables can be accessed from the parent environment (often referred to as “context” in the latter). One immense difference though is that while it is seen as bad practice in R it is not in JavaScript where it is extremely useful.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="prerequisites.html#cb52-1"></a><span class="co"># it works but don&#39;t do this in R</span></span>
<span id="cb52-2"><a href="prerequisites.html#cb52-2"></a>x &lt;-<span class="st"> </span><span class="dv">123</span></span>
<span id="cb52-3"><a href="prerequisites.html#cb52-3"></a>foo &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb52-4"><a href="prerequisites.html#cb52-4"></a>  <span class="kw">print</span>(x)</span>
<span id="cb52-5"><a href="prerequisites.html#cb52-5"></a>}</span>
<span id="cb52-6"><a href="prerequisites.html#cb52-6"></a><span class="kw">foo</span>()</span></code></pre></div>
<pre><code>## [1] 123</code></pre>
<p>The above R code can be re-written in JavaScript. Note the slight variation in the function declaration.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb54-1"><a href="prerequisites.html#cb54-1"></a><span class="co">// this is perfectly fine</span></span>
<span id="cb54-2"><a href="prerequisites.html#cb54-2"></a><span class="kw">var</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb54-3"><a href="prerequisites.html#cb54-3"></a></span>
<span id="cb54-4"><a href="prerequisites.html#cb54-4"></a><span class="kw">function</span> <span class="at">foo</span>()<span class="op">{</span></span>
<span id="cb54-5"><a href="prerequisites.html#cb54-5"></a>  <span class="va">console</span>.<span class="at">log</span>(x)<span class="op">;</span> <span class="co">// print to console</span></span>
<span id="cb54-6"><a href="prerequisites.html#cb54-6"></a><span class="op">}</span></span>
<span id="cb54-7"><a href="prerequisites.html#cb54-7"></a></span>
<span id="cb54-8"><a href="prerequisites.html#cb54-8"></a><span class="at">foo</span>()<span class="op">;</span></span></code></pre></div>
<div class="rmdnote">
<p>
Accessing variables from the parent environment (context) is useful in JavaScript but should not be done in R
</p>
</div>
</div>
<div id="document-object-model" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Document object model</h3>
<p>One concept which does not exist in R is that of the “DOM” which stands for Document Object Model. When a web page is loaded, the browser creates a Document Object Model of the web page which can be accessed in JavaScript from the <code>document</code> object. This lets the developer programmatically manipulate the page itself so one can for instance, add an element (e.g.: a button), change the text of another, and plenty more.</p>
<p>The JavaScript code below grabs the element where <code>id='content'</code> from the <code>document</code> with <code>getElementById</code> and replaces the text (<code>innerText</code>). Even though the page only contains “Trying JavaScript!” when the page is opened (loaded) in the web browser JavaScript runs the code and changes it: this happens very fast so the original text cannot be seen.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb55-1"><a href="prerequisites.html#cb55-1"></a> <span class="er">&lt;</span>!–– index.html ––&gt;</span>
<span id="cb55-2"><a href="prerequisites.html#cb55-2"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb55-3"><a href="prerequisites.html#cb55-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb55-4"><a href="prerequisites.html#cb55-4"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb55-5"><a href="prerequisites.html#cb55-5"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb55-6"><a href="prerequisites.html#cb55-6"></a>    <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;content&quot;</span><span class="kw">&gt;</span>Trying JavaScript!<span class="kw">&lt;/p&gt;</span></span>
<span id="cb55-7"><a href="prerequisites.html#cb55-7"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb55-8"><a href="prerequisites.html#cb55-8"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb55-9"><a href="prerequisites.html#cb55-9"></a>    <span class="kw">var</span> cnt <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;content&quot;</span>)<span class="op">;</span></span>
<span id="cb55-10"><a href="prerequisites.html#cb55-10"></a>    <span class="va">cnt</span>.<span class="at">innerText</span> <span class="op">=</span> <span class="st">&quot;The text has changed&quot;</span><span class="op">;</span></span>
<span id="cb55-11"><a href="prerequisites.html#cb55-11"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb55-12"><a href="prerequisites.html#cb55-12"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>One final thing to note for future reference, though not limited to the ids or classes most such selection of elements from the DOM are done with those where the pound sign refers to an element’s id (<code>#id</code>) and a dot refers to an element’s class (<code>.class</code>), just like in CSS.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb56-1"><a href="prerequisites.html#cb56-1"></a> <span class="er">&lt;</span>!–– index.html ––&gt;</span>
<span id="cb56-2"><a href="prerequisites.html#cb56-2"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb56-3"><a href="prerequisites.html#cb56-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb56-4"><a href="prerequisites.html#cb56-4"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb56-5"><a href="prerequisites.html#cb56-5"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb56-6"><a href="prerequisites.html#cb56-6"></a>    <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;content&quot;</span><span class="ot"> class=</span><span class="st">&quot;stuff&quot;</span><span class="kw">&gt;</span>Trying JavaScript!<span class="kw">&lt;/p&gt;</span></span>
<span id="cb56-7"><a href="prerequisites.html#cb56-7"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb56-8"><a href="prerequisites.html#cb56-8"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb56-9"><a href="prerequisites.html#cb56-9"></a>    <span class="co">// select by id</span></span>
<span id="cb56-10"><a href="prerequisites.html#cb56-10"></a>    <span class="kw">var</span> x <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;content&quot;</span>)<span class="op">;</span></span>
<span id="cb56-11"><a href="prerequisites.html#cb56-11"></a>    <span class="kw">var</span> y <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&quot;#content&quot;</span>)<span class="op">;</span></span>
<span id="cb56-12"><a href="prerequisites.html#cb56-12"></a></span>
<span id="cb56-13"><a href="prerequisites.html#cb56-13"></a>    <span class="va">console</span>.<span class="at">log</span>(x <span class="op">==</span> y)<span class="op">;</span> <span class="co">// true</span></span>
<span id="cb56-14"><a href="prerequisites.html#cb56-14"></a></span>
<span id="cb56-15"><a href="prerequisites.html#cb56-15"></a>    <span class="co">// select by class</span></span>
<span id="cb56-16"><a href="prerequisites.html#cb56-16"></a>    <span class="kw">var</span> z <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&quot;.stuff&quot;</span>)<span class="op">;</span></span>
<span id="cb56-17"><a href="prerequisites.html#cb56-17"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb56-18"><a href="prerequisites.html#cb56-18"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>Getting elements from the DOM is a very common operation in JavaScript. While a class can be applied to multiple elements which is useful to get and apply actions to multiple elements, the id attribute must be unique (no two elements can bear the same id in the HTML document) is useful to retrieve a specific element.</p>
<p>Interestingly some of that mechanism is used by shiny to retrieve and manipulate inputs, the argument <code>inputId</code> of shiny inputs effectively define the HTML <code>id</code> attribute of said input. Shiny can then internally make use of functions the likes of <code>getElementById</code> in order to get those inputs, set or update their values, etc.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="prerequisites.html#cb57-1"></a>shiny<span class="op">::</span><span class="kw">actionButton</span>(<span class="dt">inputId =</span> <span class="st">&quot;theId&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;the label&quot;</span>) </span></code></pre></div>
<button id="theId" type="button" class="btn btn-default action-button">the label</button>
<p>This of course only scratches the surface of JavaScript thus this provides ample understanding of the language to keep up with the next chapters. Also, a somewhat interesting fact that will prove useful later in the book: the RStudio IDE is actually a browser, therefore, in the IDE, one can right-click and “inspect element” to view the rendered source code.</p>

</div>
</div>
</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-shiny">
<p>Chang, Winston, Joe Cheng, JJ Allaire, Yihui Xie, and Jonathan McPherson. 2020. <em>Shiny: Web Application Framework for R</em>. <a href="https://CRAN.R-project.org/package=shiny">https://CRAN.R-project.org/package=shiny</a>.</p>
</div>
<div id="ref-R-jsonlite">
<p>Ooms, Jeroen. 2020. <em>Jsonlite: A Robust, High Performance Json Parser and Generator for R</em>. <a href="https://CRAN.R-project.org/package=jsonlite">https://CRAN.R-project.org/package=jsonlite</a>.</p>
</div>
<div id="ref-R-stringr">
<p>Wickham, Hadley. 2019. <em>Stringr: Simple, Consistent Wrappers for Common String Operations</em>. <a href="https://CRAN.R-project.org/package=stringr">https://CRAN.R-project.org/package=stringr</a>.</p>
</div>
<div id="ref-R-usethis">
<p>Wickham, Hadley, and Jennifer Bryan. 2020. <em>Usethis: Automate Package and Project Setup</em>. <a href="https://CRAN.R-project.org/package=usethis">https://CRAN.R-project.org/package=usethis</a>.</p>
</div>
<div id="ref-R-roxygen2">
<p>Wickham, Hadley, Peter Danenberg, Gábor Csárdi, and Manuel Eugster. 2020. <em>Roxygen2: In-Line Documentation for R</em>.</p>
</div>
<div id="ref-R-devtools">
<p>Wickham, Hadley, Jim Hester, and Winston Chang. 2020. <em>Devtools: Tools to Make Developing R Packages Easier</em>. <a href="https://CRAN.R-project.org/package=devtools">https://CRAN.R-project.org/package=devtools</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-widgets.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JohnCoene/javascript-for-r/edit/master/1-02-basics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
