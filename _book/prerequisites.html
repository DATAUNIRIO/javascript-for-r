<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Prerequisites | JavaScript for R</title>
  <meta name="description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Prerequisites | JavaScript for R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="github-repo" content="JohnCoene/javascript-for-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Prerequisites | JavaScript for R" />
  
  <meta name="twitter:description" content="Invite JavaScript into your Data Science workflow." />
  

<meta name="author" content="John Coene" />


<meta name="date" content="2020-08-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="basics.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block/empty-anchor.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>
<script src="libs/core-js/shim.min.js"></script>
<script src="libs/react/react.min.js"></script>
<script src="libs/react/react-dom.min.js"></script>
<script src="libs/reactwidget/react-tools.js"></script>
<script src="libs/reactable-binding/reactable.js"></script>
<script src="libs/r2d3-render/r2d3-render.js"></script>
<script src="libs/webcomponents/webcomponents.js"></script>
<script src="libs/r2d3-binding/r2d3.js"></script>
<script src="libs/d3v5/d3.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">JavaScript for R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#premise"><i class="fa fa-check"></i>Premise</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
</ul></li>
<li class="part"><span><b>I Basics &amp; Roadmap</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#rationale"><i class="fa fa-check"></i>Rationale</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#methods"><i class="fa fa-check"></i>Methods</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#v8"><i class="fa fa-check"></i>V8</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#htmlwidgets"><i class="fa fa-check"></i>htmlwidgets</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#shiny"><i class="fa fa-check"></i>Shiny</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#bubble"><i class="fa fa-check"></i>bubble</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#methods-amiss"><i class="fa fa-check"></i>Methods Amiss</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#reactr"><i class="fa fa-check"></i>reactR</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#r2d3"><i class="fa fa-check"></i>r2d3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>2</b> Prerequisites</a>
<ul>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#package-development"><i class="fa fa-check"></i>Package Development</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#json"><i class="fa fa-check"></i>JSON</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i>JavaScript</a></li>
</ul></li>
<li class="part"><span><b>II Data Visualisation</b></span></li>
<li class="chapter" data-level="3" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>3</b> Basics</a>
<ul>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#candidate-libraries"><i class="fa fa-check"></i>Candidate Libraries</a>
<ul>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#plotly"><i class="fa fa-check"></i>Plotly</a></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#highchart.js"><i class="fa fa-check"></i>Highchart.js</a></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#chart.js"><i class="fa fa-check"></i>Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#how-it-works"><i class="fa fa-check"></i>How it works</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="your-first-widget.html"><a href="your-first-widget.html"><i class="fa fa-check"></i><b>4</b> Your First Widget</a>
<ul>
<li class="chapter" data-level="" data-path="your-first-widget.html"><a href="your-first-widget.html#the-scaffold"><i class="fa fa-check"></i>The Scaffold</a></li>
<li class="chapter" data-level="" data-path="your-first-widget.html"><a href="your-first-widget.html#the-output"><i class="fa fa-check"></i>The Output</a></li>
<li class="chapter" data-level="" data-path="your-first-widget.html"><a href="your-first-widget.html#javascript-side"><i class="fa fa-check"></i>JavaScript-side</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html"><i class="fa fa-check"></i><b>5</b> A Realistic Widget</a>
<ul>
<li class="chapter" data-level="" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#dependency"><i class="fa fa-check"></i>Dependency</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i>JavaScript</a></li>
<li class="chapter" data-level="" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#html-element"><i class="fa fa-check"></i>HTML Element</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="the-full-monty.html"><a href="the-full-monty.html"><i class="fa fa-check"></i><b>6</b> The Full Monty</a>
<ul>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i>Dependencies</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i>JavaScript</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#working-with-data"><i class="fa fa-check"></i>Working with Data</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#transforming-data"><i class="fa fa-check"></i>Transforming Data</a>
<ul>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#in-javascript"><i class="fa fa-check"></i>In JavaScript</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#in-r"><i class="fa fa-check"></i>In R</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#pros-cons"><i class="fa fa-check"></i>Pros &amp; Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#on-print"><i class="fa fa-check"></i>On Print</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>7</b> Advanced Topics</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#shared-variables"><i class="fa fa-check"></i>Shared Variables</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#sizing"><i class="fa fa-check"></i>Sizing</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#sizing-policy"><i class="fa fa-check"></i>Sizing Policy</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#resizing"><i class="fa fa-check"></i>Resizing</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#pre-render-hooks-security"><i class="fa fa-check"></i>Pre Render Hooks &amp; Security</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i>JavaScript Code</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#prepend-append-content"><i class="fa fa-check"></i>Prepend &amp; Append Content</a></li>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i>Dependencies</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#compatibility"><i class="fa fa-check"></i>Compatibility</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#unit-tests"><i class="fa fa-check"></i>Unit Tests</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#performances"><i class="fa fa-check"></i>Performances</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="working-with-shiny.html"><a href="working-with-shiny.html"><i class="fa fa-check"></i><b>8</b> Working with Shiny</a>
<ul>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#javascript-to-r"><i class="fa fa-check"></i>JavaScript to R</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#input-handler"><i class="fa fa-check"></i>Input Handler</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#r-to-javascript"><i class="fa fa-check"></i>R to JavaScript</a>
<ul>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#send-data"><i class="fa fa-check"></i>Send Data</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#retrieve-widget-instance"><i class="fa fa-check"></i>Retrieve Widget Instance</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#handle-data"><i class="fa fa-check"></i>Handle Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#proxy-function"><i class="fa fa-check"></i>Proxy Function</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#clear-data"><i class="fa fa-check"></i>Clear Data</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#update"><i class="fa fa-check"></i>Update</a></li>
</ul></li>
<li class="part"><span><b>III Web Development with Shiny</b></span></li>
<li class="chapter" data-level="9" data-path="discover.html"><a href="discover.html"><i class="fa fa-check"></i><b>9</b> Discover</a>
<ul>
<li class="chapter" data-level="" data-path="discover.html"><a href="discover.html#static-files"><i class="fa fa-check"></i>Static Files</a></li>
<li class="chapter" data-level="" data-path="discover.html"><a href="discover.html#example---alerts"><i class="fa fa-check"></i>Example - Alerts</a></li>
<li class="chapter" data-level="" data-path="discover.html"><a href="discover.html#from-r-to-javascript"><i class="fa fa-check"></i>From R to JavaScript</a></li>
<li class="chapter" data-level="" data-path="discover.html"><a href="discover.html#from-javascript-to-r"><i class="fa fa-check"></i>From JavaScript to R</a></li>
<li class="chapter" data-level="" data-path="discover.html"><a href="discover.html#deserialise"><i class="fa fa-check"></i>Deserialise</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="a-complete-integration.html"><a href="a-complete-integration.html"><i class="fa fa-check"></i><b>10</b> A Complete Integration</a>
<ul>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#serialisation"><i class="fa fa-check"></i>Serialisation</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#events-callbacks"><i class="fa fa-check"></i>Events &amp; Callbacks</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#as-a-package"><i class="fa fa-check"></i>As a Package</a>
<ul>
<li class="chapter" data-level="" data-path="the-full-monty.html"><a href="the-full-monty.html#dependencies"><i class="fa fa-check"></i>Dependencies</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#r-code"><i class="fa fa-check"></i>R Code</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i>JavaScript Code</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#input-handler"><i class="fa fa-check"></i>Input Handler</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#wrapping-up"><i class="fa fa-check"></i>Wrapping up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tips-tricks.html"><a href="tips-tricks.html"><i class="fa fa-check"></i><b>11</b> Tips &amp; Tricks</a>
<ul>
<li class="chapter" data-level="" data-path="tips-tricks.html"><a href="tips-tricks.html#shiny-events"><i class="fa fa-check"></i>Shiny Events</a></li>
<li class="chapter" data-level="" data-path="tips-tricks.html"><a href="tips-tricks.html#table-buttons"><i class="fa fa-check"></i>Table Buttons</a></li>
<li class="chapter" data-level="" data-path="tips-tricks.html"><a href="tips-tricks.html#jquery---toggle"><i class="fa fa-check"></i>jQuery - Toggle</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="custom-outputs.html"><a href="custom-outputs.html"><i class="fa fa-check"></i><b>12</b> Custom Outputs</a>
<ul>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#inner-workings"><i class="fa fa-check"></i>Inner-workings</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#discover-lena.js"><i class="fa fa-check"></i>Discover Lena.js</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#output"><i class="fa fa-check"></i>Output</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#render"><i class="fa fa-check"></i>Render</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#javascript-binding"><i class="fa fa-check"></i>JavaScript Binding</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#test"><i class="fa fa-check"></i>Test</a></li>
</ul></li>
<li class="part"><span><b>IV JavaScript for Computations</b></span></li>
<li class="chapter" data-level="13" data-path="the-v8-engine.html"><a href="the-v8-engine.html"><i class="fa fa-check"></i><b>13</b> The V8 Engine</a>
<ul>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#external-libraries"><i class="fa fa-check"></i>External Libraries</a></li>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#with-npm"><i class="fa fa-check"></i>With Npm</a></li>
<li class="chapter" data-level="" data-path="the-v8-engine.html"><a href="the-v8-engine.html#use-in-packages"><i class="fa fa-check"></i>Use in Packages</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="node.html"><a href="node.html"><i class="fa fa-check"></i><b>14</b> Node.js with Bubble</a>
<ul>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="node.html"><a href="node.html#r-markdown-engine"><i class="fa fa-check"></i>R Markdown Engine</a></li>
<li class="chapter" data-level="" data-path="node.html"><a href="node.html#npm"><i class="fa fa-check"></i>Npm</a></li>
</ul></li>
<li class="part"><span><b>V Examples</b></span></li>
<li class="chapter" data-level="15" data-path="ploty.html"><a href="ploty.html"><i class="fa fa-check"></i><b>15</b> Ploty</a>
<ul>
<li class="chapter" data-level="" data-path="discover.html"><a href="discover.html#discover"><i class="fa fa-check"></i>Discover</a></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#javascript-to-r"><i class="fa fa-check"></i>JavaScript to R</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#r-to-javascript"><i class="fa fa-check"></i>R to JavaScript</a></li>
<li class="chapter" data-level="" data-path="ploty.html"><a href="ploty.html#size-resize"><i class="fa fa-check"></i>Size &amp; Resize</a></li>
<li class="chapter" data-level="" data-path="ploty.html"><a href="ploty.html#performance-security"><i class="fa fa-check"></i>Performance &amp; Security</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="image-classifier.html"><a href="image-classifier.html"><i class="fa fa-check"></i><b>16</b> Image Classifier</a>
<ul>
<li class="chapter" data-level="" data-path="discover.html"><a href="discover.html#discover"><i class="fa fa-check"></i>Discover</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i>JavaScript</a></li>
<li class="chapter" data-level="" data-path="working-with-shiny.html"><a href="working-with-shiny.html#input-handler"><i class="fa fa-check"></i>Input Handler</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="progress-bar.html"><a href="progress-bar.html"><i class="fa fa-check"></i><b>17</b> Progress Bar</a>
<ul>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#r-code"><i class="fa fa-check"></i>R code</a></li>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#javascript-code"><i class="fa fa-check"></i>JavaScript code</a></li>
<li class="chapter" data-level="" data-path="progress-bar.html"><a href="progress-bar.html#events"><i class="fa fa-check"></i>Events</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>18</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="" data-path="a-realistic-widget.html"><a href="a-realistic-widget.html#dependency"><i class="fa fa-check"></i>Dependency</a></li>
<li class="chapter" data-level="" data-path="machine-learning.html"><a href="machine-learning.html#simple-regression"><i class="fa fa-check"></i>Simple Regression</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="cookies.html"><a href="cookies.html"><i class="fa fa-check"></i><b>19</b> Cookies</a>
<ul>
<li class="chapter" data-level="" data-path="cookies.html"><a href="cookies.html#discover-js-cookie"><i class="fa fa-check"></i>Discover js-cookie</a></li>
<li class="chapter" data-level="" data-path="custom-outputs.html"><a href="custom-outputs.html#setup"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#javascript"><i class="fa fa-check"></i>JavaScript</a></li>
<li class="chapter" data-level="" data-path="a-complete-integration.html"><a href="a-complete-integration.html#r-code"><i class="fa fa-check"></i>R Code</a></li>
</ul></li>
<li class="part"><span><b>VI Closing Remarks</b></span></li>
<li class="chapter" data-level="20" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>20</b> Conclusion</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-topics.html"><a href="advanced-topics.html#performances"><i class="fa fa-check"></i>Performances</a></li>
<li class="chapter" data-level="" data-path="conclusion.html"><a href="conclusion.html#road-ahead"><i class="fa fa-check"></i>Road ahead</a>
<ul>
<li class="chapter" data-level="" data-path="conclusion.html"><a href="conclusion.html#computation"><i class="fa fa-check"></i>Computation</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#shiny"><i class="fa fa-check"></i>Shiny</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#htmlwidgets"><i class="fa fa-check"></i>htmlwidgets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">JavaScript for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="prerequisites" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Prerequisites</h1>
<p>The code contained in the following pages is approachable to readers with basic knowledge of R, but familiarity with package development using <a href="https://devtools.r-lib.org/">devtools</a> <span class="citation">(Wickham, Hester, and Chang <a href="#ref-R-devtools" role="doc-biblioref">2020</a>)</span>, the <a href="https://shiny.rstudio.com/">Shiny</a> framework <span class="citation">(Chang et al. <a href="#ref-R-shiny" role="doc-biblioref">2020</a>)</span>, the JSON data format, and JavaScript is essential. The reason for the former is that some of the ways one builds integrations with JavaScript naturally take the form of R packages. Also, R packages make sharing code, datasets, and anything else R-related extremely convenient, they come with a relatively strict structure, the ability to run unit tests, and much more. These have thus become a core feature of the R ecosystem and therefore are also used extensively in the book as we create several packages. The following section thus runs over the essentials of building a package to ensure everyone can keep up. Then we briefly go through the JSON data format as it will be used to a great extent to communicate between R and JavaScript. As both Shiny and JavaScript run in the browser they make for axiomatic companions; we’ll therefore use Shiny extensively. Only basic knowledge of JavaScript is required but a good understanding of JSON and HTML, however, is essential.</p>
<p>It is highly recommended to use the freely available <a href="https://rstudio.com/products/rstudio/">RStudio IDE</a> to follow along as it makes a lot of things easier down the line.</p>
<div id="package-development" class="section level3 unnumbered" number="">
<h3>Package Development</h3>
<p>Developing packages used to be notoriously difficult but things have greatly changed, namely thanks to the devtools, roxygen2 <span class="citation">(Wickham, Danenberg, et al. <a href="#ref-R-roxygen2" role="doc-biblioref">2020</a>)</span> and more recent <a href="https://usethis.r-lib.org/">usethis</a> <span class="citation">(Wickham and Bryan <a href="#ref-R-usethis" role="doc-biblioref">2020</a>)</span> packages. The first is specifically designed to help creating packages; setting up tests, running checks, building and installing packages, etc. The second provides an all too convenient way to generate the documentation of packages, and usethis, more broadly helps setting up projects, and automating repetitive tasks. Here, we only skim over the fundamentals, there is an entire book by Hadley Wickham called <a href="http://r-pkgs.had.co.nz/">R Packages</a> solely dedicated to the topic.</p>
<p>Start by installing those packages from CRAN.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="prerequisites.html#cb11-1"></a><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;devtools&quot;</span>, <span class="st">&quot;usethis&quot;</span>))</span></code></pre></div>
<p>We’ll create an admittedly ridiculous package to explain how it works. Despite being useless, this package will introduce certain concepts of package development that are essential to understand for what is following. The package will be named “test” and will provide a single function that will print a JavaScript file stored inside the package. Useless but bear with it.</p>
<p>Let’s create the package, either do so using the RStudio IDE or with usethis. From the RStudio IDE go to <code>File &gt; New Project &gt; New Directory</code> then select “R package” and fill in the small form. But it could be argued that it’s actually easier with usethis; type the code below in your R console to create a package named “test” in your current directory. If you run it from RStudio a new project window should open.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="prerequisites.html#cb12-1"></a>usethis<span class="op">::</span><span class="kw">create_package</span>(<span class="st">&quot;test&quot;</span>)</span></code></pre></div>
<p>This creates an empty package called “test”. Let’s add the JavaScript file that the yet-to-be-written R function will eventually print out. R packages must follow strict rules, this file cannot be placed anywhere we want; it must be stored in a directory called <code>inst</code> which stands for “installation;” these are files that will simply be copied to the users’ machine when they install your package. Create the <code>inst</code> directory in the root of the package (e.g.: where the <code>R</code> folder is located) and place a file called <code>javascript.js</code> within it.</p>
<p>Let’s create the following, extremely simple JavaScript file that contains code which declares a variable named <code>x</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb13-1"><a href="prerequisites.html#cb13-1"></a><span class="co">// inst/javascript.js</span></span>
<span id="cb13-2"><a href="prerequisites.html#cb13-2"></a><span class="kw">var</span> x <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span></code></pre></div>
<p>This can all be done from the R console as shown below.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="prerequisites.html#cb14-1"></a><span class="kw">dir.create</span>(<span class="st">&quot;inst&quot;</span>) <span class="co"># create directory</span></span>
<span id="cb14-2"><a href="prerequisites.html#cb14-2"></a><span class="kw">writeLines</span>(<span class="st">&quot;var x = 3;&quot;</span>, <span class="dt">con =</span> <span class="st">&quot;inst/javascript.js&quot;</span>) <span class="co"># create file</span></span></code></pre></div>
<p>At this point the package should look something like this.</p>
<pre><code>.
├── DESCRIPTION
├── NAMESPACE
├── R
└── inst
    └── javascript.js</code></pre>
<p>Onto creating the R function that will read and print this file. Then again, R is strict, R files must be placed in the <code>R</code> directory. This can also be done from the console or the RStudio IDE.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="prerequisites.html#cb16-1"></a><span class="co"># create the file from the R console</span></span>
<span id="cb16-2"><a href="prerequisites.html#cb16-2"></a><span class="kw">file.create</span>(<span class="st">&quot;R/function.R&quot;</span>)</span></code></pre></div>
<p>In the <code>function.R</code> file we just created we place a function that reads the <code>javascript.js</code> file and prints it to the R console. In order to read the file one needs to locate it, as packages are destined to be shared and installed on different machines one can never use absolute paths, where the <code>javascript.js</code> file is located will depend on where the user has installed the package: as the developer you can never know that for sure. Therefore R comes with a <code>system.file</code> function which will look for a file <em>relative to a package <code>inst</code> directory</em> and return its full path.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="prerequisites.html#cb17-1"></a><span class="co"># R/function.R</span></span>
<span id="cb17-2"><a href="prerequisites.html#cb17-2"></a>print_file &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb17-3"><a href="prerequisites.html#cb17-3"></a>  <span class="co"># look for javascript.js in the inst folder of the test package</span></span>
<span id="cb17-4"><a href="prerequisites.html#cb17-4"></a>  file &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;javascript.js&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;test&quot;</span>)</span>
<span id="cb17-5"><a href="prerequisites.html#cb17-5"></a>}</span></code></pre></div>
<p>With the file path one can read the contents of the <code>file</code> and print it.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="prerequisites.html#cb18-1"></a>print_file &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb18-2"><a href="prerequisites.html#cb18-2"></a>  file &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;javascript.js&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;test&quot;</span>)</span>
<span id="cb18-3"><a href="prerequisites.html#cb18-3"></a>  content &lt;-<span class="st"> </span><span class="kw">readLines</span>(file)</span>
<span id="cb18-4"><a href="prerequisites.html#cb18-4"></a>  <span class="kw">print</span>(content)</span>
<span id="cb18-5"><a href="prerequisites.html#cb18-5"></a>}</span></code></pre></div>
<p>Let’s add a pretty message, using the <a href="https://cli.r-lib.org/">cli</a> <span class="citation">(Csárdi <a href="#ref-R-cli" role="doc-biblioref">2020</a>)</span> package, before we print the file as it allows introducing another concept; importing external libraries in a package. To use cli we can run:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="prerequisites.html#cb19-1"></a><span class="co"># install.packages(&quot;cli&quot;)</span></span>
<span id="cb19-2"><a href="prerequisites.html#cb19-2"></a>usethis<span class="op">::</span><span class="kw">use_package</span>(<span class="st">&quot;cli&quot;</span>)</span>
<span id="cb19-3"><a href="prerequisites.html#cb19-3"></a><span class="co">## ✔ Adding &#39;cli&#39; to Imports field in DESCRIPTION</span></span>
<span id="cb19-4"><a href="prerequisites.html#cb19-4"></a><span class="co">## ● Refer to functions with `cli::fun()`</span></span></code></pre></div>
<p>It does exactly what it printed in the console. The <code>DESCRIPTION</code> file includes information about the package and, very importantly, dependencies. The package we are creating will depend on the cli package; the <code>DESCRIPTION</code> file essentially tells R to check whether it is installed on the machine, if not it installs it (packages are for sharing). You should now see the following entry in the <code>DESCRIPTION</code> file.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="prerequisites.html#cb20-1"></a>Imports<span class="op">:</span><span class="st"> </span></span>
<span id="cb20-2"><a href="prerequisites.html#cb20-2"></a><span class="st">    </span>cli</span></code></pre></div>
<p>We can add cli to the function, note that we use the namespace (or package name) followed by a double colon, as was printed by the <code>usethis::use_package</code> function we ran earlier.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="prerequisites.html#cb21-1"></a>print_file &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb21-2"><a href="prerequisites.html#cb21-2"></a>  file &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;javascript.js&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;test&quot;</span>)</span>
<span id="cb21-3"><a href="prerequisites.html#cb21-3"></a>  cli<span class="op">::</span><span class="kw">cli_alert_info</span>(<span class="st">&quot;JavaScript code below.&quot;</span>)</span>
<span id="cb21-4"><a href="prerequisites.html#cb21-4"></a>  content &lt;-<span class="st"> </span><span class="kw">readLines</span>(file)</span>
<span id="cb21-5"><a href="prerequisites.html#cb21-5"></a>  <span class="kw">print</span>(content)</span>
<span id="cb21-6"><a href="prerequisites.html#cb21-6"></a>}</span></code></pre></div>
<p>It’s not done just yet. Let’s demonstrate why: it allows introducing devtools. We can install the “test” package we created with <code>devtools::install()</code>, afterwards we would expect to be able to run the <code>print_file</code> function from the package test but doing so returns the following error: <code>could not find function "print_file"</code>. This is because we have not explicitly “exported” the function, by default functions and objects declared in <code>.R</code> files (in packages) can only be used internally (within the package itself). In order to export it we need another package called roxygen2, it allows writing the documentation in the <code>.R</code> file rather than have to create a separate <code>.Rd</code> file, a lifesaver. Note that roxygen2 should already be installed as it is a dependency of devtools. Using said documentation we can specify which function should be exported with a “tag”.</p>
<p>Tags are preceded by a special comment <code>#'</code> and the tags themselves are defined with <code>@</code>, there are plenty of them, we don’t explore any other in this book.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="prerequisites.html#cb22-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb22-2"><a href="prerequisites.html#cb22-2"></a>print_file &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb22-3"><a href="prerequisites.html#cb22-3"></a>  file &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;javascript.js&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;test&quot;</span>)</span>
<span id="cb22-4"><a href="prerequisites.html#cb22-4"></a>  cli<span class="op">::</span><span class="kw">cli_alert_info</span>(<span class="st">&quot;JavaScript code below.&quot;</span>)</span>
<span id="cb22-5"><a href="prerequisites.html#cb22-5"></a>  content &lt;-<span class="st"> </span><span class="kw">readLines</span>(file)</span>
<span id="cb22-6"><a href="prerequisites.html#cb22-6"></a>  <span class="kw">print</span>(content)</span>
<span id="cb22-7"><a href="prerequisites.html#cb22-7"></a>}</span></code></pre></div>
<p>Now one can run <code>devtools::document()</code> to generate the documentation of the package (the <code>.Rd</code> files) using the export tag we added: this exports the function by adding <code>export(print_file)</code> to the <code>NAMESPACE</code> file, which you should not edit yourself. Then we can run <code>devtools::install()</code> to build and install the package.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="prerequisites.html#cb23-1"></a>test<span class="op">::</span><span class="kw">print_file</span>()</span></code></pre></div>
<pre><code>## ℹ JavaScript code below.</code></pre>
<pre><code>## [1] &quot;var x = 3;&quot;</code></pre>
<p>Finally, the cyclical nature of building packages substitute <code>devtools::install()</code> with <code>devtools::load_all()</code>, the latter does not install the package and simply loads all the functions and objects of the package in the environment, this is much faster than installing it.</p>
<ol style="list-style-type: decimal">
<li>Write some code</li>
<li>Run <code>devtools::document()</code> (not necessary if documentation tags have not changed)</li>
<li>Run <code>devtools::load_all()</code></li>
<li>Repeat</li>
</ol>
<p>Note the package we built is good enough for your own machine but won’t pass CRAN checks as we miss a lot of the documentation (roxygen2 tags).</p>
</div>
<div id="json" class="section level3 unnumbered" number="">
<h3>JSON</h3>
<p>JSON (JavaScript Object Notation) is a very popular data <em>interchange</em> format with which we will work extensively throughout this book, it is thus crucial that we have a good understanding of it before we plunge into the nitty-gritty. As one might foresee, if we want two languages to work together it is essential that we have a data format that can be understood by both—JSON lets us harmoniously pass data from one to the other. While it is natively supported in JavaScript, it can be graciously handled in R with the <a href="https://CRAN.R-project.org/package=jsonlite">jsonlite package</a> <span class="citation">(Ooms <a href="#ref-R-jsonlite" role="doc-biblioref">2020</a>)</span>, in fact it is the serialiser used internally by all the packages we shall explore in this book.</p>
<p>JSON is to all intents and purposes the equivalent of lists in R; a flexible data format that can store pretty much anything. Below we create a nested list and convert it to JSON with the help of jsonlite, we set <code>pretty</code> to <code>TRUE</code> to add indentation for clearer printing but this is an argument you should omit when writing production code, it will reduce the file size (fewer spaces = smaller file size).</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="prerequisites.html#cb26-1"></a><span class="co"># install.packages(&quot;jsonlite&quot;)</span></span>
<span id="cb26-2"><a href="prerequisites.html#cb26-2"></a><span class="kw">library</span>(jsonlite)</span>
<span id="cb26-3"><a href="prerequisites.html#cb26-3"></a></span>
<span id="cb26-4"><a href="prerequisites.html#cb26-4"></a>lst &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb26-5"><a href="prerequisites.html#cb26-5"></a>  <span class="dt">a =</span> <span class="dv">1</span>,</span>
<span id="cb26-6"><a href="prerequisites.html#cb26-6"></a>  <span class="dt">b =</span> <span class="kw">list</span>(</span>
<span id="cb26-7"><a href="prerequisites.html#cb26-7"></a>    <span class="dt">c =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)</span>
<span id="cb26-8"><a href="prerequisites.html#cb26-8"></a>  ),</span>
<span id="cb26-9"><a href="prerequisites.html#cb26-9"></a>  <span class="dt">d =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb26-10"><a href="prerequisites.html#cb26-10"></a>)</span>
<span id="cb26-11"><a href="prerequisites.html#cb26-11"></a></span>
<span id="cb26-12"><a href="prerequisites.html#cb26-12"></a><span class="kw">toJSON</span>(lst, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## {
##   &quot;a&quot;: [1],
##   &quot;b&quot;: {
##     &quot;c&quot;: [&quot;A&quot;, &quot;B&quot;]
##   },
##   &quot;d&quot;: [1, 2, 3, 4, 5]
## }</code></pre>
<p>Looking closely at the list and JSON output above one quickly sees the resemblance. Something seems odd though, the first value in the list (<code>a = 1</code>) was serialised to an array (vector) of length one (<code>"a": [1]</code>) where one would probably expect an integer instead, <code>1</code> not <code>[1]</code>. This is not a mistake, we often forget that there are no scalar types in R and that <code>a</code> is in fact a vector as we can observe below.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="prerequisites.html#cb28-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb28-2"><a href="prerequisites.html#cb28-2"></a><span class="kw">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="prerequisites.html#cb30-1"></a><span class="kw">is.vector</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>JavaScript, on the other hand, does have scalar types, more often than not we will want to convert the vectors of length one to scalar types rather than arrays of length one. To do so we need use the <code>auto_unbox</code> argument in <code>jsonlite::toJSON</code>, we’ll do this most of the time we have to convert data to JSON.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="prerequisites.html#cb32-1"></a><span class="kw">toJSON</span>(lst, <span class="dt">pretty =</span> <span class="ot">TRUE</span>, <span class="dt">auto_unbox =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## {
##   &quot;a&quot;: 1,
##   &quot;b&quot;: {
##     &quot;c&quot;: [&quot;A&quot;, &quot;B&quot;]
##   },
##   &quot;d&quot;: [1, 2, 3, 4, 5]
## }</code></pre>
<p>As demonstrated above the vector of length one was “unboxed” into an integer, with <code>auto_unbox</code> set to <code>TRUE</code> jsonlite will properly convert such vectors into their appropriate type; integer, numeric, boolean, etc. Note that this only applies to vectors, lists of length one will be serialised to arrays of length one even with <code>auto_unbox</code> turned on: <code>list("hello")</code> will always be converted to <code>["hello"]</code>.</p>
<p>If JSON is more or less the equivalent of lists in R one might wonder how jsonlite handles dataframes since they do not exist in JavaScript.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="prerequisites.html#cb34-1"></a><span class="co"># subset of built-in dataset</span></span>
<span id="cb34-2"><a href="prerequisites.html#cb34-2"></a>df &lt;-<span class="st"> </span>cars[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ]</span>
<span id="cb34-3"><a href="prerequisites.html#cb34-3"></a></span>
<span id="cb34-4"><a href="prerequisites.html#cb34-4"></a><span class="kw">toJSON</span>(df, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [
##   {
##     &quot;speed&quot;: 4,
##     &quot;dist&quot;: 2
##   },
##   {
##     &quot;speed&quot;: 4,
##     &quot;dist&quot;: 10
##   }
## ]</code></pre>
<p>What jsonlite does internally is essentially turn the data.frame into a list <em>rowwise</em> to produce a sub-list for every row then it serialises to JSON. This is generally how rectangular data is represented in lists, for instance, <code>purrr::transpose</code> does the same. We can reproduce this with the snippet below, we remove row names and use apply to turn every row into a list.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="prerequisites.html#cb36-1"></a><span class="kw">row.names</span>(df) &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb36-2"><a href="prerequisites.html#cb36-2"></a>df_list &lt;-<span class="st"> </span><span class="kw">apply</span>(df, <span class="dv">1</span>, as.list)</span>
<span id="cb36-3"><a href="prerequisites.html#cb36-3"></a></span>
<span id="cb36-4"><a href="prerequisites.html#cb36-4"></a><span class="kw">toJSON</span>(df_list, <span class="dt">pretty =</span> <span class="ot">TRUE</span>, <span class="dt">auto_unbox =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [
##   {
##     &quot;speed&quot;: 4,
##     &quot;dist&quot;: 2
##   },
##   {
##     &quot;speed&quot;: 4,
##     &quot;dist&quot;: 10
##   }
## ]</code></pre>
<p>Jsonlite of course also enables reading data from JSON into R with the function <code>fromJSON</code>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="prerequisites.html#cb38-1"></a>json &lt;-<span class="st"> </span><span class="kw">toJSON</span>(df) <span class="co"># convert to JSON</span></span>
<span id="cb38-2"><a href="prerequisites.html#cb38-2"></a><span class="kw">fromJSON</span>(json) <span class="co"># read from JSON</span></span></code></pre></div>
<pre><code>##   speed dist
## 1     4    2
## 2     4   10</code></pre>
<p>It’s important to note that jsonlite did the conversion back to a data frame. Therefore the code below also returns a data frame even though the object we initially converted to JSON is a list.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="prerequisites.html#cb40-1"></a><span class="kw">class</span>(df_list)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="prerequisites.html#cb42-1"></a>json &lt;-<span class="st"> </span><span class="kw">toJSON</span>(df_list)</span>
<span id="cb42-2"><a href="prerequisites.html#cb42-2"></a><span class="kw">fromJSON</span>(json)</span></code></pre></div>
<pre><code>##   speed dist
## 1     4    2
## 2     4   10</code></pre>
<p>Jsonlite provides many more options and functions that will let you tune how JSON data is read and written. Also, the jsonlite package does far more than what we detailed in this section but at this juncture this is an adequate understanding of things.</p>
</div>
<div id="javascript" class="section level3 unnumbered" number="">
<h3>JavaScript</h3>
<p>The book is not meant to teach one JavaScript, only to show how graciously it can work with R; in that endeavour we aim at writing little JavaScript so the book remains approachable to a wide audience. Let us just go through the very basics to ensure we know enough to get started with the next chapter.</p>
<p>In the event that you would want to try what we briefly explore here: the easiest way is to create an HTML file (e.g.: <code>index.html</code>), write your code within a script tag and open the file in your web browser. The output can be observed in the console of the browser which can be opened with a right click and selecting “inspect” then going to the “console” tab.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb44-1"><a href="prerequisites.html#cb44-1"></a> <span class="er">&lt;</span>!–– index.html ––&gt;</span>
<span id="cb44-2"><a href="prerequisites.html#cb44-2"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb44-3"><a href="prerequisites.html#cb44-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb44-4"><a href="prerequisites.html#cb44-4"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb44-5"><a href="prerequisites.html#cb44-5"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb44-6"><a href="prerequisites.html#cb44-6"></a>    <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;content&quot;</span><span class="kw">&gt;</span>Trying JavaScript!<span class="kw">&lt;/p&gt;</span></span>
<span id="cb44-7"><a href="prerequisites.html#cb44-7"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb44-8"><a href="prerequisites.html#cb44-8"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb44-9"><a href="prerequisites.html#cb44-9"></a>    <span class="co">// place your JavaScript code here</span></span>
<span id="cb44-10"><a href="prerequisites.html#cb44-10"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb44-11"><a href="prerequisites.html#cb44-11"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>The first difference with R is that the end of every line should be marked with a semi-colon. JavaScript code will often work without but one should always include them to avoid future headaches. Below we use <code>console.log</code>, JavaScript equivalent of R’s <code>print</code> function.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb45-1"><a href="prerequisites.html#cb45-1"></a><span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;hello JavaScript&quot;</span>) <span class="co">// bad</span></span>
<span id="cb45-2"><a href="prerequisites.html#cb45-2"></a><span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;hello JavaScript&quot;</span>)<span class="op">;</span> <span class="co">// good</span></span></code></pre></div>
<div class="figure">
<img src="images/javascript-intro.png" alt="" />
<p class="caption">Printing to the console</p>
</div>
<p>Another difference is that variables must be declared with keywords such as <code>var</code> or <code>const</code> to declare a constant.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb46-1"><a href="prerequisites.html#cb46-1"></a>x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// error</span></span>
<span id="cb46-2"><a href="prerequisites.html#cb46-2"></a><span class="kw">var</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// works</span></span></code></pre></div>
<p>One can declare a variable without assigning a value to it, to then do so later on.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb47-1"><a href="prerequisites.html#cb47-1"></a><span class="kw">var</span> y<span class="op">;</span> <span class="co">// declare </span></span>
<span id="cb47-2"><a href="prerequisites.html#cb47-2"></a>y <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span> <span class="co">// define it as array</span></span>
<span id="cb47-3"><a href="prerequisites.html#cb47-3"></a>y <span class="op">=</span> <span class="st">&#39;string&#39;</span><span class="op">;</span> <span class="co">// change to character string</span></span></code></pre></div>
<p>In R like in JavaScript, variables can be accessed from the parent environment (often referred to as “context” in the latter). One immense difference though is that while it is seen as bad practice in R it is not in JavaScript where it is extremely useful.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="prerequisites.html#cb48-1"></a><span class="co"># it works but don&#39;t do this in R</span></span>
<span id="cb48-2"><a href="prerequisites.html#cb48-2"></a>x &lt;-<span class="st"> </span><span class="dv">123</span></span>
<span id="cb48-3"><a href="prerequisites.html#cb48-3"></a>foo &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb48-4"><a href="prerequisites.html#cb48-4"></a>  <span class="kw">print</span>(x)</span>
<span id="cb48-5"><a href="prerequisites.html#cb48-5"></a>}</span>
<span id="cb48-6"><a href="prerequisites.html#cb48-6"></a><span class="kw">foo</span>()</span></code></pre></div>
<pre><code>## [1] 123</code></pre>
<p>The above R code can be re-written in JavaScript. Note the slight variation in the function declaration.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb50-1"><a href="prerequisites.html#cb50-1"></a><span class="co">// this is perfectly fine</span></span>
<span id="cb50-2"><a href="prerequisites.html#cb50-2"></a><span class="kw">var</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb50-3"><a href="prerequisites.html#cb50-3"></a></span>
<span id="cb50-4"><a href="prerequisites.html#cb50-4"></a><span class="kw">function</span> <span class="at">foo</span>()<span class="op">{</span></span>
<span id="cb50-5"><a href="prerequisites.html#cb50-5"></a>  <span class="va">console</span>.<span class="at">log</span>(x)<span class="op">;</span> <span class="co">// print to console</span></span>
<span id="cb50-6"><a href="prerequisites.html#cb50-6"></a><span class="op">}</span></span>
<span id="cb50-7"><a href="prerequisites.html#cb50-7"></a></span>
<span id="cb50-8"><a href="prerequisites.html#cb50-8"></a><span class="at">foo</span>()<span class="op">;</span></span></code></pre></div>
<p>One concept which does not exist in R is that of the “DOM” which stands for Document Object Model. When a web page is loaded, the browser creates a Document Object Model of the web page which can be accessed in JavaScript from the <code>document</code> object. This lets the developer programmatically manipulate the page itself so one can for instance, add an element (e.g.: a button), change the text of another, and plenty more.</p>
<p>The JavaScript code below grabs the element where <code>id='content'</code> from the <code>document</code> with <code>getElementById</code> and replaces the text (<code>innerText</code>). Even though the page only contains “Trying JavaScript!” when the page is opened (loaded) in the web browser JavaScript runs the code and changes it: this happens very fast so the original text cannot be seen.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb51-1"><a href="prerequisites.html#cb51-1"></a> <span class="er">&lt;</span>!–– index.html ––&gt;</span>
<span id="cb51-2"><a href="prerequisites.html#cb51-2"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb51-3"><a href="prerequisites.html#cb51-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb51-4"><a href="prerequisites.html#cb51-4"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb51-5"><a href="prerequisites.html#cb51-5"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb51-6"><a href="prerequisites.html#cb51-6"></a>    <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;content&quot;</span><span class="kw">&gt;</span>Trying JavaScript!<span class="kw">&lt;/p&gt;</span></span>
<span id="cb51-7"><a href="prerequisites.html#cb51-7"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb51-8"><a href="prerequisites.html#cb51-8"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb51-9"><a href="prerequisites.html#cb51-9"></a>    <span class="kw">var</span> cnt <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;content&quot;</span>)<span class="op">;</span></span>
<span id="cb51-10"><a href="prerequisites.html#cb51-10"></a>    <span class="va">cnt</span>.<span class="at">innerText</span> <span class="op">=</span> <span class="st">&quot;The text has changed&quot;</span><span class="op">;</span></span>
<span id="cb51-11"><a href="prerequisites.html#cb51-11"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb51-12"><a href="prerequisites.html#cb51-12"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>One final thing to note for future reference, though not limited to the ids or classes most such selection of elements from the DOM are done with those where the pound sign refers to an element’s id (<code>#id</code>) and a dot refers to an element’s class (<code>.class</code>), just like in CSS.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb52-1"><a href="prerequisites.html#cb52-1"></a> <span class="er">&lt;</span>!–– index.html ––&gt;</span>
<span id="cb52-2"><a href="prerequisites.html#cb52-2"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb52-3"><a href="prerequisites.html#cb52-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb52-4"><a href="prerequisites.html#cb52-4"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb52-5"><a href="prerequisites.html#cb52-5"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb52-6"><a href="prerequisites.html#cb52-6"></a>    <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;content&quot;</span><span class="ot"> class=</span><span class="st">&quot;stuff&quot;</span><span class="kw">&gt;</span>Trying JavaScript!<span class="kw">&lt;/p&gt;</span></span>
<span id="cb52-7"><a href="prerequisites.html#cb52-7"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb52-8"><a href="prerequisites.html#cb52-8"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb52-9"><a href="prerequisites.html#cb52-9"></a>    <span class="co">// select by id</span></span>
<span id="cb52-10"><a href="prerequisites.html#cb52-10"></a>    <span class="kw">var</span> x <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;content&quot;</span>)<span class="op">;</span></span>
<span id="cb52-11"><a href="prerequisites.html#cb52-11"></a>    <span class="kw">var</span> y <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&quot;#content&quot;</span>)<span class="op">;</span></span>
<span id="cb52-12"><a href="prerequisites.html#cb52-12"></a></span>
<span id="cb52-13"><a href="prerequisites.html#cb52-13"></a>    <span class="va">console</span>.<span class="at">log</span>(x <span class="op">==</span> y)<span class="op">;</span> <span class="co">// true</span></span>
<span id="cb52-14"><a href="prerequisites.html#cb52-14"></a></span>
<span id="cb52-15"><a href="prerequisites.html#cb52-15"></a>    <span class="co">// select by class</span></span>
<span id="cb52-16"><a href="prerequisites.html#cb52-16"></a>    <span class="kw">var</span> z <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&quot;.stuff&quot;</span>)<span class="op">;</span></span>
<span id="cb52-17"><a href="prerequisites.html#cb52-17"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb52-18"><a href="prerequisites.html#cb52-18"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>Getting elements from the DOM is a very common operation in JavaScript. While a class can be applied to multiple elements which is useful to get and apply actions to multiple elements, the id attribute must be unique (no two elements can bear the same id in the HTML document) is useful to retrieve a specific element.</p>
<p>Interestingly some of that mechanism is used by shiny to retrieve and manipulate inputs, the argument <code>inputId</code> of shiny inputs effectively define the HTML <code>id</code> attribute of said input. Shiny can then internally make use of functions the likes of <code>getElementById</code> in order to get those inputs, set or update their values, etc.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="prerequisites.html#cb53-1"></a>shiny<span class="op">::</span><span class="kw">actionButton</span>(<span class="dt">inputId =</span> <span class="st">&quot;theId&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;the label&quot;</span>) </span></code></pre></div>
<button id="theId" type="button" class="btn btn-default action-button">the label</button>
<p>This of course only scratches the surface of JavaScript thus this provides ample understanding of the language to keep up with the next chapters. Also, a somewhat interesting fact that will prove useful later in the book: the RStudio IDE is actually a browser, therefore, in the IDE, one can right-click and “inspect element” to view the rendered source code.</p>

</div>
</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-shiny">
<p>Chang, Winston, Joe Cheng, JJ Allaire, Yihui Xie, and Jonathan McPherson. 2020. <em>Shiny: Web Application Framework for R</em>. <a href="https://CRAN.R-project.org/package=shiny">https://CRAN.R-project.org/package=shiny</a>.</p>
</div>
<div id="ref-R-cli">
<p>Csárdi, Gábor. 2020. <em>Cli: Helpers for Developing Command Line Interfaces</em>. <a href="https://CRAN.R-project.org/package=cli">https://CRAN.R-project.org/package=cli</a>.</p>
</div>
<div id="ref-R-jsonlite">
<p>Ooms, Jeroen. 2020. <em>Jsonlite: A Robust, High Performance Json Parser and Generator for R</em>. <a href="https://CRAN.R-project.org/package=jsonlite">https://CRAN.R-project.org/package=jsonlite</a>.</p>
</div>
<div id="ref-R-usethis">
<p>Wickham, Hadley, and Jennifer Bryan. 2020. <em>Usethis: Automate Package and Project Setup</em>. <a href="https://CRAN.R-project.org/package=usethis">https://CRAN.R-project.org/package=usethis</a>.</p>
</div>
<div id="ref-R-roxygen2">
<p>Wickham, Hadley, Peter Danenberg, Gábor Csárdi, and Manuel Eugster. 2020. <em>Roxygen2: In-Line Documentation for R</em>.</p>
</div>
<div id="ref-R-devtools">
<p>Wickham, Hadley, Jim Hester, and Winston Chang. 2020. <em>Devtools: Tools to Make Developing R Packages Easier</em>. <a href="https://CRAN.R-project.org/package=devtools">https://CRAN.R-project.org/package=devtools</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="basics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JohnCoene/javascript-for-r/edit/master/1-02-basics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
