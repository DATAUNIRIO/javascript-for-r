<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 Bidirectional Communication | JavaScript for R</title>
  <meta name="description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 Bidirectional Communication | JavaScript for R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="github-repo" content="JohnCoene/javascript-for-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 Bidirectional Communication | JavaScript for R" />
  
  <meta name="twitter:description" content="Invite JavaScript into your Data Science workflow." />
  

<meta name="author" content="John Coene" />


<meta name="date" content="2020-10-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="widgets-ex-plotly.html"/>
<link rel="next" href="shiny-complete.html"/>
<script src="libs/header-attrs-2.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.2.9000/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.9000/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.54.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.54.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>
<script src="libs/r2d3-render-0.1.0/r2d3-render.js"></script>
<script src="libs/webcomponents-2.0.0/webcomponents.js"></script>
<script src="libs/r2d3-binding-0.2.3/r2d3.js"></script>
<script src="libs/d3v5-5.0.0/d3.min.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.16/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74544116-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-74544116-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">JavaScript for R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#premise"><i class="fa fa-check"></i>Premise</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
</ul></li>
<li class="part"><span><b>I Basics &amp; Roadmap</b></span></li>
<li class="chapter" data-level="1" data-path="intro-overview.html"><a href="intro-overview.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-overview-rationale"><i class="fa fa-check"></i><b>1.1</b> Rationale</a></li>
<li class="chapter" data-level="1.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-methods"><i class="fa fa-check"></i><b>1.2</b> Methods</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-v8"><i class="fa fa-check"></i><b>1.2.1</b> V8</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-htmlwidgets"><i class="fa fa-check"></i><b>1.2.2</b> htmlwidgets</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro-overview.html"><a href="intro-overview.html#intro-shiny"><i class="fa fa-check"></i><b>1.2.3</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro-overview.html"><a href="intro-overview.html#intro-amiss"><i class="fa fa-check"></i><b>1.3</b> Methods Amiss</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-reactr-vuer"><i class="fa fa-check"></i><b>1.3.1</b> reactR &amp; vueR</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-r2d3"><i class="fa fa-check"></i><b>1.3.2</b> r2d3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>2</b> Prerequisites</a>
<ul>
<li class="chapter" data-level="2.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-pacakge-dev"><i class="fa fa-check"></i><b>2.1</b> R Package Development</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-create-pkg"><i class="fa fa-check"></i><b>2.1.1</b> Creating a Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-metadata"><i class="fa fa-check"></i><b>2.1.2</b> Metadata</a></li>
<li class="chapter" data-level="2.1.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-r-code"><i class="fa fa-check"></i><b>2.1.3</b> R code</a></li>
<li class="chapter" data-level="2.1.4" data-path="prerequisites.html"><a href="prerequisites.html#basics-documentation"><i class="fa fa-check"></i><b>2.1.4</b> Documentation</a></li>
<li class="chapter" data-level="2.1.5" data-path="prerequisites.html"><a href="prerequisites.html#basics-installed-files"><i class="fa fa-check"></i><b>2.1.5</b> Installed files</a></li>
<li class="chapter" data-level="2.1.6" data-path="prerequisites.html"><a href="prerequisites.html#basics-build-load-install"><i class="fa fa-check"></i><b>2.1.6</b> Build, load, and install</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-json"><i class="fa fa-check"></i><b>2.2</b> JSON</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="prerequisites.html"><a href="prerequisites.html#serialising"><i class="fa fa-check"></i><b>2.2.1</b> Serialising</a></li>
<li class="chapter" data-level="2.2.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-tabular"><i class="fa fa-check"></i><b>2.2.2</b> Tabular Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-javascript"><i class="fa fa-check"></i><b>2.3</b> JavaScript</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-chrome-devtools"><i class="fa fa-check"></i><b>2.3.1</b> Developer Tools</a></li>
<li class="chapter" data-level="2.3.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-var-scope"><i class="fa fa-check"></i><b>2.3.2</b> Variable Declaration and Scope</a></li>
<li class="chapter" data-level="2.3.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-object-model"><i class="fa fa-check"></i><b>2.3.3</b> Document Object Model</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="prerequisites.html"><a href="prerequisites.html#basics-shiny"><i class="fa fa-check"></i><b>2.4</b> Shiny</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-static-files"><i class="fa fa-check"></i><b>2.4.1</b> Serving Static Files</a></li>
<li class="chapter" data-level="2.4.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-htmltools"><i class="fa fa-check"></i><b>2.4.2</b> Htmltools</a></li>
<li class="chapter" data-level="2.4.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-deps-pro-cons"><i class="fa fa-check"></i><b>2.4.3</b> Serving vs. htmltools</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Visualisation</b></span></li>
<li class="chapter" data-level="3" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html"><i class="fa fa-check"></i><b>3</b> Introduction to Widgets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-plotly"><i class="fa fa-check"></i><b>3.1</b> Plotly package</a></li>
<li class="chapter" data-level="3.2" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-intro-dt"><i class="fa fa-check"></i><b>3.2</b> DT package</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="widgets-basics.html"><a href="widgets-basics.html"><i class="fa fa-check"></i><b>4</b> Basics of Building Widgets</a>
<ul>
<li class="chapter" data-level="4.1" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-study"><i class="fa fa-check"></i><b>4.1</b> Read &amp; Study</a></li>
<li class="chapter" data-level="4.2" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates"><i class="fa fa-check"></i><b>4.2</b> Candidate Libraries</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-plotly"><i class="fa fa-check"></i><b>4.2.1</b> Plotly.js</a></li>
<li class="chapter" data-level="4.2.2" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-highcharts"><i class="fa fa-check"></i><b>4.2.2</b> Highchart.js</a></li>
<li class="chapter" data-level="4.2.3" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-chart.js"><i class="fa fa-check"></i><b>4.2.3</b> Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-inner-workings"><i class="fa fa-check"></i><b>4.3</b> How it works</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="widgets-first.html"><a href="widgets-first.html"><i class="fa fa-check"></i><b>5</b> Your First Widget</a>
<ul>
<li class="chapter" data-level="5.1" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-scaffold"><i class="fa fa-check"></i><b>5.1</b> The Scaffold</a></li>
<li class="chapter" data-level="5.2" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-htmloutput"><i class="fa fa-check"></i><b>5.2</b> The HTML Output</a></li>
<li class="chapter" data-level="5.3" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-js-files"><i class="fa fa-check"></i><b>5.3</b> JavaScript Files</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="widgets-realistic.html"><a href="widgets-realistic.html"><i class="fa fa-check"></i><b>6</b> A Realistic Widget</a>
<ul>
<li class="chapter" data-level="6.1" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-deps"><i class="fa fa-check"></i><b>6.1</b> Dependencies</a></li>
<li class="chapter" data-level="6.2" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-implementation"><i class="fa fa-check"></i><b>6.2</b> Implementation</a></li>
<li class="chapter" data-level="6.3" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-html-element"><i class="fa fa-check"></i><b>6.3</b> HTML Element</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="widgets-full.html"><a href="widgets-full.html"><i class="fa fa-check"></i><b>7</b> The Full Monty</a>
<ul>
<li class="chapter" data-level="7.1" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-deps"><i class="fa fa-check"></i><b>7.1</b> Dependencies</a></li>
<li class="chapter" data-level="7.2" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-js"><i class="fa fa-check"></i><b>7.2</b> JavaScript</a></li>
<li class="chapter" data-level="7.3" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-data"><i class="fa fa-check"></i><b>7.3</b> Working with Data</a></li>
<li class="chapter" data-level="7.4" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data"><i class="fa fa-check"></i><b>7.4</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-js"><i class="fa fa-check"></i><b>7.4.1</b> Using JavaScript</a></li>
<li class="chapter" data-level="7.4.2" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-modify"><i class="fa fa-check"></i><b>7.4.2</b> Modify Serialiser</a></li>
<li class="chapter" data-level="7.4.3" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-replace"><i class="fa fa-check"></i><b>7.4.3</b> Replace Serialiser</a></li>
<li class="chapter" data-level="7.4.4" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-modify-data"><i class="fa fa-check"></i><b>7.4.4</b> Modify the Data</a></li>
<li class="chapter" data-level="7.4.5" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-conclusion"><i class="fa fa-check"></i><b>7.4.5</b> Pros &amp; Cons</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-on-print"><i class="fa fa-check"></i><b>7.5</b> On Print Method</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="widgets-adv.html"><a href="widgets-adv.html"><i class="fa fa-check"></i><b>8</b> Advanced Topics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-shared"><i class="fa fa-check"></i><b>8.1</b> Shared Variables</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-sizing"><i class="fa fa-check"></i><b>8.1.1</b> Sizing</a></li>
<li class="chapter" data-level="8.1.2" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-sizing-policy"><i class="fa fa-check"></i><b>8.1.2</b> Sizing Policy</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-resizing"><i class="fa fa-check"></i><b>8.2</b> Resizing</a></li>
<li class="chapter" data-level="8.3" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-prerender"><i class="fa fa-check"></i><b>8.3</b> Pre Render Hooks &amp; Security</a></li>
<li class="chapter" data-level="8.4" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-js"><i class="fa fa-check"></i><b>8.4</b> JavaScript Code</a></li>
<li class="chapter" data-level="8.5" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-prepend-append"><i class="fa fa-check"></i><b>8.5</b> Prepend &amp; Append Content</a></li>
<li class="chapter" data-level="8.6" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-dependencies"><i class="fa fa-check"></i><b>8.6</b> Dependencies</a></li>
<li class="chapter" data-level="8.7" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-compatibility"><i class="fa fa-check"></i><b>8.7</b> Compatibility</a></li>
<li class="chapter" data-level="8.8" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-unit-tests"><i class="fa fa-check"></i><b>8.8</b> Unit Tests</a></li>
<li class="chapter" data-level="8.9" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-performances"><i class="fa fa-check"></i><b>8.9</b> Performances</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="linking-widgets.html"><a href="linking-widgets.html"><i class="fa fa-check"></i><b>9</b> Linking Widgets</a>
<ul>
<li class="chapter" data-level="9.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-examples"><i class="fa fa-check"></i><b>9.1</b> Crosstalk Examples</a></li>
<li class="chapter" data-level="9.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-req"><i class="fa fa-check"></i><b>9.2</b> Crosstalk Requirements</a></li>
<li class="chapter" data-level="9.3" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-inner-workings"><i class="fa fa-check"></i><b>9.3</b> How it Works</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-keys"><i class="fa fa-check"></i><b>9.3.1</b> Keys</a></li>
<li class="chapter" data-level="9.3.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-communication-lines"><i class="fa fa-check"></i><b>9.3.2</b> Communication Lines</a></li>
<li class="chapter" data-level="9.3.3" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-groups"><i class="fa fa-check"></i><b>9.3.3</b> Groups</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-gio"><i class="fa fa-check"></i><b>9.4</b> Crosstalk with Gio</a></li>
<li class="chapter" data-level="9.5" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-r"><i class="fa fa-check"></i><b>9.5</b> R code</a></li>
<li class="chapter" data-level="9.6" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-js"><i class="fa fa-check"></i><b>9.6</b> JavaScript code</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-send-keys"><i class="fa fa-check"></i><b>9.6.1</b> Send Selected Keys</a></li>
<li class="chapter" data-level="9.6.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-set-keys"><i class="fa fa-check"></i><b>9.6.2</b> Set Selected Keys</a></li>
<li class="chapter" data-level="9.6.3" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-recap"><i class="fa fa-check"></i><b>9.6.3</b> Recap JavaScript Code</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-using"><i class="fa fa-check"></i><b>9.7</b> Using Crosstalk with Gio</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="widgets-final.html"><a href="widgets-final.html"><i class="fa fa-check"></i><b>10</b> Final Revisions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-data"><i class="fa fa-check"></i><b>10.1</b> Htmlwidgets &amp; Data</a></li>
<li class="chapter" data-level="10.2" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-options"><i class="fa fa-check"></i><b>10.2</b> Plethora of Options</a></li>
<li class="chapter" data-level="10.3" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-interface"><i class="fa fa-check"></i><b>10.3</b> Interface Design</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="widgets-ex-plotly.html"><a href="widgets-ex-plotly.html"><i class="fa fa-check"></i><b>11</b> Excercise - Ploty</a>
<ul>
<li class="chapter" data-level="11.1" data-path="widgets-ex-plotly.html"><a href="widgets-ex-plotly.html#widgets-ex-plotly-discover"><i class="fa fa-check"></i><b>11.1</b> Discover Plotly</a></li>
<li class="chapter" data-level="11.2" data-path="widgets-ex-plotly.html"><a href="widgets-ex-plotly.html#widgets-ex-plotly-basics"><i class="fa fa-check"></i><b>11.2</b> Basics of Plotly</a></li>
<li class="chapter" data-level="11.3" data-path="widgets-ex-plotly.html"><a href="widgets-ex-plotly.html#widgets-ex-plotly-js-to-r"><i class="fa fa-check"></i><b>11.3</b> JavaScript to R</a></li>
<li class="chapter" data-level="11.4" data-path="widgets-ex-plotly.html"><a href="widgets-ex-plotly.html#widgets-ex-plotly-r-to-js"><i class="fa fa-check"></i><b>11.4</b> R to JavaScript</a></li>
<li class="chapter" data-level="11.5" data-path="widgets-ex-plotly.html"><a href="widgets-ex-plotly.html#widgets-ex-plotly-sizing"><i class="fa fa-check"></i><b>11.5</b> Size &amp; Resize</a></li>
<li class="chapter" data-level="11.6" data-path="widgets-ex-plotly.html"><a href="widgets-ex-plotly.html#widgets-ex-plotly-perf-security"><i class="fa fa-check"></i><b>11.6</b> Performance &amp; Security</a></li>
</ul></li>
<li class="part"><span><b>III Web Development with Shiny</b></span></li>
<li class="chapter" data-level="12" data-path="shiny-intro.html"><a href="shiny-intro.html"><i class="fa fa-check"></i><b>12</b> Bidirectional Communication</a>
<ul>
<li class="chapter" data-level="12.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-websocket"><i class="fa fa-check"></i><b>12.1</b> Websocket &amp; Shiny</a></li>
<li class="chapter" data-level="12.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-example"><i class="fa fa-check"></i><b>12.2</b> Alerts, an example</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-explore"><i class="fa fa-check"></i><b>12.2.1</b> Explore</a></li>
<li class="chapter" data-level="12.2.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-r-to-js"><i class="fa fa-check"></i><b>12.2.2</b> From R to JavaScript</a></li>
<li class="chapter" data-level="12.2.3" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-serialise"><i class="fa fa-check"></i><b>12.2.3</b> Serialisation</a></li>
<li class="chapter" data-level="12.2.4" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-js2r"><i class="fa fa-check"></i><b>12.2.4</b> JavaScript to R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="shiny-complete.html"><a href="shiny-complete.html"><i class="fa fa-check"></i><b>13</b> A Complete Integration</a>
<ul>
<li class="chapter" data-level="13.1" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-discover"><i class="fa fa-check"></i><b>13.1</b> Discover</a></li>
<li class="chapter" data-level="13.2" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-setup"><i class="fa fa-check"></i><b>13.2</b> Setup</a></li>
<li class="chapter" data-level="13.3" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-dependencies"><i class="fa fa-check"></i><b>13.3</b> Dependencies</a></li>
<li class="chapter" data-level="13.4" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-images"><i class="fa fa-check"></i><b>13.4</b> Static files</a></li>
<li class="chapter" data-level="13.5" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-skeleton"><i class="fa fa-check"></i><b>13.5</b> Skeleton</a></li>
<li class="chapter" data-level="13.6" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-r2js"><i class="fa fa-check"></i><b>13.6</b> From R to JavaScript</a></li>
<li class="chapter" data-level="13.7" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-js2r"><i class="fa fa-check"></i><b>13.7</b> From JavaScript to R</a></li>
<li class="chapter" data-level="13.8" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-input-handler"><i class="fa fa-check"></i><b>13.8</b> Input handler</a></li>
<li class="chapter" data-level="13.9" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg"><i class="fa fa-check"></i><b>13.9</b> As a package</a>
<ul>
<li class="chapter" data-level="13.9.1" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-deps"><i class="fa fa-check"></i><b>13.9.1</b> Dependencies</a></li>
<li class="chapter" data-level="13.9.2" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-trigger"><i class="fa fa-check"></i><b>13.9.2</b> Trigger classification</a></li>
<li class="chapter" data-level="13.9.3" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-js-code"><i class="fa fa-check"></i><b>13.9.3</b> JavaScript code</a></li>
<li class="chapter" data-level="13.9.4" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-input-handler"><i class="fa fa-check"></i><b>13.9.4</b> Input handler</a></li>
<li class="chapter" data-level="13.9.5" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-test"><i class="fa fa-check"></i><b>13.9.5</b> Test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="shiny-tips.html"><a href="shiny-tips.html"><i class="fa fa-check"></i><b>14</b> Tips &amp; Tricks</a>
<ul>
<li class="chapter" data-level="14.1" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-events"><i class="fa fa-check"></i><b>14.1</b> Shiny Events</a></li>
<li class="chapter" data-level="14.2" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-table-btn"><i class="fa fa-check"></i><b>14.2</b> Table Buttons</a></li>
<li class="chapter" data-level="14.3" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-jQuery"><i class="fa fa-check"></i><b>14.3</b> jQuery</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="shiny-output.html"><a href="shiny-output.html"><i class="fa fa-check"></i><b>15</b> Custom Outputs</a>
<ul>
<li class="chapter" data-level="15.1" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-inner-workings"><i class="fa fa-check"></i><b>15.1</b> Inner-workings</a></li>
<li class="chapter" data-level="15.2" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-setup"><i class="fa fa-check"></i><b>15.2</b> Setup</a></li>
<li class="chapter" data-level="15.3" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-r-fun"><i class="fa fa-check"></i><b>15.3</b> Output R Function</a></li>
<li class="chapter" data-level="15.4" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-html"><i class="fa fa-check"></i><b>15.4</b> Generate Output HTML</a></li>
<li class="chapter" data-level="15.5" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-renderer"><i class="fa fa-check"></i><b>15.5</b> Output Renderer</a></li>
<li class="chapter" data-level="15.6" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-binding"><i class="fa fa-check"></i><b>15.6</b> JavaScript Output Binding</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-title"><i class="fa fa-check"></i><b>15.6.1</b> Boxxy Title</a></li>
<li class="chapter" data-level="15.6.2" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-value"><i class="fa fa-check"></i><b>15.6.2</b> Boxxy Value</a></li>
<li class="chapter" data-level="15.6.3" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-bg-color"><i class="fa fa-check"></i><b>15.6.3</b> Boxxy Background Color</a></li>
<li class="chapter" data-level="15.6.4" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-register"><i class="fa fa-check"></i><b>15.6.4</b> Register the Output Binding</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-usage"><i class="fa fa-check"></i><b>15.7</b> Boxxy Usage</a></li>
<li class="chapter" data-level="15.8" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-inject"><i class="fa fa-check"></i><b>15.8</b> Injecting Dependencies</a></li>
<li class="chapter" data-level="15.9" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-preprocess"><i class="fa fa-check"></i><b>15.9</b> Preprocessing Custom Outputs</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="shiny-input.html"><a href="shiny-input.html"><i class="fa fa-check"></i><b>16</b> Custom Inputs</a>
<ul>
<li class="chapter" data-level="16.1" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-setup"><i class="fa fa-check"></i><b>16.1</b> Setup</a></li>
<li class="chapter" data-level="16.2" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-intro"><i class="fa fa-check"></i><b>16.2</b> Switch Input HTML &amp; Style</a></li>
<li class="chapter" data-level="16.3" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-html"><i class="fa fa-check"></i><b>16.3</b> Generate Input HTML</a></li>
<li class="chapter" data-level="16.4" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-binding"><i class="fa fa-check"></i><b>16.4</b> JavaScript Input Binding</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-find"><i class="fa fa-check"></i><b>16.4.1</b> Find Inputs</a></li>
<li class="chapter" data-level="16.4.2" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-get-id"><i class="fa fa-check"></i><b>16.4.2</b> Get Input Id</a></li>
<li class="chapter" data-level="16.4.3" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-get-value"><i class="fa fa-check"></i><b>16.4.3</b> Get Input Value</a></li>
<li class="chapter" data-level="16.4.4" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-set-value"><i class="fa fa-check"></i><b>16.4.4</b> Set Input Value</a></li>
<li class="chapter" data-level="16.4.5" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-receive-msg"><i class="fa fa-check"></i><b>16.4.5</b> Receive Input Messages</a></li>
<li class="chapter" data-level="16.4.6" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-sub-unsub"><i class="fa fa-check"></i><b>16.4.6</b> Subscribe &amp; Unsubscribe Inputs</a></li>
<li class="chapter" data-level="16.4.7" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-rate-policy"><i class="fa fa-check"></i><b>16.4.7</b> Input Rate Policy</a></li>
<li class="chapter" data-level="16.4.8" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-register"><i class="fa fa-check"></i><b>16.4.8</b> Registering the Input Binding</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-update"><i class="fa fa-check"></i><b>16.5</b> Update Input</a></li>
<li class="chapter" data-level="16.6" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-excercise"><i class="fa fa-check"></i><b>16.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="shiny-cookies.html"><a href="shiny-cookies.html"><i class="fa fa-check"></i><b>17</b> Cookies</a>
<ul>
<li class="chapter" data-level="17.1" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-discover"><i class="fa fa-check"></i><b>17.1</b> Discover js-cookie</a></li>
<li class="chapter" data-level="17.2" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-setup"><i class="fa fa-check"></i><b>17.2</b> Setup Project</a></li>
<li class="chapter" data-level="17.3" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-javascript"><i class="fa fa-check"></i><b>17.3</b> JavaScript Cookies</a></li>
<li class="chapter" data-level="17.4" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-r-code"><i class="fa fa-check"></i><b>17.4</b> R Code</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="shiny-widgets.html"><a href="shiny-widgets.html"><i class="fa fa-check"></i><b>18</b> Widgets with Shiny</a>
<ul>
<li class="chapter" data-level="18.1" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-to-r"><i class="fa fa-check"></i><b>18.1</b> Widgets to R</a></li>
<li class="chapter" data-level="18.2" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-handlers"><i class="fa fa-check"></i><b>18.2</b> Input Handlers for Widgets</a></li>
<li class="chapter" data-level="18.3" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-r-to-widgets"><i class="fa fa-check"></i><b>18.3</b> R to Widgets</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-send-data"><i class="fa fa-check"></i><b>18.3.1</b> Send Data from Widgets</a></li>
<li class="chapter" data-level="18.3.2" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-retrieve"><i class="fa fa-check"></i><b>18.3.2</b> Retrieve Widget Instance</a></li>
<li class="chapter" data-level="18.3.3" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-handle-data"><i class="fa fa-check"></i><b>18.3.3</b> Handle Data</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-proxy"><i class="fa fa-check"></i><b>18.4</b> Proxy Function</a></li>
<li class="chapter" data-level="18.5" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-clear-data"><i class="fa fa-check"></i><b>18.5</b> Clear Data</a></li>
<li class="chapter" data-level="18.6" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-update"><i class="fa fa-check"></i><b>18.6</b> Update the Widget</a></li>
</ul></li>
<li class="part"><span><b>IV JavaScript for Computations</b></span></li>
<li class="chapter" data-level="19" data-path="v8.html"><a href="v8.html"><i class="fa fa-check"></i><b>19</b> The V8 Engine</a>
<ul>
<li class="chapter" data-level="19.1" data-path="v8.html"><a href="v8.html#v8-installation"><i class="fa fa-check"></i><b>19.1</b> Installation</a></li>
<li class="chapter" data-level="19.2" data-path="v8.html"><a href="v8.html#v8-basics"><i class="fa fa-check"></i><b>19.2</b> Basics</a></li>
<li class="chapter" data-level="19.3" data-path="v8.html"><a href="v8.html#v8-external"><i class="fa fa-check"></i><b>19.3</b> External Libraries</a></li>
<li class="chapter" data-level="19.4" data-path="v8.html"><a href="v8.html#v8-npm"><i class="fa fa-check"></i><b>19.4</b> Npm Packages</a></li>
<li class="chapter" data-level="19.5" data-path="v8.html"><a href="v8.html#v8-pkg"><i class="fa fa-check"></i><b>19.5</b> Use in Packages</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="v8-ml.html"><a href="v8-ml.html"><i class="fa fa-check"></i><b>20</b> Exercise - Machine Learning</a>
<ul>
<li class="chapter" data-level="20.1" data-path="v8-ml.html"><a href="v8-ml.html#v8-ml-dependency"><i class="fa fa-check"></i><b>20.1</b> Dependency</a></li>
<li class="chapter" data-level="20.2" data-path="v8-ml.html"><a href="v8-ml.html#v8-ml-regression"><i class="fa fa-check"></i><b>20.2</b> Simple Regression</a></li>
</ul></li>
<li class="part"><span><b>V Examples</b></span></li>
<li class="chapter" data-level="21" data-path="v8-img.html"><a href="v8-img.html"><i class="fa fa-check"></i><b>21</b> Image Classifier</a>
<ul>
<li class="chapter" data-level="21.1" data-path="v8-img.html"><a href="v8-img.html#v8-img-discover"><i class="fa fa-check"></i><b>21.1</b> Discover</a></li>
<li class="chapter" data-level="21.2" data-path="v8-img.html"><a href="v8-img.html#v8-img-setup"><i class="fa fa-check"></i><b>21.2</b> Setup</a></li>
<li class="chapter" data-level="21.3" data-path="v8-img.html"><a href="v8-img.html#v8-img-javascript"><i class="fa fa-check"></i><b>21.3</b> JavaScript</a></li>
<li class="chapter" data-level="21.4" data-path="v8-img.html"><a href="v8-img.html#v8-img-handler"><i class="fa fa-check"></i><b>21.4</b> Input Handler</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="progress.html"><a href="progress.html"><i class="fa fa-check"></i><b>22</b> Progress Bar</a>
<ul>
<li class="chapter" data-level="22.1" data-path="progress.html"><a href="progress.html#progress-r-code"><i class="fa fa-check"></i><b>22.1</b> R Code</a></li>
<li class="chapter" data-level="22.2" data-path="progress.html"><a href="progress.html#progress-js-code"><i class="fa fa-check"></i><b>22.2</b> JavaScript Code</a></li>
<li class="chapter" data-level="22.3" data-path="progress.html"><a href="progress.html#progress-events"><i class="fa fa-check"></i><b>22.3</b> Events</a></li>
</ul></li>
<li class="part"><span><b>VI Closing Remarks</b></span></li>
<li class="chapter" data-level="23" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>23</b> Conclusion</a>
<ul>
<li class="chapter" data-level="23.1" data-path="conclusion.html"><a href="conclusion.html#conclusion-performances"><i class="fa fa-check"></i><b>23.1</b> Performances</a></li>
<li class="chapter" data-level="23.2" data-path="conclusion.html"><a href="conclusion.html#conclusion-ahead"><i class="fa fa-check"></i><b>23.2</b> Road Ahead</a>
<ul>
<li class="chapter" data-level="23.2.1" data-path="conclusion.html"><a href="conclusion.html#compute"><i class="fa fa-check"></i><b>23.2.1</b> Computation</a></li>
<li class="chapter" data-level="23.2.2" data-path="conclusion.html"><a href="conclusion.html#shiny"><i class="fa fa-check"></i><b>23.2.2</b> Shiny</a></li>
<li class="chapter" data-level="23.2.3" data-path="conclusion.html"><a href="conclusion.html#widgets"><i class="fa fa-check"></i><b>23.2.3</b> htmlwidgets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">JavaScript for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="shiny-intro" class="section level1" number="12">
<h1><span class="header-section-number">Chapter 12</span> Bidirectional Communication</h1>
<p>Shiny is the web framework of choice for the R programming language. Since JavaScript and Shiny both run in web browsers it follows that they can run alongside one another as one can include JavaScript in such applications. Yet, often disregarded is the ability for Shiny’s R server to communicate to the front-end and vice versa. This collection of chapters aims to show precisely how this works. In this first part, we brush up on the essentials so we understand how to include JavaScript in shiny applications.</p>
<p>Then again, the goal is not to write a lot of convoluted JavaScript, on the contrary, with little knowledge of the language the aim is to write as little as possible but demonstrate to the reader that it is often enough to greatly improve the user experience of shiny applications.</p>
<div id="shiny-intro-websocket" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Websocket &amp; Shiny</h2>
<p>Shiny applications have two components the user interface (UI) and the server function. These two components communicate via a websocket: a persistent connection that allows passing messages between the server and clients connecting to it. In the R server this connection is managed by shiny using the httpuv <span class="citation">(Cheng and Chang <a href="#ref-R-httpuv" role="doc-biblioref">2020</a>)</span> and websocket <span class="citation">(Chang, Cheng, Dipert, et al. <a href="#ref-R-websocket" role="doc-biblioref">2020</a>)</span> packages, while in clients connecting to the server this connection is managed with JavaScript.</p>
<div id="htmlwidget-6558291fcab5cb0bf4f6" style="width:100%;height:576px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-6558291fcab5cb0bf4f6">{"x":{"diagram":"\ndigraph{\n  node [shape=record fontsize=10];\n\n  w1 [label=Websocket];\n  w2 [label=Websocket];\n  w3 [label=Websocket];\n  w4 [label=Websocket];\n\n  b1 [label=\"Browser\" color=gold];\n  b2 [label=\"Browser\" color=gold];\n  b3 [label=\"Browser\" color=gold];\n  b4 [label=\"Browser\" color=gold];\n\n  s [label=\"R server\" color=royalBlue];\n\n  s -> w1 -> b1 [dir=both color=dimGray arrowsize=.3];\n  s -> w2 -> b2 [dir=both color=dimGray arrowsize=.3];\n  s -> w3 -> b3 [dir=both color=dimGray arrowsize=.3];\n  s -> w4 -> b4 [dir=both color=dimGray arrowsize=.3];\n\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p>With that in mind we can put together a shiny applications which though simple exploits bi-directional communication. The application takes a text input, sends the value of the input to the R server which sends it back to the UI.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="shiny-intro.html#cb216-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb216-2"><a href="shiny-intro.html#cb216-2"></a></span>
<span id="cb216-3"><a href="shiny-intro.html#cb216-3"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb216-4"><a href="shiny-intro.html#cb216-4"></a>  <span class="kw">textInput</span>(<span class="st">&quot;nameInput&quot;</span>, <span class="st">&quot;Your name&quot;</span>),</span>
<span id="cb216-5"><a href="shiny-intro.html#cb216-5"></a>  <span class="kw">textOutput</span>(<span class="st">&quot;nameOutput&quot;</span>)</span>
<span id="cb216-6"><a href="shiny-intro.html#cb216-6"></a>)</span>
<span id="cb216-7"><a href="shiny-intro.html#cb216-7"></a></span>
<span id="cb216-8"><a href="shiny-intro.html#cb216-8"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</span>
<span id="cb216-9"><a href="shiny-intro.html#cb216-9"></a>  output<span class="op">$</span>nameOutput &lt;-<span class="st"> </span><span class="kw">renderText</span>({</span>
<span id="cb216-10"><a href="shiny-intro.html#cb216-10"></a>    input<span class="op">$</span>nameInput</span>
<span id="cb216-11"><a href="shiny-intro.html#cb216-11"></a>  })</span>
<span id="cb216-12"><a href="shiny-intro.html#cb216-12"></a>}</span>
<span id="cb216-13"><a href="shiny-intro.html#cb216-13"></a></span>
<span id="cb216-14"><a href="shiny-intro.html#cb216-14"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
<p>Drawing a diagram of the communication between the UI and the server reveals that thought this is a simple application a lot is happening.</p>
<div id="htmlwidget-b259e421cb1f0326c5cb" style="width:100%;height:576px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-b259e421cb1f0326c5cb">{"x":{"diagram":"\ndigraph {\n  graph[rankdir=LR fontsize = 10]\n  node[shape=record fontsize = 9]\n\n  subgraph cluster_0 {\n    textInput\n    textOutput\n    label=\"User Interface\"\n    color=gold\n  }\n\n  subgraph cluster_1 {\n    \"input list\"\n    renderOutput\n    label=\"R server\"\n    color=royalBlue\n  }\n\n  textInput -> \"input list\" [xlabel=websocket fontsize = 8]\n  \"input list\" -> renderOutput\n  renderOutput -> textOutput [label=websocket fontsize = 8]\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p>Communicating between the R server and the user interface requires JavaScript and thus makes a reasonable chunk of this part of the book on web development with shiny.</p>
</div>
<div id="shiny-intro-example" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> Alerts, an example</h2>
<p>Let’s exploit an external library to demonstrate how this works: <a href="https://github.com/StephanWagner/jBox">jBox</a> allows displaying “notices,” similar to vanilla JavaScript alerts, but much better looking and with additional functionalities.</p>
<p>The grand scheme is to build an application that displays a notification at the click of an <code>actionButton</code> and “tells” the server when that notification is closed. Though the introduction of this book includes best practices on how to include dependencies and JavaScript files much of that will be disregarded in this section (and only in this section) so it does not get in the way of explaining bidirectional communication through the websocket in shiny.</p>
<p>Moreover, the jBox library comes with numerous features to display tooltips, modals, notices, and more, which would make for too long a chapter; only notices shall be covered here. Let’s first take a look at the code that generates a jBox notice.</p>
<div id="shiny-intro-explore" class="section level3" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> Explore</h3>
<p>Below we build an extremely basic example that features jBox in HTML, it includes the dependencies and a short script that displays a notification when the page is loaded.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb217-1"><a href="shiny-intro.html#cb217-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb217-2"><a href="shiny-intro.html#cb217-2"></a><span class="kw">&lt;html</span><span class="ot"> xmlns=</span><span class="st">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="ot"> lang=</span><span class="st">&quot;&quot;</span><span class="ot"> xml:lang=</span><span class="st">&quot;&quot;</span><span class="kw">&gt;</span></span>
<span id="cb217-3"><a href="shiny-intro.html#cb217-3"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb217-4"><a href="shiny-intro.html#cb217-4"></a><span class="kw">&lt;script</span> </span>
<span id="cb217-5"><a href="shiny-intro.html#cb217-5"></a><span class="ot">  src=</span><span class="st">&quot;https://code.jquery.com/jquery-3.5.1.min.js&quot;</span><span class="kw">&gt;</span></span>
<span id="cb217-6"><a href="shiny-intro.html#cb217-6"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb217-7"><a href="shiny-intro.html#cb217-7"></a><span class="kw">&lt;script</span> </span>
<span id="cb217-8"><a href="shiny-intro.html#cb217-8"></a><span class="ot">  src=</span><span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/jBox@v1.2.0/dist/jBox.all.min.js&quot;</span><span class="kw">&gt;</span></span>
<span id="cb217-9"><a href="shiny-intro.html#cb217-9"></a><span class="kw">&lt;/script&gt;</span></span>
<span id="cb217-10"><a href="shiny-intro.html#cb217-10"></a><span class="kw">&lt;link</span> </span>
<span id="cb217-11"><a href="shiny-intro.html#cb217-11"></a><span class="ot">  href=</span><span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/jBox@v1.2.0/dist/jBox.all.min.css&quot;</span> </span>
<span id="cb217-12"><a href="shiny-intro.html#cb217-12"></a><span class="ot">  rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="kw">&gt;</span></span>
<span id="cb217-13"><a href="shiny-intro.html#cb217-13"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb217-14"><a href="shiny-intro.html#cb217-14"></a></span>
<span id="cb217-15"><a href="shiny-intro.html#cb217-15"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb217-16"><a href="shiny-intro.html#cb217-16"></a>  <span class="co">&lt;!-- Script to show a notification --&gt;</span></span>
<span id="cb217-17"><a href="shiny-intro.html#cb217-17"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb217-18"><a href="shiny-intro.html#cb217-18"></a>    <span class="kw">new</span> <span class="at">jBox</span>(<span class="st">&#39;Notice&#39;</span><span class="op">,</span> <span class="op">{</span></span>
<span id="cb217-19"><a href="shiny-intro.html#cb217-19"></a>      <span class="dt">content</span><span class="op">:</span> <span class="st">&#39;Hurray! A notice!&#39;</span></span>
<span id="cb217-20"><a href="shiny-intro.html#cb217-20"></a>    <span class="op">}</span>)<span class="op">;</span></span>
<span id="cb217-21"><a href="shiny-intro.html#cb217-21"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb217-22"><a href="shiny-intro.html#cb217-22"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb217-23"><a href="shiny-intro.html#cb217-23"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>The very first thing one should do is to recreate this basic example in shiny so that when the app is loaded the notification appear, we will make this work with the bidirectional websocket communication afterwards. The “j” in jBox stands for jQuery which is already a dependency of shiny itself, there is therefore no need to import it, on the contrary one should not in order to avoid clashes.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="shiny-intro.html#cb218-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb218-2"><a href="shiny-intro.html#cb218-2"></a></span>
<span id="cb218-3"><a href="shiny-intro.html#cb218-3"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb218-4"><a href="shiny-intro.html#cb218-4"></a>  tags<span class="op">$</span><span class="kw">head</span>(</span>
<span id="cb218-5"><a href="shiny-intro.html#cb218-5"></a>    tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb218-6"><a href="shiny-intro.html#cb218-6"></a>      <span class="dt">src =</span> <span class="kw">paste0</span>(</span>
<span id="cb218-7"><a href="shiny-intro.html#cb218-7"></a>        <span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/&quot;</span>,</span>
<span id="cb218-8"><a href="shiny-intro.html#cb218-8"></a>        <span class="st">&quot;jBox@v1.2.0/dist/jBox.all.min.js&quot;</span></span>
<span id="cb218-9"><a href="shiny-intro.html#cb218-9"></a>      )</span>
<span id="cb218-10"><a href="shiny-intro.html#cb218-10"></a>    ),</span>
<span id="cb218-11"><a href="shiny-intro.html#cb218-11"></a>    tags<span class="op">$</span><span class="kw">link</span>(</span>
<span id="cb218-12"><a href="shiny-intro.html#cb218-12"></a>      <span class="dt">rel =</span> <span class="st">&quot;stylesheet&quot;</span>,</span>
<span id="cb218-13"><a href="shiny-intro.html#cb218-13"></a>      <span class="dt">href =</span> <span class="kw">paste0</span>(</span>
<span id="cb218-14"><a href="shiny-intro.html#cb218-14"></a>        <span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/&quot;</span>,</span>
<span id="cb218-15"><a href="shiny-intro.html#cb218-15"></a>        <span class="st">&quot;jBox@v1.2.0/dist/jBox.all.min.css&quot;</span></span>
<span id="cb218-16"><a href="shiny-intro.html#cb218-16"></a>      )</span>
<span id="cb218-17"><a href="shiny-intro.html#cb218-17"></a>    )</span>
<span id="cb218-18"><a href="shiny-intro.html#cb218-18"></a>  ),</span>
<span id="cb218-19"><a href="shiny-intro.html#cb218-19"></a>  tags<span class="op">$</span><span class="kw">script</span>(<span class="st">&quot;</span></span>
<span id="cb218-20"><a href="shiny-intro.html#cb218-20"></a><span class="st">    new jBox(&#39;Notice&#39;, {</span></span>
<span id="cb218-21"><a href="shiny-intro.html#cb218-21"></a><span class="st">      content: &#39;Hurray! A notice!&#39;</span></span>
<span id="cb218-22"><a href="shiny-intro.html#cb218-22"></a><span class="st">    });&quot;</span></span>
<span id="cb218-23"><a href="shiny-intro.html#cb218-23"></a>  )</span>
<span id="cb218-24"><a href="shiny-intro.html#cb218-24"></a>)</span>
<span id="cb218-25"><a href="shiny-intro.html#cb218-25"></a></span>
<span id="cb218-26"><a href="shiny-intro.html#cb218-26"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {}</span>
<span id="cb218-27"><a href="shiny-intro.html#cb218-27"></a></span>
<span id="cb218-28"><a href="shiny-intro.html#cb218-28"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
<div class="figure">
<img src="images/jbox-init.png" alt="" />
<p class="caption">A basic jBox notice</p>
</div>
<p>The application above essentially reproduces the basic HTML example that was shared; the dependencies are imported and a script displays a notification. Since all of that takes place in the front-end the body of the server function is empty.</p>
</div>
<div id="shiny-intro-r-to-js" class="section level3" number="12.2.2">
<h3><span class="header-section-number">12.2.2</span> From R to JavaScript</h3>
<p>Now that we have a simple notice displayed in the application we can tie it with the R server; the alert should display a message sent by the R server, this would enable more dynamic messages such as displaying a message taken from a database or a user input. As might be expected there are two functions required to do so, an R function and its JavaScript complementary: one to send the data from the server and another to catch said data in the client and display the notice.</p>
<p>Let us start by writing the R code to send the data, thankfully very little is required of the developer. One can send data from the R server to the client from the <code>session</code> object using the <code>sendCustomMessage</code> method. Note that being a method of the <code>session</code> object implies that this message will only be sent to said session: only the client connected to that session will receive the message.</p>
<p>The <code>sendCustomMessage</code> method takes two arguments, first an identifier (<code>type</code>), second the actual data to send to JavaScript (<code>message</code>). The identifier passed first will be necessary JavaScript-side to “catch” that message and show the notice.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="shiny-intro.html#cb219-1"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){</span>
<span id="cb219-2"><a href="shiny-intro.html#cb219-2"></a>  <span class="co"># set the identifier to send-notice</span></span>
<span id="cb219-3"><a href="shiny-intro.html#cb219-3"></a>  session<span class="op">$</span><span class="kw">sendCustomMessage</span>(</span>
<span id="cb219-4"><a href="shiny-intro.html#cb219-4"></a>    <span class="dt">type =</span> <span class="st">&quot;send-notice&quot;</span>, <span class="dt">message =</span> <span class="st">&quot;Hi there!&quot;</span></span>
<span id="cb219-5"><a href="shiny-intro.html#cb219-5"></a>  )</span>
<span id="cb219-6"><a href="shiny-intro.html#cb219-6"></a>}</span></code></pre></div>
<p>So while the above sends the message to JavaScript through the websocket nothing is yet to be done with that message once it arrives in the client. We can add a “handler” for the identifier we defined (<code>send-notice</code>) which will do something with the message we sent from the server. This is done with the <code>addCustomMessageHandler</code> method from the <code>Shiny</code> object where the first argument is the identifier and the second is the function that handles the message, a function that takes a single argument: the data sent from the server.</p>
<p>Below we add the handler for messages of type <code>send-notice</code>, the handler itself is a function that accepts the messages that was sent from the server and uses it to generate the notice via jBox.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="shiny-intro.html#cb220-1"></a>tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb220-2"><a href="shiny-intro.html#cb220-2"></a>  <span class="st">&quot;Shiny.addCustomMessageHandler(</span></span>
<span id="cb220-3"><a href="shiny-intro.html#cb220-3"></a><span class="st">    type = &#39;send-notice&#39;, function(message) {</span></span>
<span id="cb220-4"><a href="shiny-intro.html#cb220-4"></a><span class="st">      new jBox(&#39;Notice&#39;, {</span></span>
<span id="cb220-5"><a href="shiny-intro.html#cb220-5"></a><span class="st">        content: message</span></span>
<span id="cb220-6"><a href="shiny-intro.html#cb220-6"></a><span class="st">      });</span></span>
<span id="cb220-7"><a href="shiny-intro.html#cb220-7"></a><span class="st">  });&quot;</span></span>
<span id="cb220-8"><a href="shiny-intro.html#cb220-8"></a>)</span></code></pre></div>
<p>This effectively enables passing a message that is taken from a database for instance, or as shown below from a user input, to the front-end which generates a notice.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="shiny-intro.html#cb221-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb221-2"><a href="shiny-intro.html#cb221-2"></a></span>
<span id="cb221-3"><a href="shiny-intro.html#cb221-3"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb221-4"><a href="shiny-intro.html#cb221-4"></a>  tags<span class="op">$</span><span class="kw">head</span>(</span>
<span id="cb221-5"><a href="shiny-intro.html#cb221-5"></a>    tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb221-6"><a href="shiny-intro.html#cb221-6"></a>      <span class="dt">src =</span> <span class="kw">paste0</span>(</span>
<span id="cb221-7"><a href="shiny-intro.html#cb221-7"></a>        <span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/&quot;</span>,</span>
<span id="cb221-8"><a href="shiny-intro.html#cb221-8"></a>        <span class="st">&quot;jBox@v1.2.0/dist/jBox.all.min.js&quot;</span></span>
<span id="cb221-9"><a href="shiny-intro.html#cb221-9"></a>      )</span>
<span id="cb221-10"><a href="shiny-intro.html#cb221-10"></a>    ),</span>
<span id="cb221-11"><a href="shiny-intro.html#cb221-11"></a>    tags<span class="op">$</span><span class="kw">link</span>(</span>
<span id="cb221-12"><a href="shiny-intro.html#cb221-12"></a>      <span class="dt">rel =</span> <span class="st">&quot;stylesheet&quot;</span>,</span>
<span id="cb221-13"><a href="shiny-intro.html#cb221-13"></a>      <span class="dt">href =</span> <span class="kw">paste0</span>(</span>
<span id="cb221-14"><a href="shiny-intro.html#cb221-14"></a>        <span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/&quot;</span>,</span>
<span id="cb221-15"><a href="shiny-intro.html#cb221-15"></a>        <span class="st">&quot;jBox@v1.2.0/dist/jBox.all.min.css&quot;</span></span>
<span id="cb221-16"><a href="shiny-intro.html#cb221-16"></a>      )</span>
<span id="cb221-17"><a href="shiny-intro.html#cb221-17"></a>    )</span>
<span id="cb221-18"><a href="shiny-intro.html#cb221-18"></a>  ),</span>
<span id="cb221-19"><a href="shiny-intro.html#cb221-19"></a>  <span class="kw">textInput</span>(<span class="st">&quot;msg&quot;</span>, <span class="st">&quot;notice&quot;</span>),</span>
<span id="cb221-20"><a href="shiny-intro.html#cb221-20"></a>  <span class="kw">actionButton</span>(<span class="st">&quot;notify&quot;</span>, <span class="st">&quot;Notify myself&quot;</span>),</span>
<span id="cb221-21"><a href="shiny-intro.html#cb221-21"></a>  tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb221-22"><a href="shiny-intro.html#cb221-22"></a>    <span class="st">&quot;Shiny.addCustomMessageHandler(</span></span>
<span id="cb221-23"><a href="shiny-intro.html#cb221-23"></a><span class="st">      type = &#39;send-notice&#39;, function(message) {</span></span>
<span id="cb221-24"><a href="shiny-intro.html#cb221-24"></a><span class="st">        new jBox(&#39;Notice&#39;, {</span></span>
<span id="cb221-25"><a href="shiny-intro.html#cb221-25"></a><span class="st">          content: message</span></span>
<span id="cb221-26"><a href="shiny-intro.html#cb221-26"></a><span class="st">        });</span></span>
<span id="cb221-27"><a href="shiny-intro.html#cb221-27"></a><span class="st">    });&quot;</span></span>
<span id="cb221-28"><a href="shiny-intro.html#cb221-28"></a>  )</span>
<span id="cb221-29"><a href="shiny-intro.html#cb221-29"></a>)</span>
<span id="cb221-30"><a href="shiny-intro.html#cb221-30"></a></span>
<span id="cb221-31"><a href="shiny-intro.html#cb221-31"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</span>
<span id="cb221-32"><a href="shiny-intro.html#cb221-32"></a></span>
<span id="cb221-33"><a href="shiny-intro.html#cb221-33"></a>  <span class="kw">observeEvent</span>(input<span class="op">$</span>notify, {</span>
<span id="cb221-34"><a href="shiny-intro.html#cb221-34"></a>    session<span class="op">$</span><span class="kw">sendCustomMessage</span>(</span>
<span id="cb221-35"><a href="shiny-intro.html#cb221-35"></a>      <span class="dt">type =</span> <span class="st">&quot;send-notice&quot;</span>, <span class="dt">message =</span> input<span class="op">$</span>msg</span>
<span id="cb221-36"><a href="shiny-intro.html#cb221-36"></a>    )</span>
<span id="cb221-37"><a href="shiny-intro.html#cb221-37"></a>  })</span>
<span id="cb221-38"><a href="shiny-intro.html#cb221-38"></a></span>
<span id="cb221-39"><a href="shiny-intro.html#cb221-39"></a>}</span>
<span id="cb221-40"><a href="shiny-intro.html#cb221-40"></a></span>
<span id="cb221-41"><a href="shiny-intro.html#cb221-41"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
<div class="figure">
<img src="images/jbox-r2js.png" alt="" />
<p class="caption">A notice triggered by the server</p>
</div>
<p>In the application above, notice the path that the message follows: it goes from the client (user input) to the server (<code>observeEvent</code>) which sends (<code>sendCustomMessage</code>) it back to the client.</p>
<div id="htmlwidget-2e29fefc76b13e0d898d" style="width:100%;height:576px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-2e29fefc76b13e0d898d">{"x":{"diagram":"\ndigraph{\n  graph [rankdir=LR]\n  node [shape=record fontsize=10];\n\n  subgraph cluster_0 {\n    textInput\n    handler [label=\"message handler\"]\n    notice [label = \"show notice\"]\n    label=\"Client\"\n    color=gold\n  }\n\n  subgraph cluster_1 {\n    send[label=\"sendCustomMessage\"]\n    label=\"Server\"\n    color=royalBlue\n  }\n\n  textInput -> send [label=\"value\"];\n  send -> handler [label=\"message\"];\n  handler -> notice;\n\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p>This might be considered suboptimal by some as it is not necessary to use the server as intermediary (in this example at least). Though there is some truth to this the above will work perfectly fine—and the aim here is to make JavaScript work with R—not alongside it, the websocket is very efficient and this will not have much overhead at all.</p>
</div>
<div id="shiny-intro-serialise" class="section level3" number="12.2.3">
<h3><span class="header-section-number">12.2.3</span> Serialisation</h3>
<p>Let’s delve deeper into the data that is sent from the server to the front-end to understand how we can further customise the notice displayed, e.g.: change the colour.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb222-1"><a href="shiny-intro.html#cb222-1"></a><span class="kw">new</span> <span class="at">jBox</span>(<span class="st">&#39;Notice&#39;</span><span class="op">,</span> <span class="op">{</span></span>
<span id="cb222-2"><a href="shiny-intro.html#cb222-2"></a>  <span class="dt">content</span><span class="op">:</span> <span class="st">&#39;Hurray! A notice!&#39;</span><span class="op">,</span></span>
<span id="cb222-3"><a href="shiny-intro.html#cb222-3"></a>  <span class="dt">color</span><span class="op">:</span> <span class="st">&#39;red&#39;</span></span>
<span id="cb222-4"><a href="shiny-intro.html#cb222-4"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>The jBox notice is configured using a JSON object containing the options that define said notice to display (example above), including but not limited to the message. The most straightforward way to make all those options accessible to the server is to construct that list of options server-side before sending it to the the front-end. For instance the JSON of options displayed above would look like the R list below.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="shiny-intro.html#cb223-1"></a>options &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb223-2"><a href="shiny-intro.html#cb223-2"></a>  <span class="dt">content =</span> <span class="st">&#39;Hurray! A notice!&#39;</span>,</span>
<span id="cb223-3"><a href="shiny-intro.html#cb223-3"></a>  <span class="dt">color =</span> <span class="st">&#39;red&#39;</span></span>
<span id="cb223-4"><a href="shiny-intro.html#cb223-4"></a>)</span>
<span id="cb223-5"><a href="shiny-intro.html#cb223-5"></a>jsonlite<span class="op">::</span><span class="kw">toJSON</span>(options, <span class="dt">pretty =</span> <span class="ot">TRUE</span>, <span class="dt">auto_unbox =</span> <span class="ot">TRUE</span>)</span>
<span id="cb223-6"><a href="shiny-intro.html#cb223-6"></a><span class="co">#&gt; {</span></span>
<span id="cb223-7"><a href="shiny-intro.html#cb223-7"></a><span class="co">#&gt;   &quot;content&quot;: &quot;Hurray! A notice!&quot;,</span></span>
<span id="cb223-8"><a href="shiny-intro.html#cb223-8"></a><span class="co">#&gt;   &quot;color&quot;: &quot;red&quot;</span></span>
<span id="cb223-9"><a href="shiny-intro.html#cb223-9"></a><span class="co">#&gt; }</span></span></code></pre></div>
<p>Therefore one could construct this list server-side and use it in jBox straight away, doing so means the JavaScript code can be simplified to <code>new jBox('Notice', message);</code>.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="shiny-intro.html#cb224-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb224-2"><a href="shiny-intro.html#cb224-2"></a></span>
<span id="cb224-3"><a href="shiny-intro.html#cb224-3"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb224-4"><a href="shiny-intro.html#cb224-4"></a>  tags<span class="op">$</span><span class="kw">head</span>(</span>
<span id="cb224-5"><a href="shiny-intro.html#cb224-5"></a>    tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb224-6"><a href="shiny-intro.html#cb224-6"></a>      <span class="dt">src =</span> <span class="kw">paste0</span>(</span>
<span id="cb224-7"><a href="shiny-intro.html#cb224-7"></a>        <span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/&quot;</span>,</span>
<span id="cb224-8"><a href="shiny-intro.html#cb224-8"></a>        <span class="st">&quot;jBox@v1.2.0/dist/jBox.all.min.js&quot;</span></span>
<span id="cb224-9"><a href="shiny-intro.html#cb224-9"></a>      )</span>
<span id="cb224-10"><a href="shiny-intro.html#cb224-10"></a>    ),</span>
<span id="cb224-11"><a href="shiny-intro.html#cb224-11"></a>    tags<span class="op">$</span><span class="kw">link</span>(</span>
<span id="cb224-12"><a href="shiny-intro.html#cb224-12"></a>      <span class="dt">rel =</span> <span class="st">&quot;stylesheet&quot;</span>,</span>
<span id="cb224-13"><a href="shiny-intro.html#cb224-13"></a>      <span class="dt">href =</span> <span class="kw">paste0</span>(</span>
<span id="cb224-14"><a href="shiny-intro.html#cb224-14"></a>        <span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/&quot;</span>,</span>
<span id="cb224-15"><a href="shiny-intro.html#cb224-15"></a>        <span class="st">&quot;jBox@v1.2.0/dist/jBox.all.min.css&quot;</span></span>
<span id="cb224-16"><a href="shiny-intro.html#cb224-16"></a>      )</span>
<span id="cb224-17"><a href="shiny-intro.html#cb224-17"></a>    ),</span>
<span id="cb224-18"><a href="shiny-intro.html#cb224-18"></a>    tags<span class="op">$</span><span class="kw">script</span>(<span class="st">&quot;Shiny.addCustomMessageHandler(</span></span>
<span id="cb224-19"><a href="shiny-intro.html#cb224-19"></a><span class="st">      type = &#39;send-notice&#39;, function(message) {</span></span>
<span id="cb224-20"><a href="shiny-intro.html#cb224-20"></a><span class="st">        // use notice send from the server</span></span>
<span id="cb224-21"><a href="shiny-intro.html#cb224-21"></a><span class="st">        new jBox(&#39;Notice&#39;, message);</span></span>
<span id="cb224-22"><a href="shiny-intro.html#cb224-22"></a><span class="st">    });&quot;</span>)</span>
<span id="cb224-23"><a href="shiny-intro.html#cb224-23"></a>  )</span>
<span id="cb224-24"><a href="shiny-intro.html#cb224-24"></a>)</span>
<span id="cb224-25"><a href="shiny-intro.html#cb224-25"></a></span>
<span id="cb224-26"><a href="shiny-intro.html#cb224-26"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){</span>
<span id="cb224-27"><a href="shiny-intro.html#cb224-27"></a>  <span class="co"># define notice options</span></span>
<span id="cb224-28"><a href="shiny-intro.html#cb224-28"></a>  notice =<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb224-29"><a href="shiny-intro.html#cb224-29"></a>    <span class="dt">content =</span> <span class="st">&#39;Hello from the server&#39;</span>,</span>
<span id="cb224-30"><a href="shiny-intro.html#cb224-30"></a>    <span class="dt">color =</span> <span class="st">&#39;black&#39;</span></span>
<span id="cb224-31"><a href="shiny-intro.html#cb224-31"></a>  )</span>
<span id="cb224-32"><a href="shiny-intro.html#cb224-32"></a>  <span class="co"># send the notice</span></span>
<span id="cb224-33"><a href="shiny-intro.html#cb224-33"></a>  session<span class="op">$</span><span class="kw">sendCustomMessage</span>(<span class="dt">type =</span> <span class="st">&quot;send-notice&quot;</span>, <span class="dt">message =</span> notice)</span>
<span id="cb224-34"><a href="shiny-intro.html#cb224-34"></a>}</span>
<span id="cb224-35"><a href="shiny-intro.html#cb224-35"></a></span>
<span id="cb224-36"><a href="shiny-intro.html#cb224-36"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
<div class="figure">
<img src="images/jbox-custom.png" alt="" />
<p class="caption">Customised jBox Notice</p>
</div>
</div>
<div id="shiny-intro-js2r" class="section level3" number="12.2.4">
<h3><span class="header-section-number">12.2.4</span> JavaScript to R</h3>
<p>Thus far we have covered how to pass data from the R server to JavaScript in order to display a notification but we have yet to make the data travel the other way: from JavaScript to R. In this example we would like to send data from JavaScript to R when the notice is closed (either by itself or the user).</p>
<p>One very common way that such feedback is enabled in JavaScript is through events and callback functions which are triggered upon an action being performed by the user (like the click of a button) or when other interesting things happen in the code. jBox provides numerous such <a href="https://stephanwagner.me/jBox/options#events">events</a> so functions can be used when a modal is created or when a notice is closed for instance.</p>
<p>The concept of the callback function is not totally foreign to R albeit rarely used. For instance, shiny comes with this feature, <code>shiny::onStop</code> and <code>shiny::onStart</code>. These allow having functions run when the application starts or exits, very useful to clean up and close database connections when the app exits.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="shiny-intro.html#cb225-1"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</span>
<span id="cb225-2"><a href="shiny-intro.html#cb225-2"></a>  shiny<span class="op">::</span><span class="kw">onStop</span>(</span>
<span id="cb225-3"><a href="shiny-intro.html#cb225-3"></a>    <span class="co"># callback function fired when app is closed</span></span>
<span id="cb225-4"><a href="shiny-intro.html#cb225-4"></a>    <span class="cf">function</span>(){</span>
<span id="cb225-5"><a href="shiny-intro.html#cb225-5"></a>      <span class="kw">cat</span>(<span class="st">&quot;App has been closed&quot;</span>)</span>
<span id="cb225-6"><a href="shiny-intro.html#cb225-6"></a>    }</span>
<span id="cb225-7"><a href="shiny-intro.html#cb225-7"></a>  )</span>
<span id="cb225-8"><a href="shiny-intro.html#cb225-8"></a>}</span></code></pre></div>
<p>In jBox, these callback functions are included in the JSON of options, below the <code>onClose</code> event is fired when the notice is closed.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb226-1"><a href="shiny-intro.html#cb226-1"></a><span class="op">{</span></span>
<span id="cb226-2"><a href="shiny-intro.html#cb226-2"></a>  <span class="dt">content</span><span class="op">:</span> <span class="st">&#39;Alert!&#39;</span><span class="op">,</span></span>
<span id="cb226-3"><a href="shiny-intro.html#cb226-3"></a>  <span class="dt">onClose</span><span class="op">:</span> <span class="kw">function</span>()<span class="op">{</span></span>
<span id="cb226-4"><a href="shiny-intro.html#cb226-4"></a>    <span class="co">// Fired when closed </span></span>
<span id="cb226-5"><a href="shiny-intro.html#cb226-5"></a>    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Alert is closed&#39;</span>)<span class="op">;</span></span>
<span id="cb226-6"><a href="shiny-intro.html#cb226-6"></a>  <span class="op">}</span></span>
<span id="cb226-7"><a href="shiny-intro.html#cb226-7"></a><span class="op">}</span></span></code></pre></div>
<p>This raises one issue, one cannot truly serialise to executable code. The attempt below serialises the function to a string that <em>will not</em> be evaluated in JavaScript, just like <code>"function(x){ x + 1 }"</code> is not evaluated in R: it’s not a function, it’s a string.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="shiny-intro.html#cb227-1"></a><span class="co"># try to serialise an R function</span></span>
<span id="cb227-2"><a href="shiny-intro.html#cb227-2"></a>jsonlite<span class="op">::</span><span class="kw">toJSON</span>(<span class="st">&quot;function(x){x + 1}&quot;</span>, <span class="dt">auto_unbox =</span> <span class="ot">TRUE</span>)</span>
<span id="cb227-3"><a href="shiny-intro.html#cb227-3"></a><span class="co">#&gt; &quot;function(x){x + 1}&quot;</span></span></code></pre></div>
<p>One solution is to append the callback function to the object of options JavaScript-side.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="shiny-intro.html#cb228-1"></a>tags<span class="op">$</span><span class="kw">script</span>(<span class="st">&quot;Shiny.addCustomMessageHandler(</span></span>
<span id="cb228-2"><a href="shiny-intro.html#cb228-2"></a><span class="st">  type = &#39;send-alert&#39;, function(message) {</span></span>
<span id="cb228-3"><a href="shiny-intro.html#cb228-3"></a><span class="st">    // append callback</span></span>
<span id="cb228-4"><a href="shiny-intro.html#cb228-4"></a><span class="st">    message.onClose = function(){</span></span>
<span id="cb228-5"><a href="shiny-intro.html#cb228-5"></a><span class="st">      // TODO send data back to R</span></span>
<span id="cb228-6"><a href="shiny-intro.html#cb228-6"></a><span class="st">    }</span></span>
<span id="cb228-7"><a href="shiny-intro.html#cb228-7"></a><span class="st">    new jBox(&#39;Notice&#39;, message);</span></span>
<span id="cb228-8"><a href="shiny-intro.html#cb228-8"></a><span class="st">});&quot;</span>)</span></code></pre></div>
<p>Placing a function inside a JSON object is common in JavaScript, in contrast with R where though it works is rarely if ever done (reference class/R6 are somewhat similar). The above JavaScript code to append the callback function could look something like the snippet below in R.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="shiny-intro.html#cb229-1"></a>message &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">content =</span> <span class="st">&quot;hello&quot;</span>)</span>
<span id="cb229-2"><a href="shiny-intro.html#cb229-2"></a>message<span class="op">$</span>onClose &lt;-<span class="st"> </span><span class="cf">function</span>(msg){</span>
<span id="cb229-3"><a href="shiny-intro.html#cb229-3"></a>  <span class="kw">print</span>(msg)</span>
<span id="cb229-4"><a href="shiny-intro.html#cb229-4"></a>}</span>
<span id="cb229-5"><a href="shiny-intro.html#cb229-5"></a>message<span class="op">$</span><span class="kw">onClose</span>(<span class="st">&quot;Closing!&quot;</span>)</span>
<span id="cb229-6"><a href="shiny-intro.html#cb229-6"></a><span class="co">#&gt; [1] &quot;Closing!&quot;</span></span></code></pre></div>
<p>This explains how the event is used in jBox (and many other libraries) but the body of the callback used previously is empty and therefore will not do anything: we need it to send data back to the R server so it can be notified when the notice is closed.</p>
<p>This can be done by defining a simplified shiny input. While the book will eventually cover fully-fledged shiny inputs that can be registered, updated, and more, there is also a simplified version of the latter which allows sending reactive input values to the server where it can be used just like any other inputs (<code>input$id</code>). The value of the input can be defined using the <code>setInputValue</code> method which takes the <code>id</code> of the input and the <code>value</code> to give it.</p>
<p>Below place <code>Shiny.setInputValue('notice_close', true)</code> in the body of the function so the input <code>input$notice_close</code> will be set to <code>TRUE</code> when the notice closes.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="shiny-intro.html#cb230-1"></a>tags<span class="op">$</span><span class="kw">script</span>(<span class="st">&quot;Shiny.addCustomMessageHandler(</span></span>
<span id="cb230-2"><a href="shiny-intro.html#cb230-2"></a><span class="st">  type = &#39;send-alert&#39;, function(message) {</span></span>
<span id="cb230-3"><a href="shiny-intro.html#cb230-3"></a><span class="st">    // append callback</span></span>
<span id="cb230-4"><a href="shiny-intro.html#cb230-4"></a><span class="st">    message.onClose = function(){</span></span>
<span id="cb230-5"><a href="shiny-intro.html#cb230-5"></a><span class="st">      Shiny.setInputValue(&#39;notice_close&#39;, true);</span></span>
<span id="cb230-6"><a href="shiny-intro.html#cb230-6"></a><span class="st">    }</span></span>
<span id="cb230-7"><a href="shiny-intro.html#cb230-7"></a><span class="st">    new jBox(&#39;Notice&#39;, message);</span></span>
<span id="cb230-8"><a href="shiny-intro.html#cb230-8"></a><span class="st">});&quot;</span>)</span></code></pre></div>
<p>However Shiny internally optimises how those values are set. First, if the input is set to the same value then Shiny ignores it. This is fine if you are interested in the actual value of the input but will not work as expected if the input is to be used as event. Indeed if you want to use this input in an <code>observe</code>, <code>observeEvent</code>, or <code>eventReactive</code>, you want it to be triggered every time the input changes, regardless of whether that value is the same as before. The second optimisation Shiny does is when the input is set to multiple different values before these have been processed then only the most recent value will actually be sent to the server.</p>
<p>One can opt-out of these optimisations using the <code>priority: "event"</code> option when setting the input value which is what we shall do here. We are not interested in the actual value of that input <code>TRUE</code>, we want to make sure the server gets notified every time a notification closes and given the optimisations it will not since. The first time the event will be fired the input will be set from <code>NULL</code> to <code>TRUE</code> but every subsequent notification that close will not fired that event since the value will not change (it’s always sending <code>TRUE</code> to the server).</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="shiny-intro.html#cb231-1"></a>tags<span class="op">$</span><span class="kw">script</span>(<span class="st">&quot;Shiny.addCustomMessageHandler(</span></span>
<span id="cb231-2"><a href="shiny-intro.html#cb231-2"></a><span class="st">  type = &#39;send-alert&#39;, function(message) {</span></span>
<span id="cb231-3"><a href="shiny-intro.html#cb231-3"></a><span class="st">    // append callback</span></span>
<span id="cb231-4"><a href="shiny-intro.html#cb231-4"></a><span class="st">    message.onClose = function(){</span></span>
<span id="cb231-5"><a href="shiny-intro.html#cb231-5"></a><span class="st">      Shiny.setInputValue(&#39;notice_close&#39;, true, {priority: &#39;event&#39;});</span></span>
<span id="cb231-6"><a href="shiny-intro.html#cb231-6"></a><span class="st">    }</span></span>
<span id="cb231-7"><a href="shiny-intro.html#cb231-7"></a><span class="st">    new jBox(&#39;Notice&#39;, message);</span></span>
<span id="cb231-8"><a href="shiny-intro.html#cb231-8"></a><span class="st">});&quot;</span>)</span></code></pre></div>
<p>That done it can be incorporated into the application built thus far. Something interesting could be done server-side but to keep things brief and simple we merely print the value of the input to the R console.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="shiny-intro.html#cb232-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb232-2"><a href="shiny-intro.html#cb232-2"></a></span>
<span id="cb232-3"><a href="shiny-intro.html#cb232-3"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb232-4"><a href="shiny-intro.html#cb232-4"></a>  tags<span class="op">$</span><span class="kw">head</span>(</span>
<span id="cb232-5"><a href="shiny-intro.html#cb232-5"></a>    tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb232-6"><a href="shiny-intro.html#cb232-6"></a>      <span class="dt">src =</span> <span class="kw">paste0</span>(</span>
<span id="cb232-7"><a href="shiny-intro.html#cb232-7"></a>        <span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/&quot;</span>,</span>
<span id="cb232-8"><a href="shiny-intro.html#cb232-8"></a>        <span class="st">&quot;jBox@v1.2.0/dist/jBox.all.min.js&quot;</span></span>
<span id="cb232-9"><a href="shiny-intro.html#cb232-9"></a>      )</span>
<span id="cb232-10"><a href="shiny-intro.html#cb232-10"></a>    ),</span>
<span id="cb232-11"><a href="shiny-intro.html#cb232-11"></a>    tags<span class="op">$</span><span class="kw">link</span>(</span>
<span id="cb232-12"><a href="shiny-intro.html#cb232-12"></a>      <span class="dt">rel =</span> <span class="st">&quot;stylesheet&quot;</span>,</span>
<span id="cb232-13"><a href="shiny-intro.html#cb232-13"></a>      <span class="dt">href =</span> <span class="kw">paste0</span>(</span>
<span id="cb232-14"><a href="shiny-intro.html#cb232-14"></a>        <span class="st">&quot;https://cdn.jsdelivr.net/gh/StephanWagner/&quot;</span>,</span>
<span id="cb232-15"><a href="shiny-intro.html#cb232-15"></a>        <span class="st">&quot;jBox@v1.2.0/dist/jBox.all.min.css&quot;</span></span>
<span id="cb232-16"><a href="shiny-intro.html#cb232-16"></a>      )</span>
<span id="cb232-17"><a href="shiny-intro.html#cb232-17"></a>    ),</span>
<span id="cb232-18"><a href="shiny-intro.html#cb232-18"></a>    tags<span class="op">$</span><span class="kw">script</span>(</span>
<span id="cb232-19"><a href="shiny-intro.html#cb232-19"></a>      <span class="st">&quot;Shiny.addCustomMessageHandler(</span></span>
<span id="cb232-20"><a href="shiny-intro.html#cb232-20"></a><span class="st">        type = &#39;send-notice&#39;, function(message) {</span></span>
<span id="cb232-21"><a href="shiny-intro.html#cb232-21"></a><span class="st">          message.onClose = function(){</span></span>
<span id="cb232-22"><a href="shiny-intro.html#cb232-22"></a><span class="st">            Shiny.setInputValue(&#39;notice_close&#39;, true, {priority: &#39;event&#39;});</span></span>
<span id="cb232-23"><a href="shiny-intro.html#cb232-23"></a><span class="st">          }</span></span>
<span id="cb232-24"><a href="shiny-intro.html#cb232-24"></a><span class="st">          new jBox(&#39;Notice&#39;, message);</span></span>
<span id="cb232-25"><a href="shiny-intro.html#cb232-25"></a><span class="st">      });&quot;</span></span>
<span id="cb232-26"><a href="shiny-intro.html#cb232-26"></a>    )</span>
<span id="cb232-27"><a href="shiny-intro.html#cb232-27"></a>  ),</span>
<span id="cb232-28"><a href="shiny-intro.html#cb232-28"></a>  <span class="kw">textInput</span>(<span class="st">&quot;msg&quot;</span>, <span class="st">&quot;A message to show as notice&quot;</span>),</span>
<span id="cb232-29"><a href="shiny-intro.html#cb232-29"></a>  <span class="kw">actionButton</span>(<span class="st">&quot;show&quot;</span>, <span class="st">&quot;Show the notice&quot;</span>)</span>
<span id="cb232-30"><a href="shiny-intro.html#cb232-30"></a>)</span>
<span id="cb232-31"><a href="shiny-intro.html#cb232-31"></a></span>
<span id="cb232-32"><a href="shiny-intro.html#cb232-32"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){</span>
<span id="cb232-33"><a href="shiny-intro.html#cb232-33"></a></span>
<span id="cb232-34"><a href="shiny-intro.html#cb232-34"></a>  <span class="kw">observeEvent</span>(input<span class="op">$</span>show, {</span>
<span id="cb232-35"><a href="shiny-intro.html#cb232-35"></a>    <span class="co"># define notice options</span></span>
<span id="cb232-36"><a href="shiny-intro.html#cb232-36"></a>    notice =<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb232-37"><a href="shiny-intro.html#cb232-37"></a>      <span class="dt">content =</span> input<span class="op">$</span>msg,</span>
<span id="cb232-38"><a href="shiny-intro.html#cb232-38"></a>      <span class="dt">color =</span> <span class="st">&#39;black&#39;</span></span>
<span id="cb232-39"><a href="shiny-intro.html#cb232-39"></a>    )</span>
<span id="cb232-40"><a href="shiny-intro.html#cb232-40"></a></span>
<span id="cb232-41"><a href="shiny-intro.html#cb232-41"></a>    <span class="co"># send the notice</span></span>
<span id="cb232-42"><a href="shiny-intro.html#cb232-42"></a>    session<span class="op">$</span><span class="kw">sendCustomMessage</span>(</span>
<span id="cb232-43"><a href="shiny-intro.html#cb232-43"></a>      <span class="dt">type =</span> <span class="st">&quot;send-notice&quot;</span>, <span class="dt">message =</span> notice</span>
<span id="cb232-44"><a href="shiny-intro.html#cb232-44"></a>    )</span>
<span id="cb232-45"><a href="shiny-intro.html#cb232-45"></a>  })</span>
<span id="cb232-46"><a href="shiny-intro.html#cb232-46"></a></span>
<span id="cb232-47"><a href="shiny-intro.html#cb232-47"></a>  <span class="co"># print the output of the notice_close event (when fired)</span></span>
<span id="cb232-48"><a href="shiny-intro.html#cb232-48"></a>  <span class="kw">observeEvent</span>(input<span class="op">$</span>notice_close, {</span>
<span id="cb232-49"><a href="shiny-intro.html#cb232-49"></a>    <span class="kw">print</span>(input<span class="op">$</span>notice_close)</span>
<span id="cb232-50"><a href="shiny-intro.html#cb232-50"></a>  })</span>
<span id="cb232-51"><a href="shiny-intro.html#cb232-51"></a>}</span>
<span id="cb232-52"><a href="shiny-intro.html#cb232-52"></a></span>
<span id="cb232-53"><a href="shiny-intro.html#cb232-53"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<p><img src="images/jbox-end.png" /></p>
<p>In the next chapter we will build another application that makes use of bidirectional communication but also introduces a few more concepts to improve how such communication takes place and allows passing more complex messages from R to JavaScript and vice versa.</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-websocket">
<p>Chang, Winston, Joe Cheng, Alan Dipert, and Barbara Borges. 2020. <em>Websocket: WebSocket Client Library</em>.</p>
</div>
<div id="ref-R-httpuv">
<p>Cheng, Joe, and Winston Chang. 2020. <em>Httpuv: HTTP and Websocket Server Library</em>. <a href="https://github.com/rstudio/httpuv">https://github.com/rstudio/httpuv</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="widgets-ex-plotly.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="shiny-complete.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JohnCoene/javascript-for-r/edit/master/4-11-shiny-first-look.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
