# Hotkey

In this chapter we include [hotkeys](https://github.com/jaywcjlove/hotkeys) in a shiny application, though this library has serious and valid applications we shall use it in a somewhat cheeky way. This library allows capturing keyboard inputs.

Hotkeys comes with loads of options but at its core remains uncomplicated: the function `hotkeys` watches for key presses, either all or a few select ones.

```js
hotkeys('*', function(event){
  console.log(event);
});
```

We could use this to send back to the server the keys that are pressed on the keyboard so these can be used as input in the server. We start with a shiny application that simply imports `hotkeys.min.js` from the CDN.

```r
library(shiny)

ui <- fluidPage(
  tags$head(
    tags$script(
      src = "https://unpkg.com/hotkeys-js@3.8.1/dist/hotkeys.min.js"
    )
  )
)

server <- function(input, output) {

}

shinyApp(ui, server)
```


```r
library(shiny)

ui <- fluidPage(
  tags$head(
    tags$script(
      src = "https://unpkg.com/hotkeys-js@3.8.1/dist/hotkeys.min.js"
    ),
    tags$script(
      "hotkeys('*', function(event){
        console.log(event);
      });"
    )
  )
)

server <- function(input, output) {

}

shinyApp(ui, server)
```

```r
library(shiny)

ui <- fluidPage(
  tags$head(
    tags$script(
      src = "https://unpkg.com/hotkeys-js@3.8.1/dist/hotkeys.min.js"
    ),
    tags$script(
      "hotkeys('*', function(event){
        Shiny.setInputValue('key_pressed', event.key, {priority: 'event'});
      });"
    )
  ),
  h3("type 'javascript' to reveal the plot"),
  plotOutput("plot")
)

server <- function(input, output) {

  password <- strsplit("javascript", "")[[1]]
  keys <- c()

  observeEvent(input$key_pressed, {
    keys <<- c(keys, input$key_pressed)
    print(keys)
  })

  output$plot <- renderPlot({

    if(length(keys))
      if(keys == password)
        hist(rnorm(200))

  })

}

shinyApp(ui, server)
```
